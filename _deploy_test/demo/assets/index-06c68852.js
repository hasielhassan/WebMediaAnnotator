var Qm=Object.defineProperty;var Jm=(t,e,n)=>e in t?Qm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ei=(t,e,n)=>(Jm(t,typeof e!="symbol"?e+"":e,n),n);var zr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};function Km(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rf={exports:{}},Io={},Pf={exports:{}},A={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Us=Symbol.for("react.element"),Xm=Symbol.for("react.portal"),Zm=Symbol.for("react.fragment"),qm=Symbol.for("react.strict_mode"),e0=Symbol.for("react.profiler"),t0=Symbol.for("react.provider"),n0=Symbol.for("react.context"),r0=Symbol.for("react.forward_ref"),s0=Symbol.for("react.suspense"),i0=Symbol.for("react.memo"),o0=Symbol.for("react.lazy"),Ou=Symbol.iterator;function l0(t){return t===null||typeof t!="object"?null:(t=Ou&&t[Ou]||t["@@iterator"],typeof t=="function"?t:null)}var Df={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mf=Object.assign,Nf={};function Nr(t,e,n){this.props=t,this.context=e,this.refs=Nf,this.updater=n||Df}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function If(){}If.prototype=Nr.prototype;function pc(t,e,n){this.props=t,this.context=e,this.refs=Nf,this.updater=n||Df}var gc=pc.prototype=new If;gc.constructor=pc;Mf(gc,Nr.prototype);gc.isPureReactComponent=!0;var Fu=Array.isArray,jf=Object.prototype.hasOwnProperty,mc={current:null},Lf={key:!0,ref:!0,__self:!0,__source:!0};function Af(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jf.call(e,r)&&!Lf.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Us,type:t,key:i,ref:o,props:s,_owner:mc.current}}function a0(t,e){return{$$typeof:Us,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Us}function c0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $u=/\/+/g;function fl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?c0(""+t.key):e.toString(36)}function _i(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Us:case Xm:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fl(o,0):r,Fu(s)?(n="",t!=null&&(n=t.replace($u,"$&/")+"/"),_i(s,e,n,"",function(c){return c})):s!=null&&(yc(s)&&(s=a0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($u,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Fu(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+fl(i,l);o+=_i(i,e,n,a,s)}else if(a=l0(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+fl(i,l++),o+=_i(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ti(t,e,n){if(t==null)return t;var r=[],s=0;return _i(t,r,"","",function(i){return e.call(n,i,s++)}),r}function u0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ne={current:null},Ci={transition:null},d0={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Ci,ReactCurrentOwner:mc};function Of(){throw Error("act(...) is not supported in production builds of React.")}A.Children={map:ti,forEach:function(t,e,n){ti(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ti(t,function(){e++}),e},toArray:function(t){return ti(t,function(e){return e})||[]},only:function(t){if(!yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};A.Component=Nr;A.Fragment=Zm;A.Profiler=e0;A.PureComponent=pc;A.StrictMode=qm;A.Suspense=s0;A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d0;A.act=Of;A.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Mf({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)jf.call(e,a)&&!Lf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Us,type:t.type,key:s,ref:i,props:r,_owner:o}};A.createContext=function(t){return t={$$typeof:n0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:t0,_context:t},t.Consumer=t};A.createElement=Af;A.createFactory=function(t){var e=Af.bind(null,t);return e.type=t,e};A.createRef=function(){return{current:null}};A.forwardRef=function(t){return{$$typeof:r0,render:t}};A.isValidElement=yc;A.lazy=function(t){return{$$typeof:o0,_payload:{_status:-1,_result:t},_init:u0}};A.memo=function(t,e){return{$$typeof:i0,type:t,compare:e===void 0?null:e}};A.startTransition=function(t){var e=Ci.transition;Ci.transition={};try{t()}finally{Ci.transition=e}};A.unstable_act=Of;A.useCallback=function(t,e){return Ne.current.useCallback(t,e)};A.useContext=function(t){return Ne.current.useContext(t)};A.useDebugValue=function(){};A.useDeferredValue=function(t){return Ne.current.useDeferredValue(t)};A.useEffect=function(t,e){return Ne.current.useEffect(t,e)};A.useId=function(){return Ne.current.useId()};A.useImperativeHandle=function(t,e,n){return Ne.current.useImperativeHandle(t,e,n)};A.useInsertionEffect=function(t,e){return Ne.current.useInsertionEffect(t,e)};A.useLayoutEffect=function(t,e){return Ne.current.useLayoutEffect(t,e)};A.useMemo=function(t,e){return Ne.current.useMemo(t,e)};A.useReducer=function(t,e,n){return Ne.current.useReducer(t,e,n)};A.useRef=function(t){return Ne.current.useRef(t)};A.useState=function(t){return Ne.current.useState(t)};A.useSyncExternalStore=function(t,e,n){return Ne.current.useSyncExternalStore(t,e,n)};A.useTransition=function(){return Ne.current.useTransition()};A.version="18.3.1";Pf.exports=A;var H=Pf.exports;const Wt=hc(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0=H,h0=Symbol.for("react.element"),p0=Symbol.for("react.fragment"),g0=Object.prototype.hasOwnProperty,m0=f0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y0={key:!0,ref:!0,__self:!0,__source:!0};function Ff(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)g0.call(e,r)&&!y0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:h0,type:t,key:i,ref:o,props:s,_owner:m0.current}}Io.Fragment=p0;Io.jsx=Ff;Io.jsxs=Ff;Rf.exports=Io;var h=Rf.exports,ql={},$f={exports:{}},Ye={},zf={exports:{}},Uf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,N){var I=E.length;E.push(N);e:for(;0<I;){var J=I-1>>>1,ce=E[J];if(0<s(ce,N))E[J]=N,E[I]=ce,I=J;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var N=E[0],I=E.pop();if(I!==N){E[0]=I;e:for(var J=0,ce=E.length,Zs=ce>>>1;J<Zs;){var vn=2*(J+1)-1,dl=E[vn],xn=vn+1,qs=E[xn];if(0>s(dl,I))xn<ce&&0>s(qs,dl)?(E[J]=qs,E[xn]=I,J=xn):(E[J]=dl,E[vn]=I,J=vn);else if(xn<ce&&0>s(qs,I))E[J]=qs,E[xn]=I,J=xn;else break e}}return N}function s(E,N){var I=E.sortIndex-N.sortIndex;return I!==0?I:E.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,f=3,p=!1,m=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(E){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=E)r(c),N.sortIndex=N.expirationTime,e(a,N);else break;N=n(c)}}function k(E){if(x=!1,y(E),!m)if(n(a)!==null)m=!0,Et(C);else{var N=n(c);N!==null&&Tt(k,N.startTime-E)}}function C(E,N){m=!1,x&&(x=!1,v(b),b=-1),p=!0;var I=f;try{for(y(N),d=n(a);d!==null&&(!(d.expirationTime>N)||E&&!S());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var ce=J(d.expirationTime<=N);N=t.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(a)&&r(a),y(N)}else r(a);d=n(a)}if(d!==null)var Zs=!0;else{var vn=n(c);vn!==null&&Tt(k,vn.startTime-N),Zs=!1}return Zs}finally{d=null,f=I,p=!1}}var R=!1,T=null,b=-1,U=5,j=-1;function S(){return!(t.unstable_now()-j<U)}function M(){if(T!==null){var E=t.unstable_now();j=E;var N=!0;try{N=T(!0,E)}finally{N?O():(R=!1,T=null)}}else R=!1}var O;if(typeof g=="function")O=function(){g(M)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Ut=ke.port2;ke.port1.onmessage=M,O=function(){Ut.postMessage(null)}}else O=function(){w(M,0)};function Et(E){T=E,R||(R=!0,O())}function Tt(E,N){b=w(function(){E(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,Et(C))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(E){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var I=f;f=N;try{return E()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,N){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var I=f;f=E;try{return N()}finally{f=I}},t.unstable_scheduleCallback=function(E,N,I){var J=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?J+I:J):I=J,E){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=I+ce,E={id:u++,callback:N,priorityLevel:E,startTime:I,expirationTime:ce,sortIndex:-1},I>J?(E.sortIndex=I,e(c,E),n(a)===null&&E===n(c)&&(x?(v(b),b=-1):x=!0,Tt(k,I-J))):(E.sortIndex=ce,e(a,E),m||p||(m=!0,Et(C))),E},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(E){var N=f;return function(){var I=f;f=N;try{return E.apply(this,arguments)}finally{f=I}}}})(Uf);zf.exports=Uf;var v0=zf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=H,Ge=v0;function _(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bf=new Set,hs={};function On(t,e){vr(t,e),vr(t+"Capture",e)}function vr(t,e){for(hs[t]=e,t=0;t<e.length;t++)Bf.add(e[t])}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=Object.prototype.hasOwnProperty,k0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zu={},Uu={};function S0(t){return ea.call(Uu,t)?!0:ea.call(zu,t)?!1:k0.test(t)?Uu[t]=!0:(zu[t]=!0,!1)}function _0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C0(t,e,n,r){if(e===null||typeof e>"u"||_0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ie(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Ie(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Ie(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Ie(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Ie(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Ie(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Ie(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new Ie(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new Ie(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new Ie(t,5,!1,t.toLowerCase(),null,!1,!1)});var vc=/[\-:]([a-z])/g;function xc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vc,xc);xe[e]=new Ie(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vc,xc);xe[e]=new Ie(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vc,xc);xe[e]=new Ie(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Ie(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new Ie(t,1,!1,t.toLowerCase(),null,!0,!0)});function kc(t,e,n,r){var s=xe.hasOwnProperty(e)?xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(C0(e,n,s,r)&&(n=null),r||s===null?S0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ft=x0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ni=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),ta=Symbol.for("react.profiler"),Vf=Symbol.for("react.provider"),Hf=Symbol.for("react.context"),_c=Symbol.for("react.forward_ref"),na=Symbol.for("react.suspense"),ra=Symbol.for("react.suspense_list"),Cc=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Wf=Symbol.for("react.offscreen"),Bu=Symbol.iterator;function Ur(t){return t===null||typeof t!="object"?null:(t=Bu&&t[Bu]||t["@@iterator"],typeof t=="function"?t:null)}var q=Object.assign,hl;function Kr(t){if(hl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hl=e&&e[1]||""}return`
`+hl+t}var pl=!1;function gl(t,e){if(!t||pl)return"";pl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{pl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kr(t):""}function w0(t){switch(t.tag){case 5:return Kr(t.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return t=gl(t.type,!1),t;case 11:return t=gl(t.type.render,!1),t;case 1:return t=gl(t.type,!0),t;default:return""}}function sa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jn:return"Fragment";case Qn:return"Portal";case ta:return"Profiler";case Sc:return"StrictMode";case na:return"Suspense";case ra:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hf:return(t.displayName||"Context")+".Consumer";case Vf:return(t._context.displayName||"Context")+".Provider";case _c:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cc:return e=t.displayName||null,e!==null?e:sa(t.type)||"Memo";case Vt:e=t._payload,t=t._init;try{return sa(t(e))}catch{}}return null}function E0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sa(e);case 8:return e===Sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function un(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T0(t){var e=Gf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ri(t){t._valueTracker||(t._valueTracker=T0(t))}function Yf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ia(t,e){var n=e.checked;return q({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=un(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qf(t,e){e=e.checked,e!=null&&kc(t,"checked",e,!1)}function oa(t,e){Qf(t,e);var n=un(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?la(t,e.type,n):e.hasOwnProperty("defaultValue")&&la(t,e.type,un(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function la(t,e,n){(e!=="number"||Wi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xr=Array.isArray;function or(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+un(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function aa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_(91));return q({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_(92));if(Xr(n)){if(1<n.length)throw Error(_(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:un(n)}}function Jf(t,e){var n=un(e.value),r=un(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Kf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var si,Xf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(si=si||document.createElement("div"),si.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=si.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ps(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b0=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(t){b0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ts[e]=ts[t]})});function Zf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ts.hasOwnProperty(t)&&ts[t]?(""+e).trim():e+"px"}function qf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Zf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var R0=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ua(t,e){if(e){if(R0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_(62))}}function da(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fa=null;function wc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ha=null,lr=null,ar=null;function Yu(t){if(t=Hs(t)){if(typeof ha!="function")throw Error(_(280));var e=t.stateNode;e&&(e=Fo(e),ha(t.stateNode,t.type,e))}}function eh(t){lr?ar?ar.push(t):ar=[t]:lr=t}function th(){if(lr){var t=lr,e=ar;if(ar=lr=null,Yu(t),e)for(t=0;t<e.length;t++)Yu(e[t])}}function nh(t,e){return t(e)}function rh(){}var ml=!1;function sh(t,e,n){if(ml)return t(e,n);ml=!0;try{return nh(t,e,n)}finally{ml=!1,(lr!==null||ar!==null)&&(rh(),th())}}function gs(t,e){var n=t.stateNode;if(n===null)return null;var r=Fo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_(231,e,typeof n));return n}var pa=!1;if(jt)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){pa=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{pa=!1}function P0(t,e,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ns=!1,Gi=null,Yi=!1,ga=null,D0={onError:function(t){ns=!0,Gi=t}};function M0(t,e,n,r,s,i,o,l,a){ns=!1,Gi=null,P0.apply(D0,arguments)}function N0(t,e,n,r,s,i,o,l,a){if(M0.apply(this,arguments),ns){if(ns){var c=Gi;ns=!1,Gi=null}else throw Error(_(198));Yi||(Yi=!0,ga=c)}}function Fn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ih(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qu(t){if(Fn(t)!==t)throw Error(_(188))}function I0(t){var e=t.alternate;if(!e){if(e=Fn(t),e===null)throw Error(_(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qu(s),t;if(i===r)return Qu(s),e;i=i.sibling}throw Error(_(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?t:e}function oh(t){return t=I0(t),t!==null?lh(t):null}function lh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lh(t);if(e!==null)return e;t=t.sibling}return null}var ah=Ge.unstable_scheduleCallback,Ju=Ge.unstable_cancelCallback,j0=Ge.unstable_shouldYield,L0=Ge.unstable_requestPaint,te=Ge.unstable_now,A0=Ge.unstable_getCurrentPriorityLevel,Ec=Ge.unstable_ImmediatePriority,ch=Ge.unstable_UserBlockingPriority,Qi=Ge.unstable_NormalPriority,O0=Ge.unstable_LowPriority,uh=Ge.unstable_IdlePriority,jo=null,xt=null;function F0(t){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(jo,t,void 0,(t.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:U0,$0=Math.log,z0=Math.LN2;function U0(t){return t>>>=0,t===0?32:31-($0(t)/z0|0)|0}var ii=64,oi=4194304;function Zr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ji(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Zr(l):(i&=o,i!==0&&(r=Zr(i)))}else o=n&~s,o!==0?r=Zr(o):i!==0&&(r=Zr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ct(e),s=1<<n,r|=t[n],e&=~s;return r}function B0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ct(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=B0(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function ma(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dh(){var t=ii;return ii<<=1,!(ii&4194240)&&(ii=64),t}function yl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ct(e),t[e]=n}function H0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ct(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Tc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ct(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var V=0;function fh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hh,bc,ph,gh,mh,ya=!1,li=[],en=null,tn=null,nn=null,ms=new Map,ys=new Map,Gt=[],W0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ku(t,e){switch(t){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(e.pointerId)}}function Vr(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hs(e),e!==null&&bc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function G0(t,e,n,r,s){switch(e){case"focusin":return en=Vr(en,t,e,n,r,s),!0;case"dragenter":return tn=Vr(tn,t,e,n,r,s),!0;case"mouseover":return nn=Vr(nn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ms.set(i,Vr(ms.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ys.set(i,Vr(ys.get(i)||null,t,e,n,r,s)),!0}return!1}function yh(t){var e=Cn(t.target);if(e!==null){var n=Fn(e);if(n!==null){if(e=n.tag,e===13){if(e=ih(n),e!==null){t.blockedOn=e,mh(t.priority,function(){ph(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=va(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fa=r,n.target.dispatchEvent(r),fa=null}else return e=Hs(n),e!==null&&bc(e),t.blockedOn=n,!1;e.shift()}return!0}function Xu(t,e,n){wi(t)&&n.delete(e)}function Y0(){ya=!1,en!==null&&wi(en)&&(en=null),tn!==null&&wi(tn)&&(tn=null),nn!==null&&wi(nn)&&(nn=null),ms.forEach(Xu),ys.forEach(Xu)}function Hr(t,e){t.blockedOn===e&&(t.blockedOn=null,ya||(ya=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,Y0)))}function vs(t){function e(s){return Hr(s,t)}if(0<li.length){Hr(li[0],t);for(var n=1;n<li.length;n++){var r=li[n];r.blockedOn===t&&(r.blockedOn=null)}}for(en!==null&&Hr(en,t),tn!==null&&Hr(tn,t),nn!==null&&Hr(nn,t),ms.forEach(e),ys.forEach(e),n=0;n<Gt.length;n++)r=Gt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gt.length&&(n=Gt[0],n.blockedOn===null);)yh(n),n.blockedOn===null&&Gt.shift()}var cr=Ft.ReactCurrentBatchConfig,Ki=!0;function Q0(t,e,n,r){var s=V,i=cr.transition;cr.transition=null;try{V=1,Rc(t,e,n,r)}finally{V=s,cr.transition=i}}function J0(t,e,n,r){var s=V,i=cr.transition;cr.transition=null;try{V=4,Rc(t,e,n,r)}finally{V=s,cr.transition=i}}function Rc(t,e,n,r){if(Ki){var s=va(t,e,n,r);if(s===null)bl(t,e,r,Xi,n),Ku(t,r);else if(G0(s,t,e,n,r))r.stopPropagation();else if(Ku(t,r),e&4&&-1<W0.indexOf(t)){for(;s!==null;){var i=Hs(s);if(i!==null&&hh(i),i=va(t,e,n,r),i===null&&bl(t,e,r,Xi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bl(t,e,r,null,n)}}var Xi=null;function va(t,e,n,r){if(Xi=null,t=wc(r),t=Cn(t),t!==null)if(e=Fn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ih(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xi=t,null}function vh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A0()){case Ec:return 1;case ch:return 4;case Qi:case O0:return 16;case uh:return 536870912;default:return 16}default:return 16}}var Kt=null,Pc=null,Ei=null;function xh(){if(Ei)return Ei;var t,e=Pc,n=e.length,r,s="value"in Kt?Kt.value:Kt.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ei=s.slice(t,1<r?1-r:void 0)}function Ti(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ai(){return!0}function Zu(){return!1}function Qe(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ai:Zu,this.isPropagationStopped=Zu,this}return q(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),e}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dc=Qe(Ir),Vs=q({},Ir,{view:0,detail:0}),K0=Qe(Vs),vl,xl,Wr,Lo=q({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wr&&(Wr&&t.type==="mousemove"?(vl=t.screenX-Wr.screenX,xl=t.screenY-Wr.screenY):xl=vl=0,Wr=t),vl)},movementY:function(t){return"movementY"in t?t.movementY:xl}}),qu=Qe(Lo),X0=q({},Lo,{dataTransfer:0}),Z0=Qe(X0),q0=q({},Vs,{relatedTarget:0}),kl=Qe(q0),ey=q({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),ty=Qe(ey),ny=q({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ry=Qe(ny),sy=q({},Ir,{data:0}),ed=Qe(sy),iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ay(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ly[t])?!!e[t]:!1}function Mc(){return ay}var cy=q({},Vs,{key:function(t){if(t.key){var e=iy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(t){return t.type==="keypress"?Ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uy=Qe(cy),dy=q({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),td=Qe(dy),fy=q({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),hy=Qe(fy),py=q({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),gy=Qe(py),my=q({},Lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yy=Qe(my),vy=[9,13,27,32],Nc=jt&&"CompositionEvent"in window,rs=null;jt&&"documentMode"in document&&(rs=document.documentMode);var xy=jt&&"TextEvent"in window&&!rs,kh=jt&&(!Nc||rs&&8<rs&&11>=rs),nd=String.fromCharCode(32),rd=!1;function Sh(t,e){switch(t){case"keyup":return vy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _h(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kn=!1;function ky(t,e){switch(t){case"compositionend":return _h(e);case"keypress":return e.which!==32?null:(rd=!0,nd);case"textInput":return t=e.data,t===nd&&rd?null:t;default:return null}}function Sy(t,e){if(Kn)return t==="compositionend"||!Nc&&Sh(t,e)?(t=xh(),Ei=Pc=Kt=null,Kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kh&&e.locale!=="ko"?null:e.data;default:return null}}var _y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_y[t.type]:e==="textarea"}function Ch(t,e,n,r){eh(r),e=Zi(e,"onChange"),0<e.length&&(n=new Dc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ss=null,xs=null;function Cy(t){jh(t,0)}function Ao(t){var e=qn(t);if(Yf(e))return t}function wy(t,e){if(t==="change")return e}var wh=!1;if(jt){var Sl;if(jt){var _l="oninput"in document;if(!_l){var id=document.createElement("div");id.setAttribute("oninput","return;"),_l=typeof id.oninput=="function"}Sl=_l}else Sl=!1;wh=Sl&&(!document.documentMode||9<document.documentMode)}function od(){ss&&(ss.detachEvent("onpropertychange",Eh),xs=ss=null)}function Eh(t){if(t.propertyName==="value"&&Ao(xs)){var e=[];Ch(e,xs,t,wc(t)),sh(Cy,e)}}function Ey(t,e,n){t==="focusin"?(od(),ss=e,xs=n,ss.attachEvent("onpropertychange",Eh)):t==="focusout"&&od()}function Ty(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ao(xs)}function by(t,e){if(t==="click")return Ao(e)}function Ry(t,e){if(t==="input"||t==="change")return Ao(e)}function Py(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:Py;function ks(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ea.call(e,s)||!ht(t[s],e[s]))return!1}return!0}function ld(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ad(t,e){var n=ld(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ld(n)}}function Th(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Th(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bh(){for(var t=window,e=Wi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wi(t.document)}return e}function Ic(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dy(t){var e=bh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Th(n.ownerDocument.documentElement,n)){if(r!==null&&Ic(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ad(n,i);var o=ad(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var My=jt&&"documentMode"in document&&11>=document.documentMode,Xn=null,xa=null,is=null,ka=!1;function cd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ka||Xn==null||Xn!==Wi(r)||(r=Xn,"selectionStart"in r&&Ic(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),is&&ks(is,r)||(is=r,r=Zi(xa,"onSelect"),0<r.length&&(e=new Dc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xn)))}function ci(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zn={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionend:ci("Transition","TransitionEnd")},Cl={},Rh={};jt&&(Rh=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function Oo(t){if(Cl[t])return Cl[t];if(!Zn[t])return t;var e=Zn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rh)return Cl[t]=e[n];return t}var Ph=Oo("animationend"),Dh=Oo("animationiteration"),Mh=Oo("animationstart"),Nh=Oo("transitionend"),Ih=new Map,ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(t,e){Ih.set(t,e),On(e,[t])}for(var wl=0;wl<ud.length;wl++){var El=ud[wl],Ny=El.toLowerCase(),Iy=El[0].toUpperCase()+El.slice(1);pn(Ny,"on"+Iy)}pn(Ph,"onAnimationEnd");pn(Dh,"onAnimationIteration");pn(Mh,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(Nh,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jy=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function dd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N0(r,e,void 0,t),t.currentTarget=null}function jh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;dd(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;dd(s,l,c),i=a}}}if(Yi)throw t=ga,Yi=!1,ga=null,t}function Y(t,e){var n=e[Ea];n===void 0&&(n=e[Ea]=new Set);var r=t+"__bubble";n.has(r)||(Lh(e,t,2,!1),n.add(r))}function Tl(t,e,n){var r=0;e&&(r|=4),Lh(n,t,r,e)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Ss(t){if(!t[ui]){t[ui]=!0,Bf.forEach(function(n){n!=="selectionchange"&&(jy.has(n)||Tl(n,!1,t),Tl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ui]||(e[ui]=!0,Tl("selectionchange",!1,e))}}function Lh(t,e,n,r){switch(vh(e)){case 1:var s=Q0;break;case 4:s=J0;break;default:s=Rc}n=s.bind(null,e,n,t),s=void 0,!pa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Cn(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}sh(function(){var c=i,u=wc(n),d=[];e:{var f=Ih.get(t);if(f!==void 0){var p=Dc,m=t;switch(t){case"keypress":if(Ti(n)===0)break e;case"keydown":case"keyup":p=uy;break;case"focusin":m="focus",p=kl;break;case"focusout":m="blur",p=kl;break;case"beforeblur":case"afterblur":p=kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=hy;break;case Ph:case Dh:case Mh:p=ty;break;case Nh:p=gy;break;case"scroll":p=K0;break;case"wheel":p=yy;break;case"copy":case"cut":case"paste":p=ry;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=td}var x=(e&4)!==0,w=!x&&t==="scroll",v=x?f!==null?f+"Capture":null:f;x=[];for(var g=c,y;g!==null;){y=g;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,v!==null&&(k=gs(g,v),k!=null&&x.push(_s(g,k,y)))),w)break;g=g.return}0<x.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==fa&&(m=n.relatedTarget||n.fromElement)&&(Cn(m)||m[Lt]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Cn(m):null,m!==null&&(w=Fn(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(x=qu,k="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=td,k="onPointerLeave",v="onPointerEnter",g="pointer"),w=p==null?f:qn(p),y=m==null?f:qn(m),f=new x(k,g+"leave",p,n,u),f.target=w,f.relatedTarget=y,k=null,Cn(u)===c&&(x=new x(v,g+"enter",m,n,u),x.target=y,x.relatedTarget=w,k=x),w=k,p&&m)t:{for(x=p,v=m,g=0,y=x;y;y=Wn(y))g++;for(y=0,k=v;k;k=Wn(k))y++;for(;0<g-y;)x=Wn(x),g--;for(;0<y-g;)v=Wn(v),y--;for(;g--;){if(x===v||v!==null&&x===v.alternate)break t;x=Wn(x),v=Wn(v)}x=null}else x=null;p!==null&&fd(d,f,p,x,!1),m!==null&&w!==null&&fd(d,w,m,x,!0)}}e:{if(f=c?qn(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=wy;else if(sd(f))if(wh)C=Ry;else{C=Ty;var R=Ey}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=by);if(C&&(C=C(t,c))){Ch(d,C,n,u);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&la(f,"number",f.value)}switch(R=c?qn(c):window,t){case"focusin":(sd(R)||R.contentEditable==="true")&&(Xn=R,xa=c,is=null);break;case"focusout":is=xa=Xn=null;break;case"mousedown":ka=!0;break;case"contextmenu":case"mouseup":case"dragend":ka=!1,cd(d,n,u);break;case"selectionchange":if(My)break;case"keydown":case"keyup":cd(d,n,u)}var T;if(Nc)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?Sh(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(kh&&n.locale!=="ko"&&(Kn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Kn&&(T=xh()):(Kt=u,Pc="value"in Kt?Kt.value:Kt.textContent,Kn=!0)),R=Zi(c,b),0<R.length&&(b=new ed(b,t,null,n,u),d.push({event:b,listeners:R}),T?b.data=T:(T=_h(n),T!==null&&(b.data=T)))),(T=xy?ky(t,n):Sy(t,n))&&(c=Zi(c,"onBeforeInput"),0<c.length&&(u=new ed("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}jh(d,e)})}function _s(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zi(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gs(t,n),i!=null&&r.unshift(_s(t,i,s)),i=gs(t,e),i!=null&&r.push(_s(t,i,s))),t=t.return}return r}function Wn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fd(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=gs(n,i),a!=null&&o.unshift(_s(n,a,l))):s||(a=gs(n,i),a!=null&&o.push(_s(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ly=/\r\n?/g,Ay=/\u0000|\uFFFD/g;function hd(t){return(typeof t=="string"?t:""+t).replace(Ly,`
`).replace(Ay,"")}function di(t,e,n){if(e=hd(e),hd(t)!==e&&n)throw Error(_(425))}function qi(){}var Sa=null,_a=null;function Ca(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wa=typeof setTimeout=="function"?setTimeout:void 0,Oy=typeof clearTimeout=="function"?clearTimeout:void 0,pd=typeof Promise=="function"?Promise:void 0,Fy=typeof queueMicrotask=="function"?queueMicrotask:typeof pd<"u"?function(t){return pd.resolve(null).then(t).catch($y)}:wa;function $y(t){setTimeout(function(){throw t})}function Rl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vs(e)}function rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jr=Math.random().toString(36).slice(2),yt="__reactFiber$"+jr,Cs="__reactProps$"+jr,Lt="__reactContainer$"+jr,Ea="__reactEvents$"+jr,zy="__reactListeners$"+jr,Uy="__reactHandles$"+jr;function Cn(t){var e=t[yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lt]||n[yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gd(t);t!==null;){if(n=t[yt])return n;t=gd(t)}return e}t=n,n=t.parentNode}return null}function Hs(t){return t=t[yt]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_(33))}function Fo(t){return t[Cs]||null}var Ta=[],er=-1;function gn(t){return{current:t}}function Q(t){0>er||(t.current=Ta[er],Ta[er]=null,er--)}function G(t,e){er++,Ta[er]=t.current,t.current=e}var dn={},Te=gn(dn),Oe=gn(!1),Pn=dn;function xr(t,e){var n=t.type.contextTypes;if(!n)return dn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fe(t){return t=t.childContextTypes,t!=null}function eo(){Q(Oe),Q(Te)}function md(t,e,n){if(Te.current!==dn)throw Error(_(168));G(Te,e),G(Oe,n)}function Ah(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(_(108,E0(t)||"Unknown",s));return q({},n,r)}function to(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,Pn=Te.current,G(Te,t),G(Oe,Oe.current),!0}function yd(t,e,n){var r=t.stateNode;if(!r)throw Error(_(169));n?(t=Ah(t,e,Pn),r.__reactInternalMemoizedMergedChildContext=t,Q(Oe),Q(Te),G(Te,t)):Q(Oe),G(Oe,n)}var Pt=null,$o=!1,Pl=!1;function Oh(t){Pt===null?Pt=[t]:Pt.push(t)}function By(t){$o=!0,Oh(t)}function mn(){if(!Pl&&Pt!==null){Pl=!0;var t=0,e=V;try{var n=Pt;for(V=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pt=null,$o=!1}catch(s){throw Pt!==null&&(Pt=Pt.slice(t+1)),ah(Ec,mn),s}finally{V=e,Pl=!1}}return null}var tr=[],nr=0,no=null,ro=0,Ke=[],Xe=0,Dn=null,Dt=1,Mt="";function kn(t,e){tr[nr++]=ro,tr[nr++]=no,no=t,ro=e}function Fh(t,e,n){Ke[Xe++]=Dt,Ke[Xe++]=Mt,Ke[Xe++]=Dn,Dn=t;var r=Dt;t=Mt;var s=32-ct(r)-1;r&=~(1<<s),n+=1;var i=32-ct(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dt=1<<32-ct(e)+s|n<<s|r,Mt=i+t}else Dt=1<<i|n<<s|r,Mt=t}function jc(t){t.return!==null&&(kn(t,1),Fh(t,1,0))}function Lc(t){for(;t===no;)no=tr[--nr],tr[nr]=null,ro=tr[--nr],tr[nr]=null;for(;t===Dn;)Dn=Ke[--Xe],Ke[Xe]=null,Mt=Ke[--Xe],Ke[Xe]=null,Dt=Ke[--Xe],Ke[Xe]=null}var He=null,Ve=null,K=!1,at=null;function $h(t,e){var n=et(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,He=t,Ve=rn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,He=t,Ve=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dn!==null?{id:Dt,overflow:Mt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=et(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,He=t,Ve=null,!0):!1;default:return!1}}function ba(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ra(t){if(K){var e=Ve;if(e){var n=e;if(!vd(t,e)){if(ba(t))throw Error(_(418));e=rn(n.nextSibling);var r=He;e&&vd(t,e)?$h(r,n):(t.flags=t.flags&-4097|2,K=!1,He=t)}}else{if(ba(t))throw Error(_(418));t.flags=t.flags&-4097|2,K=!1,He=t}}}function xd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;He=t}function fi(t){if(t!==He)return!1;if(!K)return xd(t),K=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ca(t.type,t.memoizedProps)),e&&(e=Ve)){if(ba(t))throw zh(),Error(_(418));for(;e;)$h(t,e),e=rn(e.nextSibling)}if(xd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ve=rn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ve=null}}else Ve=He?rn(t.stateNode.nextSibling):null;return!0}function zh(){for(var t=Ve;t;)t=rn(t.nextSibling)}function kr(){Ve=He=null,K=!1}function Ac(t){at===null?at=[t]:at.push(t)}var Vy=Ft.ReactCurrentBatchConfig;function Gr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,t))}return t}function hi(t,e){throw t=Object.prototype.toString.call(e),Error(_(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kd(t){var e=t._init;return e(t._payload)}function Uh(t){function e(v,g){if(t){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=an(v,g),v.index=0,v.sibling=null,v}function i(v,g,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,g,y,k){return g===null||g.tag!==6?(g=Al(y,v.mode,k),g.return=v,g):(g=s(g,y),g.return=v,g)}function a(v,g,y,k){var C=y.type;return C===Jn?u(v,g,y.props.children,k,y.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vt&&kd(C)===g.type)?(k=s(g,y.props),k.ref=Gr(v,g,y),k.return=v,k):(k=Ii(y.type,y.key,y.props,null,v.mode,k),k.ref=Gr(v,g,y),k.return=v,k)}function c(v,g,y,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Ol(y,v.mode,k),g.return=v,g):(g=s(g,y.children||[]),g.return=v,g)}function u(v,g,y,k,C){return g===null||g.tag!==7?(g=bn(y,v.mode,k,C),g.return=v,g):(g=s(g,y),g.return=v,g)}function d(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Al(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ni:return y=Ii(g.type,g.key,g.props,null,v.mode,y),y.ref=Gr(v,null,g),y.return=v,y;case Qn:return g=Ol(g,v.mode,y),g.return=v,g;case Vt:var k=g._init;return d(v,k(g._payload),y)}if(Xr(g)||Ur(g))return g=bn(g,v.mode,y,null),g.return=v,g;hi(v,g)}return null}function f(v,g,y,k){var C=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:l(v,g,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ni:return y.key===C?a(v,g,y,k):null;case Qn:return y.key===C?c(v,g,y,k):null;case Vt:return C=y._init,f(v,g,C(y._payload),k)}if(Xr(y)||Ur(y))return C!==null?null:u(v,g,y,k,null);hi(v,y)}return null}function p(v,g,y,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(y)||null,l(g,v,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ni:return v=v.get(k.key===null?y:k.key)||null,a(g,v,k,C);case Qn:return v=v.get(k.key===null?y:k.key)||null,c(g,v,k,C);case Vt:var R=k._init;return p(v,g,y,R(k._payload),C)}if(Xr(k)||Ur(k))return v=v.get(y)||null,u(g,v,k,C,null);hi(g,k)}return null}function m(v,g,y,k){for(var C=null,R=null,T=g,b=g=0,U=null;T!==null&&b<y.length;b++){T.index>b?(U=T,T=null):U=T.sibling;var j=f(v,T,y[b],k);if(j===null){T===null&&(T=U);break}t&&T&&j.alternate===null&&e(v,T),g=i(j,g,b),R===null?C=j:R.sibling=j,R=j,T=U}if(b===y.length)return n(v,T),K&&kn(v,b),C;if(T===null){for(;b<y.length;b++)T=d(v,y[b],k),T!==null&&(g=i(T,g,b),R===null?C=T:R.sibling=T,R=T);return K&&kn(v,b),C}for(T=r(v,T);b<y.length;b++)U=p(T,v,b,y[b],k),U!==null&&(t&&U.alternate!==null&&T.delete(U.key===null?b:U.key),g=i(U,g,b),R===null?C=U:R.sibling=U,R=U);return t&&T.forEach(function(S){return e(v,S)}),K&&kn(v,b),C}function x(v,g,y,k){var C=Ur(y);if(typeof C!="function")throw Error(_(150));if(y=C.call(y),y==null)throw Error(_(151));for(var R=C=null,T=g,b=g=0,U=null,j=y.next();T!==null&&!j.done;b++,j=y.next()){T.index>b?(U=T,T=null):U=T.sibling;var S=f(v,T,j.value,k);if(S===null){T===null&&(T=U);break}t&&T&&S.alternate===null&&e(v,T),g=i(S,g,b),R===null?C=S:R.sibling=S,R=S,T=U}if(j.done)return n(v,T),K&&kn(v,b),C;if(T===null){for(;!j.done;b++,j=y.next())j=d(v,j.value,k),j!==null&&(g=i(j,g,b),R===null?C=j:R.sibling=j,R=j);return K&&kn(v,b),C}for(T=r(v,T);!j.done;b++,j=y.next())j=p(T,v,b,j.value,k),j!==null&&(t&&j.alternate!==null&&T.delete(j.key===null?b:j.key),g=i(j,g,b),R===null?C=j:R.sibling=j,R=j);return t&&T.forEach(function(M){return e(v,M)}),K&&kn(v,b),C}function w(v,g,y,k){if(typeof y=="object"&&y!==null&&y.type===Jn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ni:e:{for(var C=y.key,R=g;R!==null;){if(R.key===C){if(C=y.type,C===Jn){if(R.tag===7){n(v,R.sibling),g=s(R,y.props.children),g.return=v,v=g;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vt&&kd(C)===R.type){n(v,R.sibling),g=s(R,y.props),g.ref=Gr(v,R,y),g.return=v,v=g;break e}n(v,R);break}else e(v,R);R=R.sibling}y.type===Jn?(g=bn(y.props.children,v.mode,k,y.key),g.return=v,v=g):(k=Ii(y.type,y.key,y.props,null,v.mode,k),k.ref=Gr(v,g,y),k.return=v,v=k)}return o(v);case Qn:e:{for(R=y.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),g=s(g,y.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Ol(y,v.mode,k),g.return=v,v=g}return o(v);case Vt:return R=y._init,w(v,g,R(y._payload),k)}if(Xr(y))return m(v,g,y,k);if(Ur(y))return x(v,g,y,k);hi(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,y),g.return=v,v=g):(n(v,g),g=Al(y,v.mode,k),g.return=v,v=g),o(v)):n(v,g)}return w}var Sr=Uh(!0),Bh=Uh(!1),so=gn(null),io=null,rr=null,Oc=null;function Fc(){Oc=rr=io=null}function $c(t){var e=so.current;Q(so),t._currentValue=e}function Pa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ur(t,e){io=t,Oc=rr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function nt(t){var e=t._currentValue;if(Oc!==t)if(t={context:t,memoizedValue:e,next:null},rr===null){if(io===null)throw Error(_(308));rr=t,io.dependencies={lanes:0,firstContext:t}}else rr=rr.next=t;return e}var wn=null;function zc(t){wn===null?wn=[t]:wn.push(t)}function Vh(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,zc(e)):(n.next=s.next,s.next=n),e.interleaved=n,At(t,r)}function At(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ht=!1;function Uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,z&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,At(t,n)}return s=r.interleaved,s===null?(e.next=e,zc(r)):(e.next=s.next,s.next=e),r.interleaved=e,At(t,n)}function bi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tc(t,n)}}function Sd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oo(t,e,n,r){var s=t.updateQueue;Ht=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,u=c=a=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,x=l;switch(f=e,p=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=q({},d,f);break e;case 2:Ht=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=p,a=d):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(u===null&&(a=d),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Nn|=o,t.lanes=o,t.memoizedState=d}}function _d(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_(191,s));s.call(r)}}}var Ws={},kt=gn(Ws),ws=gn(Ws),Es=gn(Ws);function En(t){if(t===Ws)throw Error(_(174));return t}function Bc(t,e){switch(G(Es,e),G(ws,t),G(kt,Ws),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ca(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ca(e,t)}Q(kt),G(kt,e)}function _r(){Q(kt),Q(ws),Q(Es)}function Wh(t){En(Es.current);var e=En(kt.current),n=ca(e,t.type);e!==n&&(G(ws,t),G(kt,n))}function Vc(t){ws.current===t&&(Q(kt),Q(ws))}var X=gn(0);function lo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dl=[];function Hc(){for(var t=0;t<Dl.length;t++)Dl[t]._workInProgressVersionPrimary=null;Dl.length=0}var Ri=Ft.ReactCurrentDispatcher,Ml=Ft.ReactCurrentBatchConfig,Mn=0,Z=null,ie=null,de=null,ao=!1,os=!1,Ts=0,Hy=0;function Se(){throw Error(_(321))}function Wc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function Gc(t,e,n,r,s,i){if(Mn=i,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ri.current=t===null||t.memoizedState===null?Qy:Jy,t=n(r,s),os){i=0;do{if(os=!1,Ts=0,25<=i)throw Error(_(301));i+=1,de=ie=null,e.updateQueue=null,Ri.current=Ky,t=n(r,s)}while(os)}if(Ri.current=co,e=ie!==null&&ie.next!==null,Mn=0,de=ie=Z=null,ao=!1,e)throw Error(_(300));return t}function Yc(){var t=Ts!==0;return Ts=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?Z.memoizedState=de=t:de=de.next=t,de}function rt(){if(ie===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=ie.next;var e=de===null?Z.memoizedState:de.next;if(e!==null)de=e,ie=t;else{if(t===null)throw Error(_(310));ie=t,t={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},de===null?Z.memoizedState=de=t:de=de.next=t}return de}function bs(t,e){return typeof e=="function"?e(t):e}function Nl(t){var e=rt(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=ie,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var u=c.lane;if((Mn&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Z.lanes|=u,Nn|=u}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,ht(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Z.lanes|=i,Nn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Il(t){var e=rt(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ht(i,e.memoizedState)||(Ae=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Gh(){}function Yh(t,e){var n=Z,r=rt(),s=e(),i=!ht(r.memoizedState,s);if(i&&(r.memoizedState=s,Ae=!0),r=r.queue,Qc(Kh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,Rs(9,Jh.bind(null,n,r,s,e),void 0,null),he===null)throw Error(_(349));Mn&30||Qh(n,e,s)}return s}function Qh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Jh(t,e,n,r){e.value=n,e.getSnapshot=r,Xh(e)&&Zh(t)}function Kh(t,e,n){return n(function(){Xh(e)&&Zh(t)})}function Xh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function Zh(t){var e=At(t,1);e!==null&&ut(e,t,1,-1)}function Cd(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},e.queue=t,t=t.dispatch=Yy.bind(null,Z,t),[e.memoizedState,t]}function Rs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qh(){return rt().memoizedState}function Pi(t,e,n,r){var s=mt();Z.flags|=t,s.memoizedState=Rs(1|e,n,void 0,r===void 0?null:r)}function zo(t,e,n,r){var s=rt();r=r===void 0?null:r;var i=void 0;if(ie!==null){var o=ie.memoizedState;if(i=o.destroy,r!==null&&Wc(r,o.deps)){s.memoizedState=Rs(e,n,i,r);return}}Z.flags|=t,s.memoizedState=Rs(1|e,n,i,r)}function wd(t,e){return Pi(8390656,8,t,e)}function Qc(t,e){return zo(2048,8,t,e)}function ep(t,e){return zo(4,2,t,e)}function tp(t,e){return zo(4,4,t,e)}function np(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rp(t,e,n){return n=n!=null?n.concat([t]):null,zo(4,4,np.bind(null,e,t),n)}function Jc(){}function sp(t,e){var n=rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ip(t,e){var n=rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function op(t,e,n){return Mn&21?(ht(n,e)||(n=dh(),Z.lanes|=n,Nn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=n)}function Wy(t,e){var n=V;V=n!==0&&4>n?n:4,t(!0);var r=Ml.transition;Ml.transition={};try{t(!1),e()}finally{V=n,Ml.transition=r}}function lp(){return rt().memoizedState}function Gy(t,e,n){var r=ln(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ap(t))cp(e,n);else if(n=Vh(t,e,n,r),n!==null){var s=De();ut(n,t,r,s),up(n,e,r)}}function Yy(t,e,n){var r=ln(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ap(t))cp(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,ht(l,o)){var a=e.interleaved;a===null?(s.next=s,zc(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=Vh(t,e,s,r),n!==null&&(s=De(),ut(n,t,r,s),up(n,e,r))}}function ap(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function cp(t,e){os=ao=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function up(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tc(t,n)}}var co={readContext:nt,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},Qy={readContext:nt,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:nt,useEffect:wd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pi(4194308,4,np.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pi(4,2,t,e)},useMemo:function(t,e){var n=mt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gy.bind(null,Z,t),[r.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:Cd,useDebugValue:Jc,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=Cd(!1),e=t[0];return t=Wy.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Z,s=mt();if(K){if(n===void 0)throw Error(_(407));n=n()}else{if(n=e(),he===null)throw Error(_(349));Mn&30||Qh(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,wd(Kh.bind(null,r,i,t),[t]),r.flags|=2048,Rs(9,Jh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mt(),e=he.identifierPrefix;if(K){var n=Mt,r=Dt;n=(r&~(1<<32-ct(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ts++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Jy={readContext:nt,useCallback:sp,useContext:nt,useEffect:Qc,useImperativeHandle:rp,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:ip,useReducer:Nl,useRef:qh,useState:function(){return Nl(bs)},useDebugValue:Jc,useDeferredValue:function(t){var e=rt();return op(e,ie.memoizedState,t)},useTransition:function(){var t=Nl(bs)[0],e=rt().memoizedState;return[t,e]},useMutableSource:Gh,useSyncExternalStore:Yh,useId:lp,unstable_isNewReconciler:!1},Ky={readContext:nt,useCallback:sp,useContext:nt,useEffect:Qc,useImperativeHandle:rp,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:ip,useReducer:Il,useRef:qh,useState:function(){return Il(bs)},useDebugValue:Jc,useDeferredValue:function(t){var e=rt();return ie===null?e.memoizedState=t:op(e,ie.memoizedState,t)},useTransition:function(){var t=Il(bs)[0],e=rt().memoizedState;return[t,e]},useMutableSource:Gh,useSyncExternalStore:Yh,useId:lp,unstable_isNewReconciler:!1};function ot(t,e){if(t&&t.defaultProps){e=q({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Da(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:q({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uo={isMounted:function(t){return(t=t._reactInternals)?Fn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=De(),s=ln(t),i=Nt(r,s);i.payload=e,n!=null&&(i.callback=n),e=sn(t,i,s),e!==null&&(ut(e,t,s,r),bi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=De(),s=ln(t),i=Nt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=sn(t,i,s),e!==null&&(ut(e,t,s,r),bi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=De(),r=ln(t),s=Nt(n,r);s.tag=2,e!=null&&(s.callback=e),e=sn(t,s,r),e!==null&&(ut(e,t,r,n),bi(e,t,r))}};function Ed(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ks(n,r)||!ks(s,i):!0}function dp(t,e,n){var r=!1,s=dn,i=e.contextType;return typeof i=="object"&&i!==null?i=nt(i):(s=Fe(e)?Pn:Te.current,r=e.contextTypes,i=(r=r!=null)?xr(t,s):dn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Td(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uo.enqueueReplaceState(e,e.state,null)}function Ma(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Uc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nt(i):(i=Fe(e)?Pn:Te.current,s.context=xr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Da(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Uo.enqueueReplaceState(s,s.state,null),oo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,e){try{var n="",r=e;do n+=w0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Na(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xy=typeof WeakMap=="function"?WeakMap:Map;function fp(t,e,n){n=Nt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fo||(fo=!0,Ba=r),Na(t,e)},n}function hp(t,e,n){n=Nt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Na(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Na(t,e),typeof r!="function"&&(on===null?on=new Set([this]):on.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xy;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dv.bind(null,t,e,n),e.then(t,t))}function Rd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pd(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nt(-1,1),e.tag=2,sn(n,e,1))),n.lanes|=1),t)}var Zy=Ft.ReactCurrentOwner,Ae=!1;function Pe(t,e,n,r){e.child=t===null?Bh(e,null,n,r):Sr(e,t.child,n,r)}function Dd(t,e,n,r,s){n=n.render;var i=e.ref;return ur(e,s),r=Gc(t,e,n,r,i,s),n=Yc(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ot(t,e,s)):(K&&n&&jc(e),e.flags|=1,Pe(t,e,r,s),e.child)}function Md(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ru(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pp(t,e,i,r,s)):(t=Ii(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ks,n(o,r)&&t.ref===e.ref)return Ot(t,e,s)}return e.flags|=1,t=an(i,r),t.ref=e.ref,t.return=e,e.child=t}function pp(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ks(i,r)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Ot(t,e,s)}return Ia(t,e,n,r,s)}function gp(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ir,Be),Be|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(ir,Be),Be|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,G(ir,Be),Be|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,G(ir,Be),Be|=r;return Pe(t,e,s,n),e.child}function mp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ia(t,e,n,r,s){var i=Fe(n)?Pn:Te.current;return i=xr(e,i),ur(e,s),n=Gc(t,e,n,r,i,s),r=Yc(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ot(t,e,s)):(K&&r&&jc(e),e.flags|=1,Pe(t,e,n,s),e.child)}function Nd(t,e,n,r,s){if(Fe(n)){var i=!0;to(e)}else i=!1;if(ur(e,s),e.stateNode===null)Di(t,e),dp(e,n,r),Ma(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nt(c):(c=Fe(n)?Pn:Te.current,c=xr(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Td(e,o,r,c),Ht=!1;var f=e.memoizedState;o.state=f,oo(e,r,o,s),a=e.memoizedState,l!==r||f!==a||Oe.current||Ht?(typeof u=="function"&&(Da(e,n,u,r),a=e.memoizedState),(l=Ht||Ed(e,n,l,r,f,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:ot(e.type,l),o.props=c,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=nt(a):(a=Fe(n)?Pn:Te.current,a=xr(e,a));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&Td(e,o,r,a),Ht=!1,f=e.memoizedState,o.state=f,oo(e,r,o,s);var m=e.memoizedState;l!==d||f!==m||Oe.current||Ht?(typeof p=="function"&&(Da(e,n,p,r),m=e.memoizedState),(c=Ht||Ed(e,n,c,r,f,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ja(t,e,n,r,i,s)}function ja(t,e,n,r,s,i){mp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&yd(e,n,!1),Ot(t,e,i);r=e.stateNode,Zy.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Sr(e,t.child,null,i),e.child=Sr(e,null,l,i)):Pe(t,e,l,i),e.memoizedState=r.state,s&&yd(e,n,!0),e.child}function yp(t){var e=t.stateNode;e.pendingContext?md(t,e.pendingContext,e.pendingContext!==e.context):e.context&&md(t,e.context,!1),Bc(t,e.containerInfo)}function Id(t,e,n,r,s){return kr(),Ac(s),e.flags|=256,Pe(t,e,n,r),e.child}var La={dehydrated:null,treeContext:null,retryLane:0};function Aa(t){return{baseLanes:t,cachePool:null,transitions:null}}function vp(t,e,n){var r=e.pendingProps,s=X.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),G(X,s&1),t===null)return Ra(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ho(o,r,0,null),t=bn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Aa(n),e.memoizedState=La,t):Kc(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return qy(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=an(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=an(l,i):(i=bn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Aa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=La,r}return i=t.child,t=i.sibling,r=an(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kc(t,e){return e=Ho({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pi(t,e,n,r){return r!==null&&Ac(r),Sr(e,t.child,null,n),t=Kc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qy(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jl(Error(_(422))),pi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ho({mode:"visible",children:r.children},s,0,null),i=bn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Sr(e,t.child,null,o),e.child.memoizedState=Aa(o),e.memoizedState=La,i);if(!(e.mode&1))return pi(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(_(419)),r=jl(i,r,void 0),pi(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ae||l){if(r=he,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,At(t,s),ut(r,t,s,-1))}return nu(),r=jl(Error(_(421))),pi(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ve=rn(s.nextSibling),He=e,K=!0,at=null,t!==null&&(Ke[Xe++]=Dt,Ke[Xe++]=Mt,Ke[Xe++]=Dn,Dt=t.id,Mt=t.overflow,Dn=e),e=Kc(e,r.children),e.flags|=4096,e)}function jd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pa(t.return,e,n)}function Ll(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xp(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pe(t,e,r.children,n),r=X.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jd(t,n,e);else if(t.tag===19)jd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(X,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ll(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ll(e,!0,n,null,i);break;case"together":Ll(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Di(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_(153));if(e.child!==null){for(t=e.child,n=an(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=an(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ev(t,e,n){switch(e.tag){case 3:yp(e),kr();break;case 5:Wh(e);break;case 1:Fe(e.type)&&to(e);break;case 4:Bc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;G(so,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(X,X.current&1),e.flags|=128,null):n&e.child.childLanes?vp(t,e,n):(G(X,X.current&1),t=Ot(t,e,n),t!==null?t.sibling:null);G(X,X.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xp(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),G(X,X.current),r)break;return null;case 22:case 23:return e.lanes=0,gp(t,e,n)}return Ot(t,e,n)}var kp,Oa,Sp,_p;kp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oa=function(){};Sp=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,En(kt.current);var i=null;switch(n){case"input":s=ia(t,s),r=ia(t,r),i=[];break;case"select":s=q({},s,{value:void 0}),r=q({},r,{value:void 0}),i=[];break;case"textarea":s=aa(t,s),r=aa(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qi)}ua(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hs.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hs.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Y("scroll",t),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};_p=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yr(t,e){if(!K)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tv(t,e,n){var r=e.pendingProps;switch(Lc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return Fe(e.type)&&eo(),_e(e),null;case 3:return r=e.stateNode,_r(),Q(Oe),Q(Te),Hc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,at!==null&&(Wa(at),at=null))),Oa(t,e),_e(e),null;case 5:Vc(e);var s=En(Es.current);if(n=e.type,t!==null&&e.stateNode!=null)Sp(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_(166));return _e(e),null}if(t=En(kt.current),fi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yt]=e,r[Cs]=i,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(s=0;s<qr.length;s++)Y(qr[s],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Vu(r,i),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Y("invalid",r);break;case"textarea":Wu(r,i),Y("invalid",r)}ua(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&di(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&di(r.textContent,l,t),s=["children",""+l]):hs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",r)}switch(n){case"input":ri(r),Hu(r,i,!0);break;case"textarea":ri(r),Gu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qi)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Kf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yt]=e,t[Cs]=r,kp(t,e,!1,!1),e.stateNode=t;e:{switch(o=da(n,r),n){case"dialog":Y("cancel",t),Y("close",t),s=r;break;case"iframe":case"object":case"embed":Y("load",t),s=r;break;case"video":case"audio":for(s=0;s<qr.length;s++)Y(qr[s],t);s=r;break;case"source":Y("error",t),s=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),s=r;break;case"details":Y("toggle",t),s=r;break;case"input":Vu(t,r),s=ia(t,r),Y("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=q({},r,{value:void 0}),Y("invalid",t);break;case"textarea":Wu(t,r),s=aa(t,r),Y("invalid",t);break;default:s=r}ua(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?qf(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xf(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ps(t,a):typeof a=="number"&&ps(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hs.hasOwnProperty(i)?a!=null&&i==="onScroll"&&Y("scroll",t):a!=null&&kc(t,i,a,o))}switch(n){case"input":ri(t),Hu(t,r,!1);break;case"textarea":ri(t),Gu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+un(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?or(t,!!r.multiple,i,!1):r.defaultValue!=null&&or(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)_p(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_(166));if(n=En(Es.current),En(kt.current),fi(e)){if(r=e.stateNode,n=e.memoizedProps,r[yt]=e,(i=r.nodeValue!==n)&&(t=He,t!==null))switch(t.tag){case 3:di(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&di(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yt]=e,e.stateNode=r}return _e(e),null;case 13:if(Q(X),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(K&&Ve!==null&&e.mode&1&&!(e.flags&128))zh(),kr(),e.flags|=98560,i=!1;else if(i=fi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(_(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_(317));i[yt]=e}else kr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),i=!1}else at!==null&&(Wa(at),at=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?oe===0&&(oe=3):nu())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return _r(),Oa(t,e),t===null&&Ss(e.stateNode.containerInfo),_e(e),null;case 10:return $c(e.type._context),_e(e),null;case 17:return Fe(e.type)&&eo(),_e(e),null;case 19:if(Q(X),i=e.memoizedState,i===null)return _e(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Yr(i,!1);else{if(oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lo(t),o!==null){for(e.flags|=128,Yr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(X,X.current&1|2),e.child}t=t.sibling}i.tail!==null&&te()>wr&&(e.flags|=128,r=!0,Yr(i,!1),e.lanes=4194304)}else{if(!r)if(t=lo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!K)return _e(e),null}else 2*te()-i.renderingStartTime>wr&&n!==1073741824&&(e.flags|=128,r=!0,Yr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=te(),e.sibling=null,n=X.current,G(X,r?n&1|2:n&1),e):(_e(e),null);case 22:case 23:return tu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Be&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(_(156,e.tag))}function nv(t,e){switch(Lc(e),e.tag){case 1:return Fe(e.type)&&eo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _r(),Q(Oe),Q(Te),Hc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vc(e),null;case 13:if(Q(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_(340));kr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(X),null;case 4:return _r(),null;case 10:return $c(e.type._context),null;case 22:case 23:return tu(),null;case 24:return null;default:return null}}var gi=!1,we=!1,rv=typeof WeakSet=="function"?WeakSet:Set,P=null;function sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ee(t,e,r)}else n.current=null}function Fa(t,e,n){try{n()}catch(r){ee(t,e,r)}}var Ld=!1;function sv(t,e){if(Sa=Ki,t=bh(),Ic(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===s&&(l=o),f===i&&++u===r&&(a=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(_a={focusedElem:t,selectionRange:n},Ki=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,w=m.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:ot(e.type,x),w);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(k){ee(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return m=Ld,Ld=!1,m}function ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fa(e,n,i)}s=s.next}while(s!==r)}}function Bo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $a(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Cp(t){var e=t.alternate;e!==null&&(t.alternate=null,Cp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yt],delete e[Cs],delete e[Ea],delete e[zy],delete e[Uy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wp(t){return t.tag===5||t.tag===3||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function za(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qi));else if(r!==4&&(t=t.child,t!==null))for(za(t,e,n),t=t.sibling;t!==null;)za(t,e,n),t=t.sibling}function Ua(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ua(t,e,n),t=t.sibling;t!==null;)Ua(t,e,n),t=t.sibling}var me=null,lt=!1;function Bt(t,e,n){for(n=n.child;n!==null;)Ep(t,e,n),n=n.sibling}function Ep(t,e,n){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(jo,n)}catch{}switch(n.tag){case 5:we||sr(n,e);case 6:var r=me,s=lt;me=null,Bt(t,e,n),me=r,lt=s,me!==null&&(lt?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(lt?(t=me,n=n.stateNode,t.nodeType===8?Rl(t.parentNode,n):t.nodeType===1&&Rl(t,n),vs(t)):Rl(me,n.stateNode));break;case 4:r=me,s=lt,me=n.stateNode.containerInfo,lt=!0,Bt(t,e,n),me=r,lt=s;break;case 0:case 11:case 14:case 15:if(!we&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fa(n,e,o),s=s.next}while(s!==r)}Bt(t,e,n);break;case 1:if(!we&&(sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ee(n,e,l)}Bt(t,e,n);break;case 21:Bt(t,e,n);break;case 22:n.mode&1?(we=(r=we)||n.memoizedState!==null,Bt(t,e,n),we=r):Bt(t,e,n);break;default:Bt(t,e,n)}}function Od(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rv),e.forEach(function(r){var s=hv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function it(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,lt=!1;break e;case 3:me=l.stateNode.containerInfo,lt=!0;break e;case 4:me=l.stateNode.containerInfo,lt=!0;break e}l=l.return}if(me===null)throw Error(_(160));Ep(i,o,s),me=null,lt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){ee(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tp(e,t),e=e.sibling}function Tp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(it(e,t),pt(t),r&4){try{ls(3,t,t.return),Bo(3,t)}catch(x){ee(t,t.return,x)}try{ls(5,t,t.return)}catch(x){ee(t,t.return,x)}}break;case 1:it(e,t),pt(t),r&512&&n!==null&&sr(n,n.return);break;case 5:if(it(e,t),pt(t),r&512&&n!==null&&sr(n,n.return),t.flags&32){var s=t.stateNode;try{ps(s,"")}catch(x){ee(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qf(s,i),da(l,o);var c=da(l,i);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?qf(s,d):u==="dangerouslySetInnerHTML"?Xf(s,d):u==="children"?ps(s,d):kc(s,u,d,c)}switch(l){case"input":oa(s,i);break;case"textarea":Jf(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?or(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?or(s,!!i.multiple,i.defaultValue,!0):or(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cs]=i}catch(x){ee(t,t.return,x)}}break;case 6:if(it(e,t),pt(t),r&4){if(t.stateNode===null)throw Error(_(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ee(t,t.return,x)}}break;case 3:if(it(e,t),pt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vs(e.containerInfo)}catch(x){ee(t,t.return,x)}break;case 4:it(e,t),pt(t);break;case 13:it(e,t),pt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qc=te())),r&4&&Od(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(we=(c=we)||u,it(e,t),we=c):it(e,t),pt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(P=t,u=t.child;u!==null;){for(d=P=u;P!==null;){switch(f=P,p=f.child,f.tag){case 0:case 11:case 14:case 15:ls(4,f,f.return);break;case 1:sr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){ee(r,n,x)}}break;case 5:sr(f,f.return);break;case 22:if(f.memoizedState!==null){$d(d);continue}}p!==null?(p.return=f,P=p):$d(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Zf("display",o))}catch(x){ee(t,t.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){ee(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:it(e,t),pt(t),r&4&&Od(t);break;case 21:break;default:it(e,t),pt(t)}}function pt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wp(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ps(s,""),r.flags&=-33);var i=Ad(t);Ua(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ad(t);za(t,l,o);break;default:throw Error(_(161))}}catch(a){ee(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iv(t,e,n){P=t,bp(t)}function bp(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var s=P,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||gi;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||we;l=gi;var c=we;if(gi=o,(we=a)&&!c)for(P=s;P!==null;)o=P,a=o.child,o.tag===22&&o.memoizedState!==null?zd(s):a!==null?(a.return=o,P=a):zd(s);for(;i!==null;)P=i,bp(i),i=i.sibling;P=s,gi=l,we=c}Fd(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,P=i):Fd(t)}}function Fd(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||Bo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!we)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_d(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_d(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&vs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}we||e.flags&512&&$a(e)}catch(f){ee(e,e.return,f)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function $d(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function zd(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bo(4,e)}catch(a){ee(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){ee(e,s,a)}}var i=e.return;try{$a(e)}catch(a){ee(e,i,a)}break;case 5:var o=e.return;try{$a(e)}catch(a){ee(e,o,a)}}}catch(a){ee(e,e.return,a)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var ov=Math.ceil,uo=Ft.ReactCurrentDispatcher,Xc=Ft.ReactCurrentOwner,tt=Ft.ReactCurrentBatchConfig,z=0,he=null,re=null,ye=0,Be=0,ir=gn(0),oe=0,Ps=null,Nn=0,Vo=0,Zc=0,as=null,Le=null,qc=0,wr=1/0,Rt=null,fo=!1,Ba=null,on=null,mi=!1,Xt=null,ho=0,cs=0,Va=null,Mi=-1,Ni=0;function De(){return z&6?te():Mi!==-1?Mi:Mi=te()}function ln(t){return t.mode&1?z&2&&ye!==0?ye&-ye:Vy.transition!==null?(Ni===0&&(Ni=dh()),Ni):(t=V,t!==0||(t=window.event,t=t===void 0?16:vh(t.type)),t):1}function ut(t,e,n,r){if(50<cs)throw cs=0,Va=null,Error(_(185));Bs(t,n,r),(!(z&2)||t!==he)&&(t===he&&(!(z&2)&&(Vo|=n),oe===4&&Yt(t,ye)),$e(t,r),n===1&&z===0&&!(e.mode&1)&&(wr=te()+500,$o&&mn()))}function $e(t,e){var n=t.callbackNode;V0(t,e);var r=Ji(t,t===he?ye:0);if(r===0)n!==null&&Ju(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ju(n),e===1)t.tag===0?By(Ud.bind(null,t)):Oh(Ud.bind(null,t)),Fy(function(){!(z&6)&&mn()}),n=null;else{switch(fh(r)){case 1:n=Ec;break;case 4:n=ch;break;case 16:n=Qi;break;case 536870912:n=uh;break;default:n=Qi}n=Lp(n,Rp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rp(t,e){if(Mi=-1,Ni=0,z&6)throw Error(_(327));var n=t.callbackNode;if(dr()&&t.callbackNode!==n)return null;var r=Ji(t,t===he?ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=po(t,r);else{e=r;var s=z;z|=2;var i=Dp();(he!==t||ye!==e)&&(Rt=null,wr=te()+500,Tn(t,e));do try{cv();break}catch(l){Pp(t,l)}while(1);Fc(),uo.current=i,z=s,re!==null?e=0:(he=null,ye=0,e=oe)}if(e!==0){if(e===2&&(s=ma(t),s!==0&&(r=s,e=Ha(t,s))),e===1)throw n=Ps,Tn(t,0),Yt(t,r),$e(t,te()),n;if(e===6)Yt(t,r);else{if(s=t.current.alternate,!(r&30)&&!lv(s)&&(e=po(t,r),e===2&&(i=ma(t),i!==0&&(r=i,e=Ha(t,i))),e===1))throw n=Ps,Tn(t,0),Yt(t,r),$e(t,te()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(_(345));case 2:Sn(t,Le,Rt);break;case 3:if(Yt(t,r),(r&130023424)===r&&(e=qc+500-te(),10<e)){if(Ji(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){De(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wa(Sn.bind(null,t,Le,Rt),e);break}Sn(t,Le,Rt);break;case 4:if(Yt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ct(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ov(r/1960))-r,10<r){t.timeoutHandle=wa(Sn.bind(null,t,Le,Rt),r);break}Sn(t,Le,Rt);break;case 5:Sn(t,Le,Rt);break;default:throw Error(_(329))}}}return $e(t,te()),t.callbackNode===n?Rp.bind(null,t):null}function Ha(t,e){var n=as;return t.current.memoizedState.isDehydrated&&(Tn(t,e).flags|=256),t=po(t,e),t!==2&&(e=Le,Le=n,e!==null&&Wa(e)),t}function Wa(t){Le===null?Le=t:Le.push.apply(Le,t)}function lv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ht(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Zc,e&=~Vo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ct(e),r=1<<n;t[n]=-1,e&=~r}}function Ud(t){if(z&6)throw Error(_(327));dr();var e=Ji(t,0);if(!(e&1))return $e(t,te()),null;var n=po(t,e);if(t.tag!==0&&n===2){var r=ma(t);r!==0&&(e=r,n=Ha(t,r))}if(n===1)throw n=Ps,Tn(t,0),Yt(t,e),$e(t,te()),n;if(n===6)throw Error(_(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sn(t,Le,Rt),$e(t,te()),null}function eu(t,e){var n=z;z|=1;try{return t(e)}finally{z=n,z===0&&(wr=te()+500,$o&&mn())}}function In(t){Xt!==null&&Xt.tag===0&&!(z&6)&&dr();var e=z;z|=1;var n=tt.transition,r=V;try{if(tt.transition=null,V=1,t)return t()}finally{V=r,tt.transition=n,z=e,!(z&6)&&mn()}}function tu(){Be=ir.current,Q(ir)}function Tn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Oy(n)),re!==null)for(n=re.return;n!==null;){var r=n;switch(Lc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eo();break;case 3:_r(),Q(Oe),Q(Te),Hc();break;case 5:Vc(r);break;case 4:_r();break;case 13:Q(X);break;case 19:Q(X);break;case 10:$c(r.type._context);break;case 22:case 23:tu()}n=n.return}if(he=t,re=t=an(t.current,null),ye=Be=e,oe=0,Ps=null,Zc=Vo=Nn=0,Le=as=null,wn!==null){for(e=0;e<wn.length;e++)if(n=wn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}wn=null}return t}function Pp(t,e){do{var n=re;try{if(Fc(),Ri.current=co,ao){for(var r=Z.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ao=!1}if(Mn=0,de=ie=Z=null,os=!1,Ts=0,Xc.current=null,n===null||n.return===null){oe=1,Ps=e,re=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Rd(o);if(p!==null){p.flags&=-257,Pd(p,o,l,i,e),p.mode&1&&bd(i,c,e),e=p,a=c;var m=e.updateQueue;if(m===null){var x=new Set;x.add(a),e.updateQueue=x}else m.add(a);break e}else{if(!(e&1)){bd(i,c,e),nu();break e}a=Error(_(426))}}else if(K&&l.mode&1){var w=Rd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Pd(w,o,l,i,e),Ac(Cr(a,l));break e}}i=a=Cr(a,l),oe!==4&&(oe=2),as===null?as=[i]:as.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=fp(i,a,e);Sd(i,v);break e;case 1:l=a;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(on===null||!on.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=hp(i,l,e);Sd(i,k);break e}}i=i.return}while(i!==null)}Np(n)}catch(C){e=C,re===n&&n!==null&&(re=n=n.return);continue}break}while(1)}function Dp(){var t=uo.current;return uo.current=co,t===null?co:t}function nu(){(oe===0||oe===3||oe===2)&&(oe=4),he===null||!(Nn&268435455)&&!(Vo&268435455)||Yt(he,ye)}function po(t,e){var n=z;z|=2;var r=Dp();(he!==t||ye!==e)&&(Rt=null,Tn(t,e));do try{av();break}catch(s){Pp(t,s)}while(1);if(Fc(),z=n,uo.current=r,re!==null)throw Error(_(261));return he=null,ye=0,oe}function av(){for(;re!==null;)Mp(re)}function cv(){for(;re!==null&&!j0();)Mp(re)}function Mp(t){var e=jp(t.alternate,t,Be);t.memoizedProps=t.pendingProps,e===null?Np(t):re=e,Xc.current=null}function Np(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nv(n,e),n!==null){n.flags&=32767,re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{oe=6,re=null;return}}else if(n=tv(n,e,Be),n!==null){re=n;return}if(e=e.sibling,e!==null){re=e;return}re=e=t}while(e!==null);oe===0&&(oe=5)}function Sn(t,e,n){var r=V,s=tt.transition;try{tt.transition=null,V=1,uv(t,e,n,r)}finally{tt.transition=s,V=r}return null}function uv(t,e,n,r){do dr();while(Xt!==null);if(z&6)throw Error(_(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(H0(t,i),t===he&&(re=he=null,ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mi||(mi=!0,Lp(Qi,function(){return dr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tt.transition,tt.transition=null;var o=V;V=1;var l=z;z|=4,Xc.current=null,sv(t,n),Tp(n,t),Dy(_a),Ki=!!Sa,_a=Sa=null,t.current=n,iv(n),L0(),z=l,V=o,tt.transition=i}else t.current=n;if(mi&&(mi=!1,Xt=t,ho=s),i=t.pendingLanes,i===0&&(on=null),F0(n.stateNode),$e(t,te()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fo)throw fo=!1,t=Ba,Ba=null,t;return ho&1&&t.tag!==0&&dr(),i=t.pendingLanes,i&1?t===Va?cs++:(cs=0,Va=t):cs=0,mn(),null}function dr(){if(Xt!==null){var t=fh(ho),e=tt.transition,n=V;try{if(tt.transition=null,V=16>t?16:t,Xt===null)var r=!1;else{if(t=Xt,Xt=null,ho=0,z&6)throw Error(_(331));var s=z;for(z|=4,P=t.current;P!==null;){var i=P,o=i.child;if(P.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(P=c;P!==null;){var u=P;switch(u.tag){case 0:case 11:case 15:ls(8,u,i)}var d=u.child;if(d!==null)d.return=u,P=d;else for(;P!==null;){u=P;var f=u.sibling,p=u.return;if(Cp(u),u===c){P=null;break}if(f!==null){f.return=p,P=f;break}P=p}}}var m=i.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}P=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,P=o;else e:for(;P!==null;){if(i=P,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ls(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,P=v;break e}P=i.return}}var g=t.current;for(P=g;P!==null;){o=P;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,P=y;else e:for(o=g;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bo(9,l)}}catch(C){ee(l,l.return,C)}if(l===o){P=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,P=k;break e}P=l.return}}if(z=s,mn(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(jo,t)}catch{}r=!0}return r}finally{V=n,tt.transition=e}}return!1}function Bd(t,e,n){e=Cr(n,e),e=fp(t,e,1),t=sn(t,e,1),e=De(),t!==null&&(Bs(t,1,e),$e(t,e))}function ee(t,e,n){if(t.tag===3)Bd(t,t,n);else for(;e!==null;){if(e.tag===3){Bd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(on===null||!on.has(r))){t=Cr(n,t),t=hp(e,t,1),e=sn(e,t,1),t=De(),e!==null&&(Bs(e,1,t),$e(e,t));break}}e=e.return}}function dv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=De(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(ye&n)===n&&(oe===4||oe===3&&(ye&130023424)===ye&&500>te()-qc?Tn(t,0):Zc|=n),$e(t,e)}function Ip(t,e){e===0&&(t.mode&1?(e=oi,oi<<=1,!(oi&130023424)&&(oi=4194304)):e=1);var n=De();t=At(t,e),t!==null&&(Bs(t,e,n),$e(t,n))}function fv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ip(t,n)}function hv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(e),Ip(t,n)}var jp;jp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Oe.current)Ae=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ae=!1,ev(t,e,n);Ae=!!(t.flags&131072)}else Ae=!1,K&&e.flags&1048576&&Fh(e,ro,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Di(t,e),t=e.pendingProps;var s=xr(e,Te.current);ur(e,n),s=Gc(null,e,r,t,s,n);var i=Yc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(r)?(i=!0,to(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uc(e),s.updater=Uo,e.stateNode=s,s._reactInternals=e,Ma(e,r,t,n),e=ja(null,e,r,!0,i,n)):(e.tag=0,K&&i&&jc(e),Pe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Di(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gv(r),t=ot(r,t),s){case 0:e=Ia(null,e,r,t,n);break e;case 1:e=Nd(null,e,r,t,n);break e;case 11:e=Dd(null,e,r,t,n);break e;case 14:e=Md(null,e,r,ot(r.type,t),n);break e}throw Error(_(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ot(r,s),Ia(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ot(r,s),Nd(t,e,r,s,n);case 3:e:{if(yp(e),t===null)throw Error(_(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Hh(t,e),oo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cr(Error(_(423)),e),e=Id(t,e,r,n,s);break e}else if(r!==s){s=Cr(Error(_(424)),e),e=Id(t,e,r,n,s);break e}else for(Ve=rn(e.stateNode.containerInfo.firstChild),He=e,K=!0,at=null,n=Bh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),r===s){e=Ot(t,e,n);break e}Pe(t,e,r,n)}e=e.child}return e;case 5:return Wh(e),t===null&&Ra(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ca(r,s)?o=null:i!==null&&Ca(r,i)&&(e.flags|=32),mp(t,e),Pe(t,e,o,n),e.child;case 6:return t===null&&Ra(e),null;case 13:return vp(t,e,n);case 4:return Bc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Sr(e,null,r,n):Pe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ot(r,s),Dd(t,e,r,s,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,G(so,r._currentValue),r._currentValue=o,i!==null)if(ht(i.value,o)){if(i.children===s.children&&!Oe.current){e=Ot(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Nt(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Pa(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Pa(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ur(e,n),s=nt(s),r=r(s),e.flags|=1,Pe(t,e,r,n),e.child;case 14:return r=e.type,s=ot(r,e.pendingProps),s=ot(r.type,s),Md(t,e,r,s,n);case 15:return pp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ot(r,s),Di(t,e),e.tag=1,Fe(r)?(t=!0,to(e)):t=!1,ur(e,n),dp(e,r,s),Ma(e,r,s,n),ja(null,e,r,!0,t,n);case 19:return xp(t,e,n);case 22:return gp(t,e,n)}throw Error(_(156,e.tag))};function Lp(t,e){return ah(t,e)}function pv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(t,e,n,r){return new pv(t,e,n,r)}function ru(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gv(t){if(typeof t=="function")return ru(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_c)return 11;if(t===Cc)return 14}return 2}function an(t,e){var n=t.alternate;return n===null?(n=et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ii(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ru(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jn:return bn(n.children,s,i,e);case Sc:o=8,s|=8;break;case ta:return t=et(12,n,e,s|2),t.elementType=ta,t.lanes=i,t;case na:return t=et(13,n,e,s),t.elementType=na,t.lanes=i,t;case ra:return t=et(19,n,e,s),t.elementType=ra,t.lanes=i,t;case Wf:return Ho(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vf:o=10;break e;case Hf:o=9;break e;case _c:o=11;break e;case Cc:o=14;break e;case Vt:o=16,r=null;break e}throw Error(_(130,t==null?t:typeof t,""))}return e=et(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bn(t,e,n,r){return t=et(7,t,r,e),t.lanes=n,t}function Ho(t,e,n,r){return t=et(22,t,r,e),t.elementType=Wf,t.lanes=n,t.stateNode={isHidden:!1},t}function Al(t,e,n){return t=et(6,t,null,e),t.lanes=n,t}function Ol(t,e,n){return e=et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yl(0),this.expirationTimes=yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function su(t,e,n,r,s,i,o,l,a){return t=new mv(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=et(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(i),t}function yv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ap(t){if(!t)return dn;t=t._reactInternals;e:{if(Fn(t)!==t||t.tag!==1)throw Error(_(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_(171))}if(t.tag===1){var n=t.type;if(Fe(n))return Ah(t,n,e)}return e}function Op(t,e,n,r,s,i,o,l,a){return t=su(n,r,!0,t,s,i,o,l,a),t.context=Ap(null),n=t.current,r=De(),s=ln(n),i=Nt(r,s),i.callback=e??null,sn(n,i,s),t.current.lanes=s,Bs(t,s,r),$e(t,r),t}function Wo(t,e,n,r){var s=e.current,i=De(),o=ln(s);return n=Ap(n),e.context===null?e.context=n:e.pendingContext=n,e=Nt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sn(s,e,o),t!==null&&(ut(t,s,o,i),bi(t,s,o)),o}function go(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function iu(t,e){Vd(t,e),(t=t.alternate)&&Vd(t,e)}function vv(){return null}var Fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function ou(t){this._internalRoot=t}Go.prototype.render=ou.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_(409));Wo(t,e,null,null)};Go.prototype.unmount=ou.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;In(function(){Wo(null,t,null,null)}),e[Lt]=null}};function Go(t){this._internalRoot=t}Go.prototype.unstable_scheduleHydration=function(t){if(t){var e=gh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gt.length&&e!==0&&e<Gt[n].priority;n++);Gt.splice(n,0,t),n===0&&yh(t)}};function lu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hd(){}function xv(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=go(o);i.call(c)}}var o=Op(e,r,t,0,null,!1,!1,"",Hd);return t._reactRootContainer=o,t[Lt]=o.current,Ss(t.nodeType===8?t.parentNode:t),In(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=go(a);l.call(c)}}var a=su(t,0,!1,null,null,!1,!1,"",Hd);return t._reactRootContainer=a,t[Lt]=a.current,Ss(t.nodeType===8?t.parentNode:t),In(function(){Wo(e,a,n,r)}),a}function Qo(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=go(o);l.call(a)}}Wo(e,o,t,s)}else o=xv(n,e,t,s,r);return go(o)}hh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zr(e.pendingLanes);n!==0&&(Tc(e,n|1),$e(e,te()),!(z&6)&&(wr=te()+500,mn()))}break;case 13:In(function(){var r=At(t,1);if(r!==null){var s=De();ut(r,t,1,s)}}),iu(t,1)}};bc=function(t){if(t.tag===13){var e=At(t,134217728);if(e!==null){var n=De();ut(e,t,134217728,n)}iu(t,134217728)}};ph=function(t){if(t.tag===13){var e=ln(t),n=At(t,e);if(n!==null){var r=De();ut(n,t,e,r)}iu(t,e)}};gh=function(){return V};mh=function(t,e){var n=V;try{return V=t,e()}finally{V=n}};ha=function(t,e,n){switch(e){case"input":if(oa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Fo(r);if(!s)throw Error(_(90));Yf(r),oa(r,s)}}}break;case"textarea":Jf(t,n);break;case"select":e=n.value,e!=null&&or(t,!!n.multiple,e,!1)}};nh=eu;rh=In;var kv={usingClientEntryPoint:!1,Events:[Hs,qn,Fo,eh,th,eu]},Qr={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sv={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oh(t),t===null?null:t.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||vv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{jo=yi.inject(Sv),xt=yi}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kv;Ye.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lu(e))throw Error(_(200));return yv(t,e,null,n)};Ye.createRoot=function(t,e){if(!lu(t))throw Error(_(299));var n=!1,r="",s=Fp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=su(t,1,!1,null,null,n,!1,r,s),t[Lt]=e.current,Ss(t.nodeType===8?t.parentNode:t),new ou(e)};Ye.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_(188)):(t=Object.keys(t).join(","),Error(_(268,t)));return t=oh(e),t=t===null?null:t.stateNode,t};Ye.flushSync=function(t){return In(t)};Ye.hydrate=function(t,e,n){if(!Yo(e))throw Error(_(200));return Qo(null,t,e,!0,n)};Ye.hydrateRoot=function(t,e,n){if(!lu(t))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Fp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Op(e,null,t,1,n??null,s,!1,i,o),t[Lt]=e.current,Ss(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Go(e)};Ye.render=function(t,e,n){if(!Yo(e))throw Error(_(200));return Qo(null,t,e,!1,n)};Ye.unmountComponentAtNode=function(t){if(!Yo(t))throw Error(_(40));return t._reactRootContainer?(In(function(){Qo(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Ye.unstable_batchedUpdates=eu;Ye.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yo(n))throw Error(_(200));if(t==null||t._reactInternals===void 0)throw Error(_(38));return Qo(t,e,n,!1,r)};Ye.version="18.3.1-next-f1338f8080-20240426";function $p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($p)}catch(t){console.error(t)}}$p(),$f.exports=Ye;var _v=$f.exports,zp,Wd=_v;zp=ql.createRoot=Wd.createRoot,ql.hydrateRoot=Wd.hydrateRoot;var Up={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(a,c,u){this.fn=a,this.context=c,this.once=u||!1}function i(a,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,d||a,f),m=n?n+c:c;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],p]:a._events[m].push(p):(a._events[m]=p,a._eventsCount++),a}function o(a,c){--a._eventsCount===0?a._events=new r:delete a._events[c]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},l.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,m=new Array(p);f<p;f++)m[f]=d[f].fn;return m},l.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},l.prototype.emit=function(c,u,d,f,p,m){var x=n?n+c:c;if(!this._events[x])return!1;var w=this._events[x],v=arguments.length,g,y;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),v){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,f),!0;case 5:return w.fn.call(w.context,u,d,f,p),!0;case 6:return w.fn.call(w.context,u,d,f,p,m),!0}for(y=1,g=new Array(v-1);y<v;y++)g[y-1]=arguments[y];w.fn.apply(w.context,g)}else{var k=w.length,C;for(y=0;y<k;y++)switch(w[y].once&&this.removeListener(c,w[y].fn,void 0,!0),v){case 1:w[y].fn.call(w[y].context);break;case 2:w[y].fn.call(w[y].context,u);break;case 3:w[y].fn.call(w[y].context,u,d);break;case 4:w[y].fn.call(w[y].context,u,d,f);break;default:if(!g)for(C=1,g=new Array(v-1);C<v;C++)g[C-1]=arguments[C];w[y].fn.apply(w[y].context,g)}}return!0},l.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},l.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},l.prototype.removeListener=function(c,u,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!d||m.context===d)&&o(this,p);else{for(var x=0,w=[],v=m.length;x<v;x++)(m[x].fn!==u||f&&!m[x].once||d&&m[x].context!==d)&&w.push(m[x]);w.length?this._events[p]=w.length===1?w[0]:w:o(this,p)}return this},l.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(Up);var Cv=Up.exports;const Bp=hc(Cv),wv={isPlaying:!1,currentTime:0,currentFrame:0,duration:0,fps:24,volume:1,startFrame:0,annotations:[],selectedAnnotationId:null,activeTool:"select",activeColor:"#FF0000",activeStrokeWidth:3,defaultDuration:1,holdDuration:1,isOnionSkinEnabled:!1,onionSkinPrevFrames:3,onionSkinNextFrames:3,viewport:{x:0,y:0,scale:1}};class Ev extends Bp{constructor(e={}){super(),this.historyStack=[],this.redoStack=[],this.isUndoing=!1,this.state={...wv,...e},this.historyStack.push({...this.state})}getState(){return{...this.state}}getAnnotationsForFrame(e){const n=this.state.holdDuration||1;return this.state.annotations.filter(r=>{const s=r.frame,i=r.duration||1,o=Math.max(i,n),l=s+o-1;return e>=s&&e<=l})}addAnnotation(e,n=!1){n&&(console.log(`[Store] Received Remote Annotation: ${e.id}, Frame: ${e.frame}, Duration: ${e.duration}`),this.injectRemoteAnnotationChange(e.id,e,"add")),this.setState({annotations:[...this.state.annotations,e]}),this.emit("annotation:added",e,n)}updateAnnotation(e,n,r=!1){r&&this.injectRemoteAnnotationChange(e,n,"update");const s=this.state.annotations.map(i=>i.id===e?{...i,...n}:i);this.setState({annotations:s}),this.emit("annotation:updated",e,n,r)}deleteAnnotation(e,n=!1){n&&this.injectRemoteAnnotationChange(e,null,"delete"),this.setState({annotations:this.state.annotations.filter(r=>r.id!==e)}),this.emit("annotation:deleted",e,n)}injectRemoteAnnotationChange(e,n,r){const s=i=>{i.forEach(o=>{if(r==="add")o.annotations.some(l=>l.id===e)||o.annotations.push({...n});else if(r==="update"){const l=o.annotations.findIndex(a=>a.id===e);l!==-1&&(o.annotations[l]={...o.annotations[l],...n})}else r==="delete"&&(o.annotations=o.annotations.filter(l=>l.id!==e))})};s(this.historyStack),s(this.redoStack)}setState(e){const n={...this.state};this.state={...this.state,...e},this.emit("state:changed",this.state,n)}captureSnapshot(){this.isUndoing||(this.historyStack.push({...this.state}),this.redoStack=[],this.historyStack.length>50&&this.historyStack.shift())}applyStateReconciliation(e){const r=this.state.annotations,s=e.annotations,i=new Map(r.map(c=>[c.id,c])),o=new Map(s.map(c=>[c.id,c]));r.forEach(c=>{o.has(c.id)||this.deleteAnnotation(c.id)}),s.forEach(c=>{const u=i.get(c.id);u?JSON.stringify(u)!==JSON.stringify(c)&&this.updateAnnotation(c.id,c):this.addAnnotation(c)});const{annotations:l,...a}=e;this.setState(a)}undo(){if(this.historyStack.length<=1)return;this.isUndoing=!0;const e=this.historyStack.pop();e&&this.redoStack.push(e);const n=this.historyStack[this.historyStack.length-1];n&&this.applyStateReconciliation(n),this.isUndoing=!1}redo(){if(this.redoStack.length===0)return;this.isUndoing=!0;const e=this.redoStack.pop();e&&(this.historyStack.push(e),this.applyStateReconciliation(e)),this.isUndoing=!1}}class Vp{constructor(e,n){this.animationFrameId=null,this.audioContext=null,this.audioBuffer=null,this.isScrubbing=!1,this.store=e,this.videoElement=n,this.initListeners()}initListeners(){this.videoElement.addEventListener("loadedmetadata",()=>{this.store.setState({duration:this.videoElement.duration})}),this.videoElement.addEventListener("timeupdate",()=>{const e=this.videoElement.currentTime,n=this.store.getState().fps,r=Math.round(e*n);this.store.setState({currentTime:e,currentFrame:r})}),this.videoElement.addEventListener("play",()=>{this.store.setState({isPlaying:!0}),this.startLoop()}),this.videoElement.addEventListener("pause",()=>{this.store.setState({isPlaying:!1}),this.stopLoop()})}startLoop(){}stopLoop(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}async initAudio(){if(!this.audioContext&&(this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.videoElement.src))try{const n=await(await fetch(this.videoElement.src)).arrayBuffer();this.audioBuffer=await this.audioContext.decodeAudioData(n)}catch{}}playScrubAudio(){if(!this.audioContext||!this.audioBuffer||this.store.getState().isPlaying)return;const e=this.videoElement.muted?0:this.videoElement.volume;if(e<=.01)return;const n=this.videoElement.currentTime,r=.1,s=this.audioContext.createBufferSource();s.buffer=this.audioBuffer;const i=this.audioContext.createGain();i.gain.value=e,s.connect(i),i.connect(this.audioContext.destination),s.start(this.audioContext.currentTime,n,r)}play(){this.videoElement.play()}pause(){this.videoElement.pause()}seekToFrame(e){const n=this.store.getState().fps,r=e/n;this.videoElement.currentTime=r,this.store.setState({currentFrame:e,currentTime:r}),this.audioBuffer?this.playScrubAudio():this.initAudio()}seekToNextAnnotation(){const e=this.store.getState(),n=e.currentFrame,r=e.annotations.map(s=>s.frame).filter(s=>s>n).sort((s,i)=>s-i);r.length>0&&this.seekToFrame(r[0])}seekToPrevAnnotation(){const e=this.store.getState(),n=e.currentFrame,r=e.annotations.map(s=>s.frame).filter(s=>s<n).sort((s,i)=>i-s);r.length>0&&this.seekToFrame(r[0])}static frameToTimecode(e,n,r=0){const s=e+r,i=Math.floor(s/n),o=Math.floor(s%n),l=Math.floor(i%60),a=Math.floor(i/60%60),c=Math.floor(i/3600),u=d=>d.toString().padStart(2,"0");return`${u(c)}:${u(a)}:${u(l)}:${u(o)}`}static timecodeToFrame(e,n,r=0){const s=e.split(":").map(Number);if(s.length!==4)return 0;const[i,o,l,a]=s;return(i*3600+o*60+l)*n+a-r}}class Tv{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return bv(e).buffer}}function bv(t){let e=0;for(const s of t)e+=s.byteLength;const n=new Uint8Array(e);let r=0;for(const s of t){const i=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);n.set(i,r),r+=s.byteLength}return n}function Hp(t){return new Rv(t).unpack()}function Wp(t){const e=new Pv,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class Rv{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,s="",i,o;for(;r<e;)i=n[r],i<160?(o=i,r++):(i^192)<32?(o=(i&31)<<6|n[r+1]&63,r+=2):(i^224)<16?(o=(i&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(i&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),s+=String.fromCodePoint(o);return this.index+=e,s}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const s=this.unpack();n[s]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,s=e&8388607|8388608;return(n===0?1:-1)*s*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,s=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(s-20)+n*2**(s-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class Pv{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=s=>{if(s<n){const i=this.pack(e[s]);return i instanceof Promise?i.then(()=>r(s+1)):r(s+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),s=e/2**r-1,i=Math.floor(s*2**52),o=2**32,l=n<<31|r+1023<<20|i/o&1048575,a=i%o;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(a)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const s=i=>{if(i<n.length){const o=n[i];if(e.hasOwnProperty(o)){this.pack(o);const l=this.pack(e[o]);if(l instanceof Promise)return l.then(()=>s(i+1))}return s(i+1)}};return s(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Tv,this._textEncoder=new TextEncoder}}let Gp=!0,Yp=!0;function es(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function $n(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(o,l){if(o!==e)return s.apply(this,arguments);const a=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,a),s.apply(this,[o,a])};const i=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(l))return i.apply(this,arguments);const a=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Dv(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Gp=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Mv(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Yp=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Qp(){if(typeof window=="object"){if(Gp)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function au(t,e){Yp&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Nv(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(s=>s.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(es(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(es(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(es(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=es(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Gd(t){return Object.prototype.toString.call(t)==="[object Object]"}function Jp(t){return Gd(t)?Object.keys(t).reduce(function(e,n){const r=Gd(t[n]),s=r?Jp(t[n]):t[n],i=r&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[n]:s})},{}):t}function Ga(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Ga(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(s=>{Ga(t,t.get(s),n)})}))}function Yd(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&i.push(o)}),i.forEach(o=>{t.forEach(l=>{l.type===r&&l.trackId===o.id&&Ga(t,l,s)})}),s}const Qd=Qp;function Kp(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,p){return f?f+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){a.optional=a.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",c)]=u.ideal,a.optional.push(f),f={},f[d("max",c)]=u.ideal,a.optional.push(f)):(f[d("",c)]=u.ideal,a.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[d("",c)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[d(f,c)]=u[f])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},s=function(l,a){if(e.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(m=>m.kind==="videoinput");let p=f.find(m=>d.some(x=>m.label.toLowerCase().includes(x)));return!p&&f.length&&d.includes("back")&&(p=f[f.length-1]),p&&(l.video.deviceId=c.exact?{exact:p.deviceId}:{ideal:p.deviceId}),l.video=r(l.video),Qd("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return Qd("chrome: "+JSON.stringify(l)),a(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,a,c){s(l,u=>{n.webkitGetUserMedia(u,a,d=>{c&&c(i(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return s(a,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(i(u))))}}}function Xp(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Zp(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):i={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.id):i={track:s};const o=new Event("track");o.track=s,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else $n(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function qp(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,a){let c=s.apply(this,arguments);return c||(c=e(this,l),this._senders.push(c)),c};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){i.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{const l=this._senders.find(a=>a.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function eg(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Yd(o,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(i=>i._pc=this),s}),$n(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>Yd(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let s,i,o;return this.getSenders().forEach(l=>{l.track===r&&(s?o=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===r&&(i?o=!0:i=l),l.track===r)),o||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function tg(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(a)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(o);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function ng(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return tg(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(x=>x===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[d.id];if(m)m.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new t.MediaStream([u]);this._streams[d.id]=x,this._reverseStreams[x.id]=d,this.addStream(x)}return this.getSenders().find(x=>x.track===u)};function i(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const p=c._reverseStreams[f],m=c._streams[p.id];d=d.replace(new RegExp(m.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const p=c._reverseStreams[f],m=c._streams[p.id];d=d.replace(new RegExp(p.id,"g"),m.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],d={[c](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[m=>{const x=i(this,m);f[0].apply(null,[x])},m=>{f[1]&&f[1].apply(null,m)},arguments[2]]):u.apply(this,arguments).then(m=>i(this,m))}};t.RTCPeerConnection.prototype[c]=d[c]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:i(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(x=>u.track===x)&&(f=this._streams[p])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ya(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=s[n]})}function rg(t,e){$n(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Jd=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:rg,shimAddTrackRemoveTrack:ng,shimAddTrackRemoveTrackWithNative:tg,shimGetSendersWithDtmf:qp,shimGetUserMedia:Kp,shimMediaStream:Xp,shimOnTrack:Zp,shimPeerConnection:Ya,shimSenderReceiverGetStats:eg},Symbol.toStringTag,{value:"Module"}));function sg(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(s,i,o){au("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(s).then(i,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const s=function(o,l,a){l in o&&!(a in o)&&(o[a]=o[l],delete o[l])},i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function Iv(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function ig(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qa(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=o[s]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,o,l]=arguments;return r.apply(this,[i||null]).then(a=>{if(e.version<53&&!o)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,d)=>{a.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return a}).then(o,l)}}function og(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function lg(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),$n(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ag(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){au("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function cg(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function ug(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const s=r.length>0;s&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:o}=i,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function dg(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function fg(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function hg(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Kd=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:ug,shimCreateAnswer:hg,shimCreateOffer:fg,shimGetDisplayMedia:Iv,shimGetParameters:dg,shimGetUserMedia:sg,shimOnTrack:ig,shimPeerConnection:Qa,shimRTCDataChannel:cg,shimReceiverGetStats:lg,shimRemoveStream:ag,shimSenderGetStats:og},Symbol.toStringTag,{value:"Module"}));function pg(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const s=n.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function gg(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function mg(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f};let l=function(a,c,u){const d=s.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=l,l=function(a,c,u){const d=i.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=l,l=function(a,c,u){const d=o.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=l}function yg(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=s=>r(vg(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,s,i){e.mediaDevices.getUserMedia(r).then(s,i)}).bind(e))}function vg(t){return t&&t.video!==void 0?Object.assign({},t,{video:Jp(t.video)}):t}function xg(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const i=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];l.urls===void 0&&l.url?(au("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,i.push(l)):i.push(r.iceServers[o])}r.iceServers=i}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function kg(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Sg(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function _g(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Xd=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:_g,shimCallbacksAPI:mg,shimConstraints:vg,shimCreateOfferLegacy:Sg,shimGetUserMedia:yg,shimLocalStreamsAPI:pg,shimRTCIceServerUrls:xg,shimRemoteStreamsAPI:gg,shimTrackEventTransceiver:kg},Symbol.toStringTag,{value:"Module"}));var Cg={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(s=>s.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let i=8;i<r.length;i+=2)switch(r[i]){case"raddr":s.relatedAddress=r[i+1];break;case"rport":s.relatedPort=parseInt(r[i+1],10);break;case"tcptype":s.tcpType=r[i+1];break;case"ufrag":s.ufrag=r[i+1],s.usernameFragment=r[i+1];break;default:s[r[i]]===void 0&&(s[r[i]]=r[i+1]);break}return s},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const s=n.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const s=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let s;const i=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)s=i[o].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(n){let r="",s=n.payloadType;if(n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const i=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?i.push(o+"="+n.parameters[o]):i.push(o)}),r+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",s=n.payloadType;return n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(i=>{r+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),s={ssrc:parseInt(n.substring(7,r),10)},i=n.indexOf(":",r);return i>-1?(s.attribute=n.substring(r+1,i),s.value=n.substring(i+1)):s.attribute=n.substring(r+1),s},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let s="a=setup:"+r+`\r
`;return n.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const s=e.matchPrefix(n+r,"a=ice-ufrag:")[0],i=e.matchPrefix(n+r,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n)[0].split(" ");r.profile=i[2];for(let l=3;l<i.length;l++){const a=i[l],c=e.matchPrefix(n,"a=rtpmap:"+a+" ")[0];if(c){const u=e.parseRtpMap(c),d=e.matchPrefix(n,"a=fmtp:"+a+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+a+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(e.parseExtmap(l))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(l=>{o.forEach(a=>{l.rtcpFeedback.find(u=>u.type===a.type&&u.parameter===a.parameter)||l.rtcpFeedback.push(a)})}),r},e.writeRtpDescription=function(n,r){let s="";s+="m="+n+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let i=0;return r.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(n){const r=[],s=e.parseRtpParameters(n),i=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),a=l.length>0&&l[0].ssrc;let c;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(m=>parseInt(m,10)));u.length>0&&u[0].length>1&&u[0][0]===a&&(c=u[0][1]),s.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:a,codecPayloadType:parseInt(f.parameters.apt,10)};a&&c&&(p.rtx={ssrc:c}),r.push(p),i&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&a&&r.push({ssrc:a});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},s=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const i=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=i.length>0,r.compound=i.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const s=e.matchPrefix(n,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const i=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return r=i[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),s=e.matchPrefix(n,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:i};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const a=l[0].substring(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:i}}},e.writeSctpDescription=function(n,r){let s=[];return n.protocol!=="DTLS/SCTP"?s=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,s){let i;const o=r!==void 0?r:2;return n?i=n:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const s=e.splitLines(n);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const s=e.splitLines(n)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(n){const s=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(Cg);var wg=Cg.exports;const fr=hc(wg),jv=Km({__proto__:null,default:fr},[wg]);function ji(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const s=new e(r),i=fr.parseCandidate(r.candidate);for(const o in i)o in s||Object.defineProperty(s,o,{value:i[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,$n(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ja(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||$n(t,"icecandidate",e=>{if(e.candidate){const n=fr.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Li(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=fr.splitSections(l.sdp);return a.shift(),a.some(c=>{const u=fr.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},s=function(l){let a=65536;return e.browser==="firefox"&&(e.version<57?l===-1?a=16384:a=2147483637:e.version<60?a=e.version===57?65535:65536:a=2147483637),a},i=function(l,a){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=fr.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):e.browser==="firefox"&&a!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=s(a),u=i(arguments[0],a);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Ai(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,s){const i=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&s.sctp&&a>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=n.apply(this,arguments);return e(s,this),s},$n(t,"datachannel",r=>(e(r.channel,r.target),r))}function Ka(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",s);i.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Xa(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return n.apply(this,arguments)}}function Oi(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Fi(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return n.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?n.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const Lv=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Xa,shimAddIceCandidateNullOrEmpty:Oi,shimConnectionState:Ka,shimMaxMessageSize:Li,shimParameterlessSetLocalDescription:Fi,shimRTCIceCandidate:ji,shimRTCIceCandidateRelayProtocol:Ja,shimSendThrowTypeError:Ai},Symbol.toStringTag,{value:"Module"}));function Av({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Qp,r=Nv(t),s={browserDetails:r,commonShim:Lv,extractVersion:es,disableLog:Dv,disableWarnings:Mv,sdp:jv};switch(r.browser){case"chrome":if(!Jd||!Ya||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),s;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),s;n("adapter.js shimming chrome."),s.browserShim=Jd,Oi(t,r),Fi(t),Kp(t,r),Xp(t),Ya(t,r),Zp(t),ng(t,r),qp(t),eg(t),rg(t,r),ji(t),Ja(t),Ka(t),Li(t,r),Ai(t),Xa(t,r);break;case"firefox":if(!Kd||!Qa||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=Kd,Oi(t,r),Fi(t),sg(t,r),Qa(t,r),ig(t),ag(t),og(t),lg(t),cg(t),ug(t),dg(t),fg(t),hg(t),ji(t),Ka(t),Li(t,r),Ai(t);break;case"safari":if(!Xd||!e.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=Xd,Oi(t,r),Fi(t),xg(t),Sg(t),mg(t),pg(t),gg(t),kg(t),yg(t),_g(t),ji(t),Ja(t),Li(t,r),Ai(t),Xa(t,r);break;default:n("Unsupported browser!");break}return s}const Zd=Av({window:typeof window>"u"?void 0:window});function zn(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class Eg{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,s=Math.ceil(r/this.chunkedMTU);let i=0,o=0;for(;o<r;){const l=Math.min(r,o+this.chunkedMTU),a=e.slice(o,l),c={__peerData:this._dataCount,n:i,data:a,total:s};n.push(c),o=l,i++}return this._dataCount++,n}}}function Ov(t){let e=0;for(const s of t)e+=s.byteLength;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.byteLength;return n}const Fl=Zd.default||Zd,Jr=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Fl.browserDetails.browser}getVersion(){return Fl.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Fl.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Fv=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),Tg=()=>Math.random().toString(36).slice(2),qd={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $v extends Eg{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(s){s.target&&n(s.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=qd,this.browser=Jr.getBrowser(),this.browserVersion=Jr.getVersion(),this.pack=Wp,this.unpack=Hp,this.supports=function(){const n={browser:Jr.isBrowserSupported(),webRTC:Jr.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(qd),n.audioVideo=!0;let s;try{s=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!s.ordered;try{s.binaryType="blob",n.binaryBlob=!Jr.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=Fv,this.randomToken=Tg}}const je=new $v,zv="PeerJS: ";class Uv{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[zv,...n];for(const s in r)r[s]instanceof Error&&(r[s]="("+r[s].name+") "+r[s].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var D=new Uv,cu={},Bv=Object.prototype.hasOwnProperty,Me="~";function Ds(){}Object.create&&(Ds.prototype=Object.create(null),new Ds().__proto__||(Me=!1));function Vv(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function bg(t,e,n,r,s){if(typeof n!="function")throw new TypeError("The listener must be a function");var i=new Vv(n,r||t,s),o=Me?Me+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],i]:t._events[o].push(i):(t._events[o]=i,t._eventsCount++),t}function $i(t,e){--t._eventsCount===0?t._events=new Ds:delete t._events[e]}function be(){this._events=new Ds,this._eventsCount=0}be.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)Bv.call(n,r)&&e.push(Me?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};be.prototype.listeners=function(e){var n=Me?Me+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o};be.prototype.listenerCount=function(e){var n=Me?Me+e:e,r=this._events[n];return r?r.fn?1:r.length:0};be.prototype.emit=function(e,n,r,s,i,o){var l=Me?Me+e:e;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,u,d;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,s),!0;case 5:return a.fn.call(a.context,n,r,s,i),!0;case 6:return a.fn.call(a.context,n,r,s,i,o),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];a.fn.apply(a.context,u)}else{var f=a.length,p;for(d=0;d<f;d++)switch(a[d].once&&this.removeListener(e,a[d].fn,void 0,!0),c){case 1:a[d].fn.call(a[d].context);break;case 2:a[d].fn.call(a[d].context,n);break;case 3:a[d].fn.call(a[d].context,n,r);break;case 4:a[d].fn.call(a[d].context,n,r,s);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];a[d].fn.apply(a[d].context,u)}}return!0};be.prototype.on=function(e,n,r){return bg(this,e,n,r,!1)};be.prototype.once=function(e,n,r){return bg(this,e,n,r,!0)};be.prototype.removeListener=function(e,n,r,s){var i=Me?Me+e:e;if(!this._events[i])return this;if(!n)return $i(this,i),this;var o=this._events[i];if(o.fn)o.fn===n&&(!s||o.once)&&(!r||o.context===r)&&$i(this,i);else{for(var l=0,a=[],c=o.length;l<c;l++)(o[l].fn!==n||s&&!o[l].once||r&&o[l].context!==r)&&a.push(o[l]);a.length?this._events[i]=a.length===1?a[0]:a:$i(this,i)}return this};be.prototype.removeAllListeners=function(e){var n;return e?(n=Me?Me+e:e,this._events[n]&&$i(this,n)):(this._events=new Ds,this._eventsCount=0),this};be.prototype.off=be.prototype.removeListener;be.prototype.addListener=be.prototype.on;be.prefixed=Me;be.EventEmitter=be;cu=be;var Un={};zn(Un,"ConnectionType",()=>cn);zn(Un,"PeerErrorType",()=>ne);zn(Un,"BaseConnectionErrorType",()=>Za);zn(Un,"DataConnectionErrorType",()=>uu);zn(Un,"SerializationType",()=>Jo);zn(Un,"SocketEventType",()=>Zt);zn(Un,"ServerMessageType",()=>Ce);var cn=function(t){return t.Data="data",t.Media="media",t}({}),ne=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),Za=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),uu=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),Jo=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),Zt=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),Ce=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const Rg="1.5.5";class Hv extends cu.EventEmitter{constructor(e,n,r,s,i,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const l=e?"wss://":"ws://";this._baseUrl=l+n+":"+r+s+"peerjs?key="+i}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Rg),this._disconnected=!1,this._socket.onmessage=s=>{let i;try{i=JSON.parse(s.data),D.log("Server message received:",i)}catch{D.log("Invalid server message",s.data);return}this.emit(Zt.Message,i)},this._socket.onclose=s=>{this._disconnected||(D.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(Zt.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),D.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){D.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ce.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Zt.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Pg{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===cn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,s={ordered:!!e.reliable},i=n.createDataChannel(r.label,s);r._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){D.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,s=this.connection.type,i=this.connection.provider;D.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(D.log(`Received ICE candidates for ${n}:`,o.candidate),i.socket.send({type:Ce.Candidate,payload:{candidate:o.candidate,type:s,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":D.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Za.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":D.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Za.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":D.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},D.log("Listening for data channel"),e.ondatachannel=o=>{D.log("Received data channel");const l=o.channel;i.getConnection(n,r)._initializeDataChannel(l)},D.log("Listening for remote stream"),e.ontrack=o=>{D.log("Received remote stream");const l=o.streams[0],a=i.getConnection(n,r);if(a.type===cn.Media){const c=a;this._addStreamToMediaConnection(l,c)}}}cleanup(){D.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const s=this.connection.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);D.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),D.log("Set localDescription:",r,`for:${this.connection.peer}`);let s={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===cn.Data){const i=this.connection;s={...s,label:i.label,reliable:i.reliable,serialization:i.serialization}}n.socket.send({type:Ce.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ne.WebRTC,s),D.log("Failed to setLocalDescription, ",s))}}catch(r){n.emitError(ne.WebRTC,r),D.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();D.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),D.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Ce.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){n.emitError(ne.WebRTC,s),D.log("Failed to setLocalDescription, ",s)}}catch(r){n.emitError(ne.WebRTC,r),D.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,s=this.connection.provider;D.log("Setting remote description",n);const i=this;try{await r.setRemoteDescription(n),D.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await i._makeAnswer()}catch(o){s.emitError(ne.WebRTC,o),D.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){D.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),D.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ne.WebRTC,n),D.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(D.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return D.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){D.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class Dg extends cu.EventEmitter{emitError(e,n){D.error("Error:",n),this.emit("error",new Wv(`${e}`,n))}}class Wv extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class Mg extends Dg{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var cc;const ds=class ds extends Mg{get type(){return cn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||ds.ID_PREFIX+je.randomToken(),this._negotiator=new Pg(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{D.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{D.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){D.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case Ce.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Ce.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:D.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){D.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const s of r)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};cc=new WeakMap,zr(ds,cc,ds.ID_PREFIX="mc_");let mo=ds;class Gv{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:s,path:i,key:o}=this._options,l=new URL(`${n}://${r}:${s}${i}${o}/${e}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",Rg),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){D.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==je.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===je.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw D.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var uc,dc;const _n=class _n extends Mg{get type(){return cn.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||_n.ID_PREFIX+Tg(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Pg(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{D.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{D.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{D.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(uu.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case Ce.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case Ce.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:D.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};uc=new WeakMap,dc=new WeakMap,zr(_n,uc,_n.ID_PREFIX="dc_"),zr(_n,dc,_n.MAX_BUFFERED_AMOUNT=8388608);let yo=_n;class du extends yo{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>yo.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return D.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class $l extends du{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new Eg,this.serialization=Jo.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=Hp(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const s=Ov(r.data);this._handleDataMessage({data:s})}}_send(e,n){const r=Wp(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);D.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class Yv extends du{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Jo.None}}class Qv extends du{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=je.chunkedMTU){this.emitError(uu.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Jo.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var fc;const fs=class fs extends Dg{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:Yv,json:Qv,binary:$l,"binary-utf8":$l,default:$l},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:je.CLOUD_HOST,port:je.CLOUD_PORT,path:"/",key:fs.DEFAULT_KEY,token:je.randomToken(),config:je.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==je.CLOUD_HOST?this._options.secure=je.isSecure():this._options.host==je.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&D.setLogFunction(this._options.logFunction),D.logLevel=this._options.debug||0,this._api=new Gv(n),this._socket=this._createServerConnection(),!je.supports.audioVideo&&!je.supports.data){this._delayedAbort(ne.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!je.validateId(r)){this._delayedAbort(ne.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(ne.ServerError,s))}_createServerConnection(){const e=new Hv(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Zt.Message,n=>{this._handleMessage(n)}),e.on(Zt.Error,n=>{this._abort(ne.SocketError,n)}),e.on(Zt.Disconnected,()=>{this.disconnected||(this.emitError(ne.Network,"Lost connection to server."),this.disconnect())}),e.on(Zt.Close,()=>{this.disconnected||this._abort(ne.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,s=e.src;switch(n){case Ce.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ce.Error:this._abort(ne.ServerError,r.msg);break;case Ce.IdTaken:this._abort(ne.UnavailableID,`ID "${this.id}" is taken`);break;case Ce.InvalidKey:this._abort(ne.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ce.Leave:D.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case Ce.Expire:this.emitError(ne.PeerUnavailable,`Could not connect to peer ${s}`);break;case Ce.Offer:{const i=r.connectionId;let o=this.getConnection(s,i);if(o&&(o.close(),D.warn(`Offer received for existing Connection ID:${i}`)),r.type===cn.Media){const a=new mo(s,this,{connectionId:i,_payload:r,metadata:r.metadata});o=a,this._addConnection(s,o),this.emit("call",a)}else if(r.type===cn.Data){const a=new this._serializers[r.serialization](s,this,{connectionId:i,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=a,this._addConnection(s,o),this.emit("connection",a)}else{D.warn(`Received malformed connection type:${r.type}`);return}const l=this._getMessages(i);for(const a of l)o.handleMessage(a);break}default:{if(!r){D.warn(`You received a malformed message from ${s} of type ${n}`);return}const i=r.connectionId,o=this.getConnection(s,i);o&&o.peerConnection?o.handleMessage(e):i?this._storeMessage(i,e):D.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){D.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ne.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){D.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ne.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){D.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new mo(e,this,{...r,_stream:n});return this._addConnection(e,s),s}_addConnection(e,n){D.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const s of r)if(s.connectionId===n)return s;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){D.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(D.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;D.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)D.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)D.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(ne.ServerError,n))}};fc=new WeakMap,zr(fs,fc,fs.DEFAULT_KEY="peerjs");let qa=fs;const dt=()=>new Map,ec=t=>{const e=dt();return t.forEach((n,r)=>{e.set(r,n)}),e},yn=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Jv=(t,e)=>{const n=[];for(const[r,s]of t)n.push(e(s,r));return n},Kv=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Er=()=>new Set,zl=t=>t[t.length-1],Xv=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},fn=Array.from,fu=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},Ng=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},Zv=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},Ko=Array.isArray;class qv{constructor(){this._observers=dt()}on(e,n){return yn(this._observers,e,Er).add(n),n}once(e,n){const r=(...s)=>{this.off(e,r),n(...s)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return fn((this._observers.get(e)||dt()).values()).forEach(r=>r(...n))}destroy(){this._observers=dt()}}const St=Math.floor,zi=Math.abs,Ig=(t,e)=>t<e?t:e,Bn=(t,e)=>t>e?t:e,jg=t=>t!==0?t<0:1/t<0,ef=1,tf=2,Ul=4,Bl=8,Ms=32,It=64,We=128,Xo=31,tc=63,Rn=127,e1=2147483647,vo=Number.MAX_SAFE_INTEGER,nf=Number.MIN_SAFE_INTEGER,t1=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&St(t)===t),n1=String.fromCharCode,r1=t=>t.toLowerCase(),s1=/^\s*/g,i1=t=>t.replace(s1,""),o1=/([A-Z])/g,rf=(t,e)=>i1(t.replace(o1,n=>`${e}${r1(n)}`)),l1=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.codePointAt(s);return r},Ns=typeof TextEncoder<"u"?new TextEncoder:null,a1=t=>Ns.encode(t),c1=Ns?a1:l1;let us=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});us&&us.decode(new Uint8Array).length===1&&(us=null);const u1=(t,e)=>Zv(e,()=>t).join("");class Gs{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Zo=()=>new Gs,d1=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},vt=t=>{const e=new Uint8Array(d1(t));let n=0;for(let r=0;r<t.bufs.length;r++){const s=t.bufs[r];e.set(s,n),n+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},f1=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Bn(n,e)*2),t.cpos=0)},ue=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},nc=ue,F=(t,e)=>{for(;e>Rn;)ue(t,We|Rn&e),e=St(e/128);ue(t,Rn&e)},hu=(t,e)=>{const n=jg(e);for(n&&(e=-e),ue(t,(e>tc?We:0)|(n?It:0)|tc&e),e=St(e/64);e>0;)ue(t,(e>Rn?We:0)|Rn&e),e=St(e/128)},rc=new Uint8Array(3e4),h1=rc.length/3,p1=(t,e)=>{if(e.length<h1){const n=Ns.encodeInto(e,rc).written||0;F(t,n);for(let r=0;r<n;r++)ue(t,rc[r])}else ze(t,c1(e))},g1=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;F(t,r);for(let s=0;s<r;s++)ue(t,n.codePointAt(s))},hr=Ns&&Ns.encodeInto?p1:g1,qo=(t,e)=>{const n=t.cbuf.length,r=t.cpos,s=Ig(n-r,e.length),i=e.length-s;t.cbuf.set(e.subarray(0,s),r),t.cpos+=s,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Bn(n*2,i)),t.cbuf.set(e.subarray(s)),t.cpos=i)},ze=(t,e)=>{F(t,e.byteLength),qo(t,e)},pu=(t,e)=>{f1(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},m1=(t,e)=>pu(t,4).setFloat32(0,e,!1),y1=(t,e)=>pu(t,8).setFloat64(0,e,!1),v1=(t,e)=>pu(t,8).setBigInt64(0,e,!1),sf=new DataView(new ArrayBuffer(4)),x1=t=>(sf.setFloat32(0,t),sf.getFloat32(0)===t),Is=(t,e)=>{switch(typeof e){case"string":ue(t,119),hr(t,e);break;case"number":t1(e)&&zi(e)<=e1?(ue(t,125),hu(t,e)):x1(e)?(ue(t,124),m1(t,e)):(ue(t,123),y1(t,e));break;case"bigint":ue(t,122),v1(t,e);break;case"object":if(e===null)ue(t,126);else if(Ko(e)){ue(t,117),F(t,e.length);for(let n=0;n<e.length;n++)Is(t,e[n])}else if(e instanceof Uint8Array)ue(t,116),ze(t,e);else{ue(t,118);const n=Object.keys(e);F(t,n.length);for(let r=0;r<n.length;r++){const s=n[r];hr(t,s),Is(t,e[s])}}break;case"boolean":ue(t,e?120:121);break;default:ue(t,127)}};class of extends Gs{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&F(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const lf=t=>{t.count>0&&(hu(t.encoder,t.count===1?t.s:-t.s),t.count>1&&F(t.encoder,t.count-2))};class Ui{constructor(){this.encoder=new Gs,this.s=0,this.count=0}write(e){this.s===e?this.count++:(lf(this),this.count=1,this.s=e)}toUint8Array(){return lf(this),vt(this.encoder)}}const af=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);hu(t.encoder,e),t.count>1&&F(t.encoder,t.count-2)}};class Vl{constructor(){this.encoder=new Gs,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(af(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return af(this),vt(this.encoder)}}class k1{constructor(){this.sarr=[],this.s="",this.lensE=new Ui}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Gs;return this.sarr.push(this.s),this.s="",hr(e,this.sarr.join("")),qo(e,this.lensE.toUint8Array()),vt(e)}}const _t=t=>new Error(t),ft=()=>{throw _t("Method unimplemented")},st=()=>{throw _t("Unexpected case")},Lg=_t("Unexpected end of array"),Ag=_t("Integer out of Range");class el{constructor(e){this.arr=e,this.pos=0}}const Lr=t=>new el(t),S1=t=>t.pos!==t.arr.length,_1=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Ue=t=>_1(t,L(t)),Tr=t=>t.arr[t.pos++],L=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const s=t.arr[t.pos++];if(e=e+(s&Rn)*n,n*=128,s<We)return e;if(e>vo)throw Ag}throw Lg},gu=t=>{let e=t.arr[t.pos++],n=e&tc,r=64;const s=(e&It)>0?-1:1;if(!(e&We))return s*n;const i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],n=n+(e&Rn)*r,r*=128,e<We)return s*n;if(n>vo)throw Ag}throw Lg},C1=t=>{let e=L(t);if(e===0)return"";{let n=String.fromCodePoint(Tr(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Tr(t));else for(;e>0;){const r=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,s),e-=r}return decodeURIComponent(escape(n))}},w1=t=>us.decode(Ue(t)),pr=us?w1:C1,mu=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},E1=t=>mu(t,4).getFloat32(0,!1),T1=t=>mu(t,8).getFloat64(0,!1),b1=t=>mu(t,8).getBigInt64(0,!1),R1=[t=>{},t=>null,gu,E1,T1,b1,t=>!1,t=>!0,pr,t=>{const e=L(t),n={};for(let r=0;r<e;r++){const s=pr(t);n[s]=js(t)}return n},t=>{const e=L(t),n=[];for(let r=0;r<e;r++)n.push(js(t));return n},Ue],js=t=>R1[127-Tr(t)](t);class cf extends el{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),S1(this)?this.count=L(this)+1:this.count=-1),this.count--,this.s}}class Bi extends el{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=gu(this);const e=jg(this.s);this.count=1,e&&(this.s=-this.s,this.count=L(this)+2)}return this.count--,this.s}}class Hl extends el{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=gu(this),n=e&1;this.diff=St(e/2),this.count=1,n&&(this.count=L(this)+2)}return this.s+=this.diff,this.count--,this.s}}class P1{constructor(e){this.decoder=new Bi(e),this.str=pr(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const D1=crypto.getRandomValues.bind(crypto),Og=()=>D1(new Uint32Array(1))[0],M1=[1e7]+-1e3+-4e3+-8e3+-1e11,N1=()=>M1.replace(/[018]/g,t=>(t^Og()&15>>t/4).toString(16)),uf=t=>new Promise(t);Promise.all.bind(Promise);const df=t=>t===void 0?null:t;class I1{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let Fg=new I1,j1=!0;try{typeof localStorage<"u"&&localStorage&&(Fg=localStorage,j1=!1)}catch{}const L1=Fg,Ls=Symbol("Equality"),$g=(t,e)=>{var n;return t===e||!!((n=t==null?void 0:t[Ls])!=null&&n.call(t,e))||!1},A1=t=>typeof t=="object",O1=Object.assign,F1=Object.keys,$1=(t,e)=>{for(const n in t)e(t[n],n)},xo=t=>F1(t).length,z1=t=>{for(const e in t)return!1;return!0},Ys=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},yu=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),U1=(t,e)=>t===e||xo(t)===xo(e)&&Ys(t,(n,r)=>(n!==void 0||yu(e,r))&&$g(e[r],n)),B1=Object.freeze,zg=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&zg(t[e])}return B1(t)},vu=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&vu(t,e,n+1)}},V1=t=>t,Vi=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[Ls]!=null)return t[Ls](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Vi(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(xo(t)!==xo(e))return!1;for(const n in t)if(!yu(t,n)||!Vi(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Vi(t[n],e[n]))return!1;break;default:return!1}return!0},H1=(t,e)=>e.includes(t),As=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let gt;const W1=()=>{if(gt===void 0)if(As){gt=dt();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&gt.set(e,""),e=r):e!==null&&(gt.set(e,r),e=null)}e!==null&&gt.set(e,"")}else typeof location=="object"?(gt=dt(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");gt.set(`--${rf(e,"-")}`,n),gt.set(`-${rf(e,"-")}`,n)}})):gt=dt();return gt},sc=t=>W1().has(t),ko=t=>df(As?process.env[t.toUpperCase().replaceAll("-","_")]:L1.getItem(t)),Ug=t=>sc("--"+t)||ko(t)!==null,G1=Ug("production"),Y1=As&&H1({}.FORCE_COLOR,["true","1","2"]),Q1=Y1||!sc("--no-colors")&&!Ug("no-color")&&(!As||process.stdout.isTTY)&&(!As||sc("--color")||ko("COLORTERM")!==null||(ko("TERM")||"").includes("color")),J1=t=>new Uint8Array(t),K1=t=>{const e=J1(t.byteLength);return e.set(t),e};class X1{constructor(e,n){this.left=e,this.right=n}}const bt=(t,e)=>new X1(t,e),ff=t=>t.next()>=.5,Wl=(t,e,n)=>St(t.next()*(n+1-e)+e),Bg=(t,e,n)=>St(t.next()*(n+1-e)+e),xu=(t,e,n)=>Bg(t,e,n),Z1=t=>n1(xu(t,97,122)),q1=(t,e=0,n=20)=>{const r=xu(t,e,n);let s="";for(let i=0;i<r;i++)s+=Z1(t);return s},Gl=(t,e)=>e[xu(t,0,e.length-1)],ex=Symbol("0schema");class tx{constructor(){this._rerrs=[]}extend(e,n,r,s=null){this._rerrs.push({path:e,expected:n,has:r,message:s})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(u1(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const ic=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[Ls]?$g(t,e):Ko(t)?fu(t,n=>Ng(e,r=>ic(n,r))):A1(t)?Ys(t,(n,r)=>ic(n,e[r])):!1;class Re{extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),ic(n,r)}equals(e){return this.constructor===e.constructor&&Vi(this.shape,e.shape)}[ex](){return!0}[Ls](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){ft()}get nullable(){return Ar(this,il)}get optional(){return new Wg(this)}cast(e){return hf(e,this),e}expect(e){return hf(e,this),e}}ei(Re,"_dilutes",!1);class ku extends Re{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=(e==null?void 0:e.constructor)===this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name,(e==null?void 0:e.constructor)!==this.shape?"Constructor match failed":"Check failed")),r}}const se=(t,e=null)=>new ku(t,e);se(ku);class Su extends Re{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&(n==null||n.extend(null,"custom prop",e==null?void 0:e.constructor.name,"failed to check custom prop")),r}}const pe=t=>new Su(t);se(Su);class tl extends Re{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(s=>s===e);return!r&&(n==null||n.extend(null,this.shape.join(" | "),e.toString())),r}}const nl=(...t)=>new tl(t),Vg=se(tl),nx=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),Hg=t=>{if(br.check(t))return[nx(t)];if(Vg.check(t))return t.shape.map(e=>e+"");if(em.check(t))return["[+-]?\\d+.?\\d*"];if(tm.check(t))return[".*"];if(_o.check(t))return t.shape.map(Hg).flat(1);st()};class rx extends Re{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(Hg).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&(n==null||n.extend(null,this._r.toString(),e.toString(),"String doesn't match string template.")),r}}se(rx);const sx=Symbol("optional");class Wg extends Re{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&(n==null||n.extend(null,"undefined (optional)","()")),r}get[sx](){return!0}}const ix=se(Wg);class ox extends Re{check(e,n){return n==null||n.extend(null,"never",typeof e),!1}}se(ox);const No=class No extends Re{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}get partial(){return new No(this.shape,!0)}check(e,n){return e==null?(n==null||n.extend(null,"object","null"),!1):Ys(this.shape,(r,s)=>{const i=this._isPartial&&!yu(e,s)||r.check(e[s],n);return!i&&(n==null||n.extend(s.toString(),r.toString(),typeof e[s],"Object property does not match")),i})}};ei(No,"_dilutes",!0);let So=No;const lx=t=>new So(t),ax=se(So),cx=pe(t=>t!=null&&(t.constructor===Object||t.constructor==null));class Gg extends Re{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&Ys(e,(r,s)=>{const i=this.shape.keys.check(s,n);return!i&&(n==null||n.extend(s+"","Record",typeof e,i?"Key doesn't match schema":"Value doesn't match value")),i&&this.shape.values.check(r,n)})}}const Yg=(t,e)=>new Gg(t,e),ux=se(Gg);class Qg extends Re{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&Ys(this.shape,(r,s)=>{const i=r.check(e[s],n);return!i&&(n==null||n.extend(s.toString(),"Tuple",typeof r)),i})}}const dx=(...t)=>new Qg(t);se(Qg);class Jg extends Re{constructor(e){super(),this.shape=e.length===1?e[0]:new rl(e)}check(e,n){const r=Ko(e)&&fu(e,s=>this.shape.check(s));return!r&&(n==null||n.extend(null,"Array","")),r}}const Kg=(...t)=>new Jg(t),fx=se(Jg),hx=pe(t=>Ko(t));class Xg extends Re{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name)),r}}const px=(t,e=null)=>new Xg(t,e);se(Xg);const gx=px(Re);class mx extends Re{constructor(e){super(),this.len=e.length-1,this.args=dx(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&(n==null||n.extend(null,"function",typeof e)),r}}const yx=se(mx),vx=pe(t=>typeof t=="function");class xx extends Re{constructor(e){super(),this.shape=e}check(e,n){const r=fu(this.shape,s=>s.check(e,n));return!r&&(n==null||n.extend(null,"Intersectinon",typeof e)),r}}se(xx,t=>t.shape.length>0);class rl extends Re{constructor(e){super(),this.shape=e}check(e,n){const r=Ng(this.shape,s=>s.check(e,n));return n==null||n.extend(null,"Union",typeof e),r}}ei(rl,"_dilutes",!0);const Ar=(...t)=>t.findIndex(e=>_o.check(e))>=0?Ar(...t.map(e=>Os(e)).map(e=>_o.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new rl(t),_o=se(rl),Zg=()=>!0,Co=pe(Zg),kx=se(Su,t=>t.shape===Zg),_u=pe(t=>typeof t=="bigint"),Sx=pe(t=>t===_u),qg=pe(t=>typeof t=="symbol");pe(t=>t===qg);const gr=pe(t=>typeof t=="number"),em=pe(t=>t===gr),br=pe(t=>typeof t=="string"),tm=pe(t=>t===br),sl=pe(t=>typeof t=="boolean"),_x=pe(t=>t===sl),nm=nl(void 0);se(tl,t=>t.shape.length===1&&t.shape[0]===void 0);nl(void 0);const il=nl(null),Cx=se(tl,t=>t.shape.length===1&&t.shape[0]===null);se(Uint8Array);se(ku,t=>t.shape===Uint8Array);const wx=Ar(gr,br,il,nm,_u,sl,qg);(()=>{const t=Kg(Co),e=Yg(br,Co),n=Ar(gr,br,il,sl,t,e);return t.shape=n,e.shape.values=n,n})();const Os=t=>{if(gx.check(t))return t;if(cx.check(t)){const e={};for(const n in t)e[n]=Os(t[n]);return lx(e)}else{if(hx.check(t))return Ar(...t.map(Os));if(wx.check(t))return nl(t);if(vx.check(t))return se(t)}st()},hf=G1?()=>{}:(t,e)=>{const n=new tx;if(!e.check(t,n))throw _t(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class Ex{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:Os(e),h:n}),this}else(e){return this.if(Co,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const s=this.patterns[r];if(s.if.check(e))return s.h(e,n)}throw _t("Unhandled pattern")}}}const Tx=t=>new Ex(t),rm=Tx(Co).if(em,(t,e)=>Wl(e,nf,vo)).if(tm,(t,e)=>q1(e)).if(_x,(t,e)=>ff(e)).if(Sx,(t,e)=>BigInt(Wl(e,nf,vo))).if(_o,(t,e)=>Gn(e,Gl(e,t.shape))).if(ax,(t,e)=>{const n={};for(const r in t.shape){let s=t.shape[r];if(ix.check(s)){if(ff(e))continue;s=s.shape}n[r]=rm(s,e)}return n}).if(fx,(t,e)=>{const n=[],r=Bg(e,0,42);for(let s=0;s<r;s++)n.push(Gn(e,t.shape));return n}).if(Vg,(t,e)=>Gl(e,t.shape)).if(Cx,(t,e)=>null).if(yx,(t,e)=>{const n=Gn(e,t.res);return()=>n}).if(kx,(t,e)=>Gn(e,Gl(e,[gr,br,il,nm,_u,sl,Kg(gr),Yg(Ar("a","b","c"),gr)]))).if(ux,(t,e)=>{const n={},r=Wl(e,0,3);for(let s=0;s<r;s++){const i=Gn(e,t.shape.keys),o=Gn(e,t.shape.values);n[i]=o}return n}).done(),Gn=(t,e)=>rm(Os(e),t),ol=typeof document<"u"?document:{};pe(t=>t.nodeType===Mx);typeof DOMParser<"u"&&new DOMParser;pe(t=>t.nodeType===Rx);pe(t=>t.nodeType===Px);const bx=t=>Jv(t,(e,n)=>`${n}:${e};`).join(""),Rx=ol.ELEMENT_NODE,Px=ol.TEXT_NODE,Dx=ol.DOCUMENT_NODE,Mx=ol.DOCUMENT_FRAGMENT_NODE;pe(t=>t.nodeType===Dx);const $t=Symbol,sm=$t(),im=$t(),Nx=$t(),Ix=$t(),jx=$t(),om=$t(),Lx=$t(),Cu=$t(),Ax=$t(),Ox=t=>{var s;t.length===1&&((s=t[0])==null?void 0:s.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},Fx={[sm]:bt("font-weight","bold"),[im]:bt("font-weight","normal"),[Nx]:bt("color","blue"),[jx]:bt("color","green"),[Ix]:bt("color","grey"),[om]:bt("color","red"),[Lx]:bt("color","purple"),[Cu]:bt("color","orange"),[Ax]:bt("color","black")},$x=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[],r=dt();let s=[],i=0;for(;i<t.length;i++){const l=t[i],a=Fx[l];if(a!==void 0)r.set(a.left,a.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const c=bx(r);i>0||c.length>0?(e.push("%c"+l),n.push(c)):e.push(l)}else break}}for(i>0&&(s=n,s.unshift(e.join("")));i<t.length;i++){const l=t[i];l instanceof Symbol||s.push(l)}return s},lm=Q1?$x:Ox,zx=(...t)=>{console.log(...lm(t)),am.forEach(e=>e.print(t))},Ux=(...t)=>{console.warn(...lm(t)),t.unshift(Cu),am.forEach(e=>e.print(t))},am=Er(),cm=t=>({[Symbol.iterator](){return this},next:t}),Bx=(t,e)=>cm(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Yl=(t,e)=>cm(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class wu{constructor(e,n){this.clock=e,this.len=n}}class Qs{constructor(){this.clients=new Map}}const um=(t,e,n)=>e.clients.forEach((r,s)=>{const i=t.doc.store.clients.get(s);if(i!=null){const o=i[i.length-1],l=o.id.clock+o.length;for(let a=0,c=r[a];a<r.length&&c.clock<l;c=r[++a])Cm(t,i,c.clock,c.len,n)}}),Vx=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const s=St((n+r)/2),i=t[s],o=i.clock;if(o<=e){if(e<o+i.len)return s;n=s+1}else r=s-1}return null},dm=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Vx(n,e.clock)!==null},Eu=t=>{t.clients.forEach(e=>{e.sort((s,i)=>s.clock-i.clock);let n,r;for(n=1,r=1;n<e.length;n++){const s=e[r-1],i=e[n];s.clock+s.len>=i.clock?s.len=Bn(s.len,i.clock+i.len-s.clock):(r<n&&(e[r]=i),r++)}e.length=r})},Hx=t=>{const e=new Qs;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,s)=>{if(!e.clients.has(s)){const i=r.slice();for(let o=n+1;o<t.length;o++)Xv(i,t[o].clients.get(s)||[]);e.clients.set(s,i)}});return Eu(e),e},wo=(t,e,n,r)=>{yn(t.clients,e,()=>[]).push(new wu(n,r))},Wx=()=>new Qs,Gx=t=>{const e=Wx();return t.clients.forEach((n,r)=>{const s=[];for(let i=0;i<n.length;i++){const o=n[i];if(o.deleted){const l=o.id.clock;let a=o.length;if(i+1<n.length)for(let c=n[i+1];i+1<n.length&&c.deleted;c=n[++i+1])a+=c.length;s.push(new wu(l,a))}}s.length>0&&e.clients.set(r,s)}),e},Or=(t,e)=>{F(t.restEncoder,e.clients.size),fn(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),F(t.restEncoder,n);const s=r.length;F(t.restEncoder,s);for(let i=0;i<s;i++){const o=r[i];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},Tu=t=>{const e=new Qs,n=L(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const s=L(t.restDecoder),i=L(t.restDecoder);if(i>0){const o=yn(e.clients,s,()=>[]);for(let l=0;l<i;l++)o.push(new wu(t.readDsClock(),t.readDsLen()))}}return e},pf=(t,e,n)=>{const r=new Qs,s=L(t.restDecoder);for(let i=0;i<s;i++){t.resetDsCurVal();const o=L(t.restDecoder),l=L(t.restDecoder),a=n.clients.get(o)||[],c=fe(n,o);for(let u=0;u<l;u++){const d=t.readDsClock(),f=d+t.readDsLen();if(d<c){c<f&&wo(r,o,c,f-c);let p=Ct(a,d),m=a[p];for(!m.deleted&&m.id.clock<d&&(a.splice(p+1,0,Mo(e,m,d-m.id.clock)),p++);p<a.length&&(m=a[p++],m.id.clock<f);)m.deleted||(f<m.id.clock+m.length&&a.splice(p,0,Mo(e,m,f-m.id.clock)),m.delete(e))}else wo(r,o,d,f-d)}}if(r.clients.size>0){const i=new jn;return F(i.restEncoder,0),Or(i,r),i.toUint8Array()}return null},fm=Og;class Fr extends qv{constructor({guid:e=N1(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=fm(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new Sm,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=uf(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const a=()=>uf(c=>{const u=d=>{(d===void 0||d===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;e!==null&&!this.shouldLoad&&W(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(fn(this.subdocs).map(e=>e.guid))}transact(e,n=null){return W(this,e,n)}get(e,n=ve){const r=yn(this.share,e,()=>{const i=new n;return i._integrate(this,null),i}),s=r.constructor;if(n!==ve&&s!==n)if(s===ve){const i=new n;i._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=r._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=r._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,yr)}getText(e=""){return this.get(e,Dr)}getMap(e=""){return this.get(e,Pr)}getXmlElement(e=""){return this.get(e,Mr)}getXmlFragment(e=""){return this.get(e,Ln)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,fn(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Fr({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,W(e.parent.doc,r=>{const s=n.doc;e.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class hm{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return L(this.restDecoder)}readDsLen(){return L(this.restDecoder)}}class pm extends hm{readLeftID(){return $(L(this.restDecoder),L(this.restDecoder))}readRightID(){return $(L(this.restDecoder),L(this.restDecoder))}readClient(){return L(this.restDecoder)}readInfo(){return Tr(this.restDecoder)}readString(){return pr(this.restDecoder)}readParentInfo(){return L(this.restDecoder)===1}readTypeRef(){return L(this.restDecoder)}readLen(){return L(this.restDecoder)}readAny(){return js(this.restDecoder)}readBuf(){return K1(Ue(this.restDecoder))}readJSON(){return JSON.parse(pr(this.restDecoder))}readKey(){return pr(this.restDecoder)}}class Yx{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=L(this.restDecoder),this.dsCurrVal}readDsLen(){const e=L(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Rr extends Yx{constructor(e){super(e),this.keys=[],L(e),this.keyClockDecoder=new Hl(Ue(e)),this.clientDecoder=new Bi(Ue(e)),this.leftClockDecoder=new Hl(Ue(e)),this.rightClockDecoder=new Hl(Ue(e)),this.infoDecoder=new cf(Ue(e),Tr),this.stringDecoder=new P1(Ue(e)),this.parentInfoDecoder=new cf(Ue(e),Tr),this.typeRefDecoder=new Bi(Ue(e)),this.lenDecoder=new Bi(Ue(e))}readLeftID(){return new mr(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new mr(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return js(this.restDecoder)}readBuf(){return Ue(this.restDecoder)}readJSON(){return js(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class gm{constructor(){this.restEncoder=Zo()}toUint8Array(){return vt(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){F(this.restEncoder,e)}writeDsLen(e){F(this.restEncoder,e)}}class Js extends gm{writeLeftID(e){F(this.restEncoder,e.client),F(this.restEncoder,e.clock)}writeRightID(e){F(this.restEncoder,e.client),F(this.restEncoder,e.clock)}writeClient(e){F(this.restEncoder,e)}writeInfo(e){nc(this.restEncoder,e)}writeString(e){hr(this.restEncoder,e)}writeParentInfo(e){F(this.restEncoder,e?1:0)}writeTypeRef(e){F(this.restEncoder,e)}writeLen(e){F(this.restEncoder,e)}writeAny(e){Is(this.restEncoder,e)}writeBuf(e){ze(this.restEncoder,e)}writeJSON(e){hr(this.restEncoder,JSON.stringify(e))}writeKey(e){hr(this.restEncoder,e)}}class mm{constructor(){this.restEncoder=Zo(),this.dsCurrVal=0}toUint8Array(){return vt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,F(this.restEncoder,n)}writeDsLen(e){e===0&&st(),F(this.restEncoder,e-1),this.dsCurrVal+=e}}class jn extends mm{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Vl,this.clientEncoder=new Ui,this.leftClockEncoder=new Vl,this.rightClockEncoder=new Vl,this.infoEncoder=new of(nc),this.stringEncoder=new k1,this.parentInfoEncoder=new of(nc),this.typeRefEncoder=new Ui,this.lenEncoder=new Ui}toUint8Array(){const e=Zo();return F(e,0),ze(e,this.keyClockEncoder.toUint8Array()),ze(e,this.clientEncoder.toUint8Array()),ze(e,this.leftClockEncoder.toUint8Array()),ze(e,this.rightClockEncoder.toUint8Array()),ze(e,vt(this.infoEncoder)),ze(e,this.stringEncoder.toUint8Array()),ze(e,vt(this.parentInfoEncoder)),ze(e,this.typeRefEncoder.toUint8Array()),ze(e,this.lenEncoder.toUint8Array()),qo(e,vt(this.restEncoder)),vt(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Is(this.restEncoder,e)}writeBuf(e){ze(this.restEncoder,e)}writeJSON(e){Is(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const Qx=(t,e,n,r)=>{r=Bn(r,e[0].id.clock);const s=Ct(e,r);F(t.restEncoder,e.length-s),t.writeClient(n),F(t.restEncoder,r);const i=e[s];i.write(t,r-i.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(t,0)},bu=(t,e,n)=>{const r=new Map;n.forEach((s,i)=>{fe(e,i)>s&&r.set(i,s)}),ll(e).forEach((s,i)=>{n.has(i)||r.set(i,0)}),F(t.restEncoder,r.size),fn(r.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{Qx(t,e.clients.get(s),s,i)})},Jx=(t,e)=>{const n=dt(),r=L(t.restDecoder);for(let s=0;s<r;s++){const i=L(t.restDecoder),o=new Array(i),l=t.readClient();let a=L(t.restDecoder);n.set(l,{i:0,refs:o});for(let c=0;c<i;c++){const u=t.readInfo();switch(Xo&u){case 0:{const d=t.readLen();o[c]=new Ze($(l,a),d),a+=d;break}case 10:{const d=L(t.restDecoder);o[c]=new qe($(l,a),d),a+=d;break}default:{const d=(u&(It|We))===0,f=new le($(l,a),null,(u&We)===We?t.readLeftID():null,null,(u&It)===It?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(u&Ms)===Ms?t.readString():null,Bm(t,u));o[c]=f,a+=f.length}}}}return n},Kx=(t,e,n)=>{const r=[];let s=fn(n.keys()).sort((p,m)=>p-m);if(s.length===0)return null;const i=()=>{if(s.length===0)return null;let p=n.get(s[s.length-1]);for(;p.refs.length===p.i;)if(s.pop(),s.length>0)p=n.get(s[s.length-1]);else return null;return p};let o=i();if(o===null)return null;const l=new Sm,a=new Map,c=(p,m)=>{const x=a.get(p);(x==null||x>m)&&a.set(p,m)};let u=o.refs[o.i++];const d=new Map,f=()=>{for(const p of r){const m=p.id.client,x=n.get(m);x?(x.i--,l.clients.set(m,x.refs.slice(x.i)),n.delete(m),x.i=0,x.refs=[]):l.clients.set(m,[p]),s=s.filter(w=>w!==m)}r.length=0};for(;;){if(u.constructor!==qe){const m=yn(d,u.id.client,()=>fe(e,u.id.client))-u.id.clock;if(m<0)r.push(u),c(u.id.client,u.id.clock-1),f();else{const x=u.getMissing(t,e);if(x!==null){r.push(u);const w=n.get(x)||{refs:[],i:0};if(w.refs.length===w.i)c(x,fe(e,x)),f();else{u=w.refs[w.i++];continue}}else(m===0||m<u.length)&&(u.integrate(t,m),d.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=i(),o===null)break;u=o.refs[o.i++]}}if(l.clients.size>0){const p=new jn;return bu(p,l,new Map),F(p.restEncoder,0),{missing:a,update:p.toUint8Array()}}return null},Xx=(t,e)=>bu(t,e.doc.store,e.beforeState),Zx=(t,e,n,r=new Rr(t))=>W(e,s=>{s.local=!1;let i=!1;const o=s.doc,l=o.store,a=Jx(r,o),c=Kx(s,l,a),u=l.pendingStructs;if(u){for(const[f,p]of u.missing)if(p<fe(l,f)){i=!0;break}if(c){for(const[f,p]of c.missing){const m=u.missing.get(f);(m==null||m>p)&&u.missing.set(f,p)}u.update=Eo([u.update,c.update])}}else l.pendingStructs=c;const d=pf(r,s,l);if(l.pendingDs){const f=new Rr(Lr(l.pendingDs));L(f.restDecoder);const p=pf(f,s,l);d&&p?l.pendingDs=Eo([d,p]):l.pendingDs=d||p}else l.pendingDs=d;if(i){const f=l.pendingStructs.update;l.pendingStructs=null,ym(s.doc,f)}},n,!1),ym=(t,e,n,r=Rr)=>{const s=Lr(e);Zx(s,t,n,new r(s))},gf=(t,e,n)=>ym(t,e,n,pm),qx=(t,e,n=new Map)=>{bu(t,e.store,n),Or(t,Gx(e.store))},ek=(t,e=new Uint8Array([0]),n=new jn)=>{const r=vm(e);qx(n,t,r);const s=[n.toUint8Array()];if(t.store.pendingDs&&s.push(t.store.pendingDs),t.store.pendingStructs&&s.push(mk(t.store.pendingStructs.update,e)),s.length>1){if(n.constructor===Js)return pk(s.map((i,o)=>o===0?i:vk(i)));if(n.constructor===jn)return Eo(s)}return s[0]},tk=(t,e)=>ek(t,e,new Js),nk=t=>{const e=new Map,n=L(t.restDecoder);for(let r=0;r<n;r++){const s=L(t.restDecoder),i=L(t.restDecoder);e.set(s,i)}return e},vm=t=>nk(new hm(Lr(t))),xm=(t,e)=>(F(t.restEncoder,e.size),fn(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{F(t.restEncoder,n),F(t.restEncoder,r)}),t),rk=(t,e)=>xm(t,ll(e.store)),sk=(t,e=new mm)=>(t instanceof Map?xm(e,t):rk(e,t),e.toUint8Array()),ik=t=>sk(t,new gm);class ok{constructor(){this.l=[]}}const mf=()=>new ok,yf=(t,e)=>t.l.push(e),vf=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(s=>e!==s),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},km=(t,e,n)=>vu(t.l,[e,n]);class mr{constructor(e,n){this.client=e,this.clock=n}}const vi=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,$=(t,e)=>new mr(t,e),lk=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw st()},Yn=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!dm(e.ds,t.id),oc=(t,e)=>{const n=yn(t.meta,oc,Er),r=t.doc.store;n.has(e)||(e.sv.forEach((s,i)=>{s<fe(r,i)&&hn(t,$(i,s))}),um(t,e.ds,s=>{}),n.add(e))};class Sm{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const ll=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const s=n[n.length-1];e.set(r,s.id.clock+s.length)}),e},fe=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},_m=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw st()}n.push(e)},Ct=(t,e)=>{let n=0,r=t.length-1,s=t[r],i=s.id.clock;if(i===e)return r;let o=St(e/(i+s.length-1)*r);for(;n<=r;){if(s=t[o],i=s.id.clock,i<=e){if(e<i+s.length)return o;n=o+1}else r=o-1;o=St((n+r)/2)}throw st()},ak=(t,e)=>{const n=t.clients.get(e.client);return n[Ct(n,e.clock)]},Ql=ak,lc=(t,e,n)=>{const r=Ct(e,n),s=e[r];return s.id.clock<n&&s instanceof le?(e.splice(r+1,0,Mo(t,s,n-s.id.clock)),r+1):r},hn=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[lc(t,n,e.clock)]},xf=(t,e,n)=>{const r=e.clients.get(n.client),s=Ct(r,n.clock),i=r[s];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Ze&&r.splice(s+1,0,Mo(t,i,n.clock-i.id.clock+1)),i},ck=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Ct(r,e.id.clock)]=n},Cm=(t,e,n,r,s)=>{if(r===0)return;const i=n+r;let o=lc(t,e,n),l;do l=e[o++],i<l.id.clock+l.length&&lc(t,e,i),s(l);while(o<e.length&&e[o].id.clock<i)};class uk{constructor(e,n,r){this.doc=e,this.deleteSet=new Qs,this.beforeState=ll(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const kf=(t,e)=>e.deleteSet.clients.size===0&&!Kv(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Eu(e.deleteSet),Xx(t,e),Or(t,e.deleteSet),!0),Sf=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&yn(t.changed,e,Er).add(n)},Hi=(t,e)=>{let n=t[e],r=t[e-1],s=e;for(;s>0;n=r,r=t[--s-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof le&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=e-s;return i&&t.splice(e+1-i,i),i},dk=(t,e,n)=>{for(const[r,s]of t.clients.entries()){const i=e.clients.get(r);for(let o=s.length-1;o>=0;o--){const l=s[o],a=l.clock+l.len;for(let c=Ct(i,l.clock),u=i[c];c<i.length&&u.id.clock<a;u=i[++c]){const d=i[c];if(l.clock+l.len<=d.id.clock)break;d instanceof le&&d.deleted&&!d.keep&&n(d)&&d.gc(e,!1)}}}},fk=(t,e)=>{t.clients.forEach((n,r)=>{const s=e.clients.get(r);for(let i=n.length-1;i>=0;i--){const o=n[i],l=Ig(s.length-1,1+Ct(s,o.clock+o.len-1));for(let a=l,c=s[a];a>0&&c.id.clock>=o.clock;c=s[a])a-=1+Hi(s,a)}})},wm=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,s=r.store,i=n.deleteSet,o=n._mergeStructs;try{Eu(i),n.afterState=ll(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((a,c)=>l.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,a)})),l.push(()=>{n.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(u=>u.target._item===null||!u.target._item.deleted),a.forEach(u=>{u.currentTarget=c,u._path=null}),a.sort((u,d)=>u.path.length-d.path.length),l.push(()=>{km(c._dEH,a,n)}))}),l.push(()=>r.emit("afterTransaction",[n,r])),l.push(()=>{n._needFormattingCleanup&&Nk(n)})}),vu(l,[])}finally{r.gc&&dk(i,s,r.gcFilter),fk(i,s),n.afterState.forEach((u,d)=>{const f=n.beforeState.get(d)||0;if(f!==u){const p=s.clients.get(d),m=Bn(Ct(p,f),1);for(let x=p.length-1;x>=m;)x-=1+Hi(p,x)}});for(let u=o.length-1;u>=0;u--){const{client:d,clock:f}=o[u].id,p=s.clients.get(d),m=Ct(p,f);m+1<p.length&&Hi(p,m+1)>1||m>0&&Hi(p,m)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(zx(Cu,sm,"[yjs] ",im,om,"Changed the client-id because another client seems to be using it."),r.clientID=fm()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new Js;kf(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new jn;kf(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=n;(l.size>0||c.size>0||a.size>0)&&(l.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:a,added:l,removed:c},r,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):wm(t,e+1)}}},W=(t,e,n=null,r=!0)=>{const s=t._transactionCleanups;let i=!1,o=null;t._transaction===null&&(i=!0,t._transaction=new uk(t,n,r),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(i){const l=t._transaction===s[0];t._transaction=null,l&&wm(s,0)}}return o};function*hk(t){const e=L(t.restDecoder);for(let n=0;n<e;n++){const r=L(t.restDecoder),s=t.readClient();let i=L(t.restDecoder);for(let o=0;o<r;o++){const l=t.readInfo();if(l===10){const a=L(t.restDecoder);yield new qe($(s,i),a),i+=a}else if(Xo&l){const a=(l&(It|We))===0,c=new le($(s,i),null,(l&We)===We?t.readLeftID():null,null,(l&It)===It?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(l&Ms)===Ms?t.readString():null,Bm(t,l));yield c,i+=c.length}else{const a=t.readLen();yield new Ze($(s,i),a),i+=a}}}}class Ru{constructor(e,n){this.gen=hk(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===qe);return this.curr}}class Pu{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const pk=t=>Eo(t,pm,Js),gk=(t,e)=>{if(t.constructor===Ze){const{client:n,clock:r}=t.id;return new Ze($(n,r+e),t.length-e)}else if(t.constructor===qe){const{client:n,clock:r}=t.id;return new qe($(n,r+e),t.length-e)}else{const n=t,{client:r,clock:s}=n.id;return new le($(r,s+e),null,$(r,s+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Eo=(t,e=Rr,n=jn)=>{if(t.length===1)return t[0];const r=t.map(u=>new e(Lr(u)));let s=r.map(u=>new Ru(u,!0)),i=null;const o=new n,l=new Pu(o);for(;s=s.filter(f=>f.curr!==null),s.sort((f,p)=>{if(f.curr.id.client===p.curr.id.client){const m=f.curr.id.clock-p.curr.id.clock;return m===0?f.curr.constructor===p.curr.constructor?0:f.curr.constructor===qe?1:-1:m}else return p.curr.id.client-f.curr.id.client}),s.length!==0;){const u=s[0],d=u.curr.id.client;if(i!==null){let f=u.curr,p=!1;for(;f!==null&&f.id.clock+f.length<=i.struct.id.clock+i.struct.length&&f.id.client>=i.struct.id.client;)f=u.next(),p=!0;if(f===null||f.id.client!==d||p&&f.id.clock>i.struct.id.clock+i.struct.length)continue;if(d!==i.struct.id.client)Qt(l,i.struct,i.offset),i={struct:f,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<f.id.clock)if(i.struct.constructor===qe)i.struct.length=f.id.clock+f.length-i.struct.id.clock;else{Qt(l,i.struct,i.offset);const m=f.id.clock-i.struct.id.clock-i.struct.length;i={struct:new qe($(d,i.struct.id.clock+i.struct.length),m),offset:0}}else{const m=i.struct.id.clock+i.struct.length-f.id.clock;m>0&&(i.struct.constructor===qe?i.struct.length-=m:f=gk(f,m)),i.struct.mergeWith(f)||(Qt(l,i.struct,i.offset),i={struct:f,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let f=u.curr;f!==null&&f.id.client===d&&f.id.clock===i.struct.id.clock+i.struct.length&&f.constructor!==qe;f=u.next())Qt(l,i.struct,i.offset),i={struct:f,offset:0}}i!==null&&(Qt(l,i.struct,i.offset),i=null),Du(l);const a=r.map(u=>Tu(u)),c=Hx(a);return Or(o,c),o.toUint8Array()},mk=(t,e,n=Rr,r=jn)=>{const s=vm(e),i=new r,o=new Pu(i),l=new n(Lr(t)),a=new Ru(l,!1);for(;a.curr;){const u=a.curr,d=u.id.client,f=s.get(d)||0;if(a.curr.constructor===qe){a.next();continue}if(u.id.clock+u.length>f)for(Qt(o,u,Bn(f-u.id.clock,0)),a.next();a.curr&&a.curr.id.client===d;)Qt(o,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===d&&a.curr.id.clock+a.curr.length<=f;)a.next()}Du(o);const c=Tu(l);return Or(i,c),i.toUint8Array()},Em=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:vt(t.encoder.restEncoder)}),t.encoder.restEncoder=Zo(),t.written=0)},Qt=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Em(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),F(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Du=t=>{Em(t);const e=t.encoder.restEncoder;F(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];F(e,r.written),qo(e,r.restEncoder)}},yk=(t,e,n,r)=>{const s=new n(Lr(t)),i=new Ru(s,!1),o=new r,l=new Pu(o);for(let c=i.curr;c!==null;c=i.next())Qt(l,e(c),0);Du(l);const a=Tu(s);return Or(o,a),o.toUint8Array()},vk=t=>yk(t,V1,Rr,Js),_f="You must not compute changes after the event-handler fired.";class al{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=xk(this.currentTarget,this.target))}deletes(e){return dm(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw _t(_f);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const i=n._map.get(s);let o,l;if(this.adds(i)){let a=i.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(i))if(a!==null&&this.deletes(a))o="delete",l=zl(a.content.getContent());else return;else a!==null&&this.deletes(a)?(o="update",l=zl(a.content.getContent())):(o="add",l=void 0)}else if(this.deletes(i))o="delete",l=zl(i.content.getContent());else return;e.set(s,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw _t(_f);const n=this.target,r=Er(),s=Er(),i=[];if(e={added:r,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const a=()=>{l&&i.push(l)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((l===null||l.delete===void 0)&&(a(),l={delete:0}),l.delete+=c.length,s.add(c)):this.adds(c)?((l===null||l.insert===void 0)&&(a(),l={insert:[]}),l.insert=l.insert.concat(c.content.getContent()),r.add(c)):((l===null||l.retain===void 0)&&(a(),l={retain:0}),l.retain+=c.length);l!==null&&l.retain===void 0&&a()}this._changes=e}return e}}const xk=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(r+=s.length),s=s.right;n.unshift(r)}e=e._item.parent}return n},Ee=()=>{Ux("Invalid access: Add Yjs type to a document before reading data.")},Tm=80;let Mu=0;class kk{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=Mu++}}const Sk=t=>{t.timestamp=Mu++},bm=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Mu++},_k=(t,e,n)=>{if(t.length>=Tm){const r=t.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return bm(r,e,n),r}else{const r=new kk(e,n);return t.push(r),r}},cl=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((i,o)=>zi(e-i.index)<zi(e-o.index)?i:o);let r=t._start,s=0;for(n!==null&&(r=n.p,s=n.index,Sk(n));r.right!==null&&s<e;){if(!r.deleted&&r.countable){if(e<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>e;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&zi(n.index-s)<r.parent.length/Tm?(bm(n,r,s),n):_k(t._searchMarker,r,s)},Fs=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const s=t[r];if(n>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){t.splice(r,1);continue}s.p=i,i.marker=!0}(e<s.index||n>0&&e===s.index)&&(s.index=Bn(e,s.index+n))}},ul=(t,e,n)=>{const r=t,s=e.changedParentTypes;for(;yn(s,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;km(r._eH,n,e)};class ve{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=mf(),this._dEH=mf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw ft()}clone(){throw ft()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){yf(this._eH,e)}observeDeep(e){yf(this._dEH,e)}unobserve(e){vf(this._eH,e)}unobserveDeep(e){vf(this._dEH,e)}toJSON(){}}const Rm=(t,e,n)=>{t.doc??Ee(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const s=[];let i=t._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const o=i.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&r>0;l++)s.push(o[l]),r--;e=0}}i=i.right}return s},Pm=t=>{t.doc??Ee();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)e.push(r[s])}n=n.right}return e},$s=(t,e)=>{let n=0,r=t._start;for(t.doc??Ee();r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let i=0;i<s.length;i++)e(s[i],n++,t)}r=r.right}},Dm=(t,e)=>{const n=[];return $s(t,(r,s)=>{n.push(e(r,s,t))}),n},Ck=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},Mm=(t,e)=>{t.doc??Ee();const n=cl(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},To=(t,e,n,r)=>{let s=n;const i=t.doc,o=i.clientID,l=i.store,a=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(s=new le($(o,fe(l,o)),s,s&&s.lastId,a,a&&a.id,e,null,new An(c)),s.integrate(t,0),c=[])};r.forEach(d=>{if(d===null)c.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:s=new le($(o,fe(l,o)),s,s&&s.lastId,a,a&&a.id,e,null,new Ks(new Uint8Array(d))),s.integrate(t,0);break;case Fr:s=new le($(o,fe(l,o)),s,s&&s.lastId,a,a&&a.id,e,null,new Xs(d)),s.integrate(t,0);break;default:if(d instanceof ve)s=new le($(o,fe(l,o)),s,s&&s.lastId,a,a&&a.id,e,null,new zt(d)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},Nm=()=>_t("Length exceeded!"),Im=(t,e,n,r)=>{if(n>e._length)throw Nm();if(n===0)return e._searchMarker&&Fs(e._searchMarker,n,r.length),To(t,e,null,r);const s=n,i=cl(e,n);let o=e._start;for(i!==null&&(o=i.p,n-=i.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&hn(t,$(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&Fs(e._searchMarker,s,r.length),To(t,e,o,r)},wk=(t,e,n)=>{let s=(e._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return To(t,e,s,n)},jm=(t,e,n,r)=>{if(r===0)return;const s=n,i=r,o=cl(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&hn(t,$(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&hn(t,$(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw Nm();e._searchMarker&&Fs(e._searchMarker,s,-i+r)},bo=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},Nu=(t,e,n,r)=>{const s=e._map.get(n)||null,i=t.doc,o=i.clientID;let l;if(r==null)l=new An([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new An([r]);break;case Uint8Array:l=new Ks(r);break;case Fr:l=new Xs(r);break;default:if(r instanceof ve)l=new zt(r);else throw new Error("Unexpected content type")}new le($(o,fe(i.store,o)),s,s&&s.lastId,null,null,e,n,l).integrate(t,0)},Iu=(t,e)=>{t.doc??Ee();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Lm=t=>{const e={};return t.doc??Ee(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},Am=(t,e)=>{t.doc??Ee();const n=t._map.get(e);return n!==void 0&&!n.deleted},Ek=(t,e)=>{const n={};return t._map.forEach((r,s)=>{let i=r;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&Yn(i,e)&&(n[s]=i.content.getContent()[i.length-1])}),n},xi=t=>(t.doc??Ee(),Bx(t._map.entries(),e=>!e[1].deleted));class Tk extends al{}class yr extends ve{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new yr;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new yr}clone(){const e=new yr;return e.insert(0,this.toArray().map(n=>n instanceof ve?n.clone():n)),e}get length(){return this.doc??Ee(),this._length}_callObserver(e,n){super._callObserver(e,n),ul(this,e,new Tk(this,e))}insert(e,n){this.doc!==null?W(this.doc,r=>{Im(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?W(this.doc,n=>{wk(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?W(this.doc,r=>{jm(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Mm(this,e)}toArray(){return Pm(this)}slice(e=0,n=this.length){return Rm(this,e,n)}toJSON(){return this.map(e=>e instanceof ve?e.toJSON():e)}map(e){return Dm(this,e)}forEach(e){$s(this,e)}[Symbol.iterator](){return Ck(this)}_write(e){e.writeTypeRef(Xk)}}const bk=t=>new yr;class Rk extends al{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Pr extends ve{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new Pr}clone(){const e=new Pr;return this.forEach((n,r)=>{e.set(r,n instanceof ve?n.clone():n)}),e}_callObserver(e,n){ul(this,e,new Rk(this,e,n))}toJSON(){this.doc??Ee();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];e[r]=s instanceof ve?s.toJSON():s}}),e}get size(){return[...xi(this)].length}keys(){return Yl(xi(this),e=>e[0])}values(){return Yl(xi(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Yl(xi(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Ee(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?W(this.doc,n=>{bo(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?W(this.doc,r=>{Nu(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Iu(this,e)}has(e){return Am(this,e)}clear(){this.doc!==null?W(this.doc,e=>{this.forEach(function(n,r,s){bo(e,s,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Zk)}}const Pk=t=>new Pr,qt=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&U1(t,e);class ac{constructor(e,n,r,s){this.left=e,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&st(),this.right.content.constructor){case ae:this.right.deleted||$r(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Cf=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case ae:e.right.deleted||$r(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&hn(t,$(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},ki=(t,e,n,r)=>{const s=new Map,i=r?cl(e,n):null;if(i){const o=new ac(i.p.left,i.p,i.index,s);return Cf(t,o,n-i.index)}else{const o=new ac(null,e._start,0,s);return Cf(t,o,n)}},Om=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===ae&&qt(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=t.doc,i=s.clientID;r.forEach((o,l)=>{const a=n.left,c=n.right,u=new le($(i,fe(s.store,i)),a,a&&a.lastId,c,c&&c.id,e,null,new ae(l,o));u.integrate(t,0),n.right=u,n.forward()})},$r=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},Fm=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===ae&&qt(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},$m=(t,e,n,r)=>{const s=t.doc,i=s.clientID,o=new Map;for(const l in r){const a=r[l],c=n.currentAttributes.get(l)??null;if(!qt(c,a)){o.set(l,c);const{left:u,right:d}=n;n.right=new le($(i,fe(s.store,i)),u,u&&u.lastId,d,d&&d.id,e,null,new ae(l,a)),n.right.integrate(t,0),n.forward()}}return o},Jl=(t,e,n,r,s)=>{n.currentAttributes.forEach((f,p)=>{s[p]===void 0&&(s[p]=null)});const i=t.doc,o=i.clientID;Fm(n,s);const l=$m(t,e,n,s),a=r.constructor===String?new wt(r):r instanceof ve?new zt(r):new Vn(r);let{left:c,right:u,index:d}=n;e._searchMarker&&Fs(e._searchMarker,n.index,a.getLength()),u=new le($(o,fe(i.store,o)),c,c&&c.lastId,u,u&&u.id,e,null,a),u.integrate(t,0),n.right=u,n.index=d,n.forward(),Om(t,e,n,l)},wf=(t,e,n,r,s)=>{const i=t.doc,o=i.clientID;Fm(n,s);const l=$m(t,e,n,s);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===ae));){if(!n.right.deleted)switch(n.right.content.constructor){case ae:{const{key:a,value:c}=n.right.content,u=s[a];if(u!==void 0){if(qt(u,c))l.delete(a);else{if(r===0)break e;l.set(a,c)}n.right.delete(t)}else n.currentAttributes.set(a,c);break}default:r<n.right.length&&hn(t,$(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let a="";for(;r>0;r--)a+=`
`;n.right=new le($(o,fe(i.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new wt(a)),n.right.integrate(t,0),n.forward()}Om(t,e,n,l)},zm=(t,e,n,r,s)=>{let i=e;const o=dt();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===ae){const c=i.content;o.set(c.key,c)}i=i.right}let l=0,a=!1;for(;e!==i;){if(n===e&&(a=!0),!e.deleted){const c=e.content;switch(c.constructor){case ae:{const{key:u,value:d}=c,f=r.get(u)??null;(o.get(u)!==c||f===d)&&(e.delete(t),l++,!a&&(s.get(u)??null)===d&&f!==d&&(f===null?s.delete(u):s.set(u,f))),!a&&!e.deleted&&$r(s,c);break}}}e=e.right}return l},Dk=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===ae){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Mk=t=>{let e=0;return W(t.doc,n=>{let r=t._start,s=t._start,i=dt();const o=ec(i);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case ae:$r(o,s.content);break;default:e+=zm(n,r,s,i,o),i=ec(o),r=s;break}s=s.right}}),e},Nk=t=>{const e=new Set,n=t.doc;for(const[r,s]of t.afterState.entries()){const i=t.beforeState.get(r)||0;s!==i&&Cm(t,n.store.clients.get(r),i,s,o=>{!o.deleted&&o.content.constructor===ae&&o.constructor!==Ze&&e.add(o.parent)})}W(n,r=>{um(t,t.deleteSet,s=>{if(s instanceof Ze||!s.parent._hasFormatting||e.has(s.parent))return;const i=s.parent;s.content.constructor===ae?e.add(i):Dk(r,s)});for(const s of e)Mk(s)})},Ef=(t,e,n)=>{const r=n,s=ec(e.currentAttributes),i=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case zt:case Vn:case wt:n<e.right.length&&hn(t,$(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}i&&zm(t,i,e.right,s,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Fs(o._searchMarker,e.index,-r+n),e};class Ik extends al{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];W(e,r=>{const s=new Map,i=new Map;let o=this.target._start,l=null;const a={};let c="",u=0,d=0;const f=()=>{if(l!==null){let p=null;switch(l){case"delete":d>0&&(p={delete:d}),d=0;break;case"insert":(typeof c=="object"||c.length>0)&&(p={insert:c},s.size>0&&(p.attributes={},s.forEach((m,x)=>{m!==null&&(p.attributes[x]=m)}))),c="";break;case"retain":u>0&&(p={retain:u},z1(a)||(p.attributes=O1({},a))),u=0;break}p&&n.push(p),l=null}};for(;o!==null;){switch(o.content.constructor){case zt:case Vn:this.adds(o)?this.deletes(o)||(f(),l="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(l!=="delete"&&(f(),l="delete"),d+=1):o.deleted||(l!=="retain"&&(f(),l="retain"),u+=1);break;case wt:this.adds(o)?this.deletes(o)||(l!=="insert"&&(f(),l="insert"),c+=o.content.str):this.deletes(o)?(l!=="delete"&&(f(),l="delete"),d+=o.length):o.deleted||(l!=="retain"&&(f(),l="retain"),u+=o.length);break;case ae:{const{key:p,value:m}=o.content;if(this.adds(o)){if(!this.deletes(o)){const x=s.get(p)??null;qt(x,m)?m!==null&&o.delete(r):(l==="retain"&&f(),qt(m,i.get(p)??null)?delete a[p]:a[p]=m)}}else if(this.deletes(o)){i.set(p,m);const x=s.get(p)??null;qt(x,m)||(l==="retain"&&f(),a[p]=x)}else if(!o.deleted){i.set(p,m);const x=a[p];x!==void 0&&(qt(x,m)?x!==null&&o.delete(r):(l==="retain"&&f(),m===null?delete a[p]:a[p]=m))}o.deleted||(l==="insert"&&f(),$r(s,o.content));break}}o=o.right}for(f();n.length>0;){const p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Dr extends ve{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Ee(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Dr}clone(){const e=new Dr;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new Ik(this,e,n);ul(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Ee();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===wt&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?W(this.doc,r=>{const s=new ac(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&i===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&Jl(r,this,s,l,o.attributes||{})}else o.retain!==void 0?wf(r,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&Ef(r,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Ee();const s=[],i=new Map,o=this.doc;let l="",a=this._start;function c(){if(l.length>0){const d={};let f=!1;i.forEach((m,x)=>{f=!0,d[x]=m});const p={insert:l};f&&(p.attributes=d),s.push(p),l=""}}const u=()=>{for(;a!==null;){if(Yn(a,e)||n!==void 0&&Yn(a,n))switch(a.content.constructor){case wt:{const d=i.get("ychange");e!==void 0&&!Yn(a,e)?(d===void 0||d.user!==a.id.client||d.type!=="removed")&&(c(),i.set("ychange",r?r("removed",a.id):{type:"removed"})):n!==void 0&&!Yn(a,n)?(d===void 0||d.user!==a.id.client||d.type!=="added")&&(c(),i.set("ychange",r?r("added",a.id):{type:"added"})):d!==void 0&&(c(),i.delete("ychange")),l+=a.content.str;break}case zt:case Vn:{c();const d={insert:a.content.getContent()[0]};if(i.size>0){const f={};d.attributes=f,i.forEach((p,m)=>{f[m]=p})}s.push(d);break}case ae:Yn(a,e)&&(c(),$r(i,a.content));break}a=a.right}c()};return e||n?W(o,d=>{e&&oc(d,e),n&&oc(d,n),u()},"cleanup"):u(),s}insert(e,n,r){if(n.length<=0)return;const s=this.doc;s!==null?W(s,i=>{const o=ki(i,this,e,!r);r||(r={},o.currentAttributes.forEach((l,a)=>{r[a]=l})),Jl(i,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const s=this.doc;s!==null?W(s,i=>{const o=ki(i,this,e,!r);Jl(i,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?W(r,s=>{Ef(s,ki(s,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const s=this.doc;s!==null?W(s,i=>{const o=ki(i,this,e,!1);o.right!==null&&wf(i,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?W(this.doc,n=>{bo(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?W(this.doc,r=>{Nu(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Iu(this,e)}getAttributes(){return Lm(this)}_write(e){e.writeTypeRef(qk)}}const jk=t=>new Dr;class Kl{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Ee()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Mr||n.constructor===Ln)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Ln extends ve{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ln}clone(){const e=new Ln;return e.insert(0,this.toArray().map(n=>n instanceof ve?n.clone():n)),e}get length(){return this.doc??Ee(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Kl(this,e)}querySelector(e){e=e.toUpperCase();const r=new Kl(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),fn(new Kl(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){ul(this,e,new Ok(this,n,e))}toString(){return Dm(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const s=e.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),$s(this,i=>{s.insertBefore(i.toDOM(e,n,r),null)}),s}insert(e,n){this.doc!==null?W(this.doc,r=>{Im(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)W(this.doc,r=>{const s=e&&e instanceof ve?e._item:e;To(r,this,s,n)});else{const r=this._prelimContent,s=e===null?0:r.findIndex(i=>i===e)+1;if(s===0&&e!==null)throw _t("Reference item not found");r.splice(s,0,...n)}}delete(e,n=1){this.doc!==null?W(this.doc,r=>{jm(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Pm(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Mm(this,e)}slice(e=0,n=this.length){return Rm(this,e,n)}forEach(e){$s(this,e)}_write(e){e.writeTypeRef(tS)}}const Lk=t=>new Ln;class Mr extends Ln{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new Mr(this.nodeName)}clone(){const e=new Mr(this.nodeName),n=this.getAttributes();return $1(n,(r,s)=>{e.setAttribute(s,r)}),e.insert(0,this.toArray().map(r=>r instanceof ve?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const s=r.length;for(let l=0;l<s;l++){const a=r[l];n.push(a+'="'+e[a]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?W(this.doc,n=>{bo(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?W(this.doc,r=>{Nu(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Iu(this,e)}hasAttribute(e){return Am(this,e)}getAttributes(e){return e?Ek(this,e):Lm(this)}toDOM(e=document,n={},r){const s=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const l=i[o];typeof l=="string"&&s.setAttribute(o,l)}return $s(this,o=>{s.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(eS),e.writeKey(this.nodeName)}}const Ak=t=>new Mr(t.readKey());class Ok extends al{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Ro extends Pr{constructor(e){super(),this.hookName=e}_copy(){return new Ro(this.hookName)}clone(){const e=new Ro(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const s=n[this.hookName];let i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(nS),e.writeKey(this.hookName)}}const Fk=t=>new Ro(t.readKey());class Po extends Dr{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Po}clone(){const e=new Po;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const s=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const n=[];for(const s in e.attributes){const i=[];for(const o in e.attributes[s])i.push({key:o,value:e.attributes[s][o]});i.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:s,attrs:i})}n.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const i=n[s];r+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){const l=i.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(rS)}}const $k=t=>new Po;class ju{constructor(e,n){this.id=e,this.length=n}get deleted(){throw ft()}mergeWith(e){return!1}write(e,n,r){throw ft()}integrate(e,n){throw ft()}}const zk=0;class Ze extends ju{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),_m(e.doc.store,this)}write(e,n){e.writeInfo(zk),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Ks{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ks(this.content)}splice(e){throw ft()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const Uk=t=>new Ks(t.readBuf());class zs{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new zs(this.len)}splice(e){const n=new zs(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){wo(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Bk=t=>new zs(t.readLen()),Um=(t,e)=>new Fr({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Xs{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Xs(Um(this.doc.guid,this.opts))}splice(e){throw ft()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Vk=t=>new Xs(Um(t.readString(),t.readAny()));class Vn{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Vn(this.embed)}splice(e){throw ft()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const Hk=t=>new Vn(t.readJSON());class ae{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ae(this.key,this.value)}splice(e){throw ft()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Wk=t=>new ae(t.readKey(),t.readJSON());class Do{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Do(this.arr)}splice(e){const n=new Do(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const Gk=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const s=t.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new Do(n)},Yk=ko("node_env")==="development";class An{constructor(e){this.arr=e,Yk&&zg(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new An(this.arr)}splice(e){const n=new An(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];e.writeAny(i)}}getRef(){return 8}}const Qk=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new An(n)};class wt{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new wt(this.str)}splice(e){const n=new wt(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Jk=t=>new wt(t.readString()),Kk=[bk,Pk,jk,Ak,Lk,Fk,$k],Xk=0,Zk=1,qk=2,eS=3,tS=4,nS=5,rS=6;class zt{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new zt(this.type._copy())}splice(e){throw ft()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const sS=t=>new zt(Kk[t.readTypeRef()](t)),Mo=(t,e,n)=>{const{client:r,clock:s}=e.id,i=new le($(r,s+n),e,$(r,s+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=$(e.redone.client,e.redone.clock+n)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=n,i};class le extends ju{constructor(e,n,r,s,i,o,l,a){super(e,a.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=l,this.redone=null,this.content=a,this.info=this.content.isCountable()?tf:0}set marker(e){(this.info&Bl)>0!==e&&(this.info^=Bl)}get marker(){return(this.info&Bl)>0}get keep(){return(this.info&ef)>0}set keep(e){this.keep!==e&&(this.info^=ef)}get countable(){return(this.info&tf)>0}get deleted(){return(this.info&Ul)>0}set deleted(e){this.deleted!==e&&(this.info^=Ul)}markDeleted(){this.info|=Ul}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=fe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=fe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===mr&&this.id.client!==this.parent.client&&this.parent.clock>=fe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=xf(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=hn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ze||this.right&&this.right.constructor===Ze)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===le?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===le&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===mr){const r=Ql(n,this.parent);r.constructor===Ze?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=xf(e,e.doc.store,$(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),vi(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,i.clear();else if(vi(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(Ql(e.doc.store,s.origin)))i.has(Ql(e.doc.store,s.origin))||(r=s,i.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),_m(e.doc.store,this),this.content.integrate(e,this),Sf(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Ze(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:$(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&vi(e.origin,this.lastId)&&this.right===e&&vi(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),wo(e.deleteSet,this.id.client,this.id.clock,this.length),Sf(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw st();this.content.gc(e),n?ck(e,this,new Ze(this.id,this.length)):this.content=new zs(this.length)}write(e,n){const r=n>0?$(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&Xo|(r===null?0:We)|(s===null?0:It)|(i===null?0:Ms);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),s!==null&&e.writeRightID(s),r===null&&s===null){const l=this.parent;if(l._item!==void 0){const a=l._item;if(a===null){const c=lk(l);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===mr?(e.writeParentInfo(!1),e.writeLeftID(l)):st();i!==null&&e.writeString(i)}this.content.write(e,n)}}const Bm=(t,e)=>iS[e&Xo](t),iS=[()=>{st()},Bk,Gk,Uk,Jk,Hk,Wk,sS,Qk,Vk,()=>{st()}],oS=10;class qe extends ju{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){st()}write(e,n){e.writeInfo(oS),F(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const Vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Hm="__ $YJS$ __";Vm[Hm]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Vm[Hm]=!0;class lS extends Bp{constructor(e){super(),this.signalingServer=e,this.peer=null,this.connections=new Map,this.isHost=!1,this._peerId=null,this.connectedUsers=new Map,this.doc=new Fr,this.annotationsMap=this.doc.getMap("annotations"),this.sessionMap=this.doc.getMap("session"),this.usersMap=this.doc.getMap("users"),this.doc.on("update",(n,r)=>{r!==this&&this.broadcast({type:"update",data:n})})}get isHostUser(){return this.isHost}get peerId(){return this._peerId}async createSession(){return this.isHost=!0,this.initPeer()}async connect(e){return this.isHost=!1,await this.initPeer(),this.connectToPeer(e),this._peerId}disconnect(){var e;this.connections.forEach(n=>n.close()),this.connections.clear(),(e=this.peer)==null||e.destroy(),this.peer=null,this.emit("disconnected")}initPeer(){return new Promise((e,n)=>{const r=this.signalingServer?{host:this.signalingServer.host,port:this.signalingServer.port,path:this.signalingServer.path}:void 0;this.peer=new qa(void 0,{...r,debug:1}),this.peer.on("open",s=>{this._peerId=s,this.emit("ready",s),e(s)}),this.peer.on("connection",s=>{this.handleConnection(s)}),this.peer.on("error",s=>{console.error("PeerJS Error:",s),this.emit("error",s)}),this.peer.on("disconnected",()=>{this.emit("disconnected")})})}connectToPeer(e){if(!this.peer)return;const n=this.peer.connect(e,{reliable:!0});this.handleConnection(n)}handleConnection(e){e.on("open",()=>{this.connections.set(e.peer,e),this.emit("connection:open",e.peer),this.emit("stats",this.getStats());const n=ik(this.doc);e.open&&e.send({type:"sync-step-1",data:n}),this.emit("request-announce"),this.isHost&&this.connectedUsers.forEach(r=>{e.open&&e.send({type:"announce-user",user:r})})}),e.on("data",n=>{n&&typeof n=="object"&&this.handleMessage(e,n)}),e.on("close",()=>{this.connectedUsers.has(e.peer)&&(this.connectedUsers.delete(e.peer),this.emit("users:changed",Array.from(this.connectedUsers.values()))),this.connections.delete(e.peer),this.emit("connection:close",e.peer),this.emit("stats",this.getStats())}),e.on("error",n=>{console.error(`Connection error with ${e.peer}:`,n)})}handleMessage(e,n){try{switch(n.type){case"sync-step-1":{const r=new Uint8Array(n.data),s=tk(this.doc,r);e.open&&e.send({type:"sync-step-2",data:s});break}case"sync-step-2":{const r=new Uint8Array(n.data);gf(this.doc,r,this);break}case"update":{const r=new Uint8Array(n.data);gf(this.doc,r,this),this.isHost&&this.connections.forEach(s=>{s.peer!==e.peer&&s.open&&s.send(n)});break}case"announce-user":{const r=n.user;r&&r.id&&(this.connectedUsers.set(r.id,r),this.emit("users:changed",Array.from(this.connectedUsers.values())),this.isHost&&this.connections.forEach(s=>{s.peer!==e.peer&&s.open&&s.send(n)}));break}case"playback":{this.emit("playback:change",n),this.isHost&&this.connections.forEach(r=>{r.peer!==e.peer&&r.open&&r.send(n)});break}}}catch(r){console.error("Error handling message:",r)}}sendPlayback(e,n){this.broadcast({type:"playback",action:e,frame:n})}sendPlaybackToPeer(e,n,r){const s=this.connections.get(e);s&&s.open&&s.send({type:"playback",action:n,frame:r})}announceUser(e){this.broadcast({type:"announce-user",user:e}),this.connectedUsers.set(this._peerId,e),this.emit("users:changed",Array.from(this.connectedUsers.values()))}broadcast(e){this.connections.forEach(n=>{n.open&&n.send(e)})}getStats(){return{connected:!!this.peer&&!this.peer.disconnected,peerId:this._peerId,isHost:this.isHost,connections:this.connections.size}}}class aS{constructor(e,n,r){this.videoElement=r,this.store=e,this.canvas=n;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get 2d context");this.ctx=s,this.initListeners()}initListeners(){this.store.on("state:changed",(e,n)=>{(e.currentFrame!==n.currentFrame||e.annotations!==n.annotations||e.isOnionSkinEnabled!==n.isOnionSkinEnabled||e.onionSkinPrevFrames!==n.onionSkinPrevFrames||e.holdDuration!==n.holdDuration||e.viewport!==n.viewport)&&this.render()})}resize(e,n){this.canvas.width=e,this.canvas.height=n,this.render()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}render(){this.clear();const e=this.store.getState(),n=`translate(${e.viewport.x}px, ${e.viewport.y}px) scale(${e.viewport.scale})`;if(this.videoElement&&(this.videoElement.style.transformOrigin="0 0",this.videoElement.style.transform=n),this.canvas.style.transform=n,this.ctx.save(),e.isOnionSkinEnabled){const s=this.store.getAnnotationsForFrame(e.currentFrame),i=new Set(s.map(l=>l.id));for(let l=e.onionSkinPrevFrames;l>0;l--){const a=e.currentFrame-l;if(a>=0){const u=this.store.getAnnotationsForFrame(a).filter(d=>!i.has(d.id));if(u.length>0){const d=.3*(1-l/(e.onionSkinPrevFrames+1));this.renderAnnotationsToContext(this.ctx,u,this.canvas.width,this.canvas.height,{globalAlpha:d,colorOverride:"#ff0000"})}}}const o=e.onionSkinNextFrames||0;for(let l=o;l>0;l--){const a=e.currentFrame+l,u=this.store.getAnnotationsForFrame(a).filter(d=>!i.has(d.id));if(u.length>0){const d=.3*(1-l/(o+1));this.renderAnnotationsToContext(this.ctx,u,this.canvas.width,this.canvas.height,{globalAlpha:d,colorOverride:"#00ff00"})}}}const r=this.store.getAnnotationsForFrame(e.currentFrame);if(this.renderAnnotationsToContext(this.ctx,r,this.canvas.width,this.canvas.height),e.selectedAnnotationId){const s=r.find(i=>i.id===e.selectedAnnotationId);s&&this.renderSelection(s,this.canvas.width,this.canvas.height)}this.ctx.restore()}async captureFrame(e={}){const n=e.type||"image/png",r=e.quality||1,s=e.videoElement||this.videoElement,i=s?s.videoWidth:this.canvas.width,o=s?s.videoHeight:this.canvas.height;if(i===0||o===0)throw new Error("Invalid output dimensions");const l=document.createElement("canvas");l.width=i,l.height=o;const a=l.getContext("2d");if(!a)throw new Error("Could not create offscreen context");e.composite&&s&&a.drawImage(s,0,0,i,o);const c=this.store.getState(),u=this.store.getAnnotationsForFrame(c.currentFrame);return this.renderAnnotationsToContext(a,u,i,o),l.toDataURL(n,r)}renderAnnotationsToContext(e,n,r,s,i={}){e.save(),i.globalAlpha&&(e.globalAlpha=i.globalAlpha),n.forEach(o=>{e.strokeStyle=i.colorOverride||o.style.color;const l=r/this.canvas.width;if(e.lineWidth=Math.max(1,o.style.width*l),e.fillStyle=i.colorOverride||o.style.fill||"transparent",e.lineCap="round",e.lineJoin="round",e.beginPath(),o.type==="freehand"&&o.points){if(o.points.length>0){e.moveTo(o.points[0].x*r,o.points[0].y*s);for(let a=1;a<o.points.length;a++)e.lineTo(o.points[a].x*r,o.points[a].y*s)}}else if(o.type==="square"&&o.points&&o.points.length>=2){const a=o.points[0],c=o.points[1],u=Math.min(a.x,c.x)*r,d=Math.min(a.y,c.y)*s,f=Math.abs(c.x-a.x)*r,p=Math.abs(c.y-a.y)*s;e.strokeRect(u,d,f,p)}else if(o.type==="circle"&&o.points&&o.points.length>=2){const a=o.points[0],c=o.points[1],u=Math.min(a.x,c.x)*r,d=Math.min(a.y,c.y)*s,f=Math.abs(c.x-a.x)*r,p=Math.abs(c.y-a.y)*s;e.beginPath(),e.ellipse(u+f/2,d+p/2,f/2,p/2,0,0,2*Math.PI)}else if(o.type==="arrow"&&o.points&&o.points.length>=2){const a=o.points[0].x*r,c=o.points[0].y*s,u=o.points[1].x*r,d=o.points[1].y*s;e.moveTo(a,c),e.lineTo(u,d);const f=Math.atan2(d-c,u-a),p=15*l;e.lineTo(u-p*Math.cos(f-Math.PI/6),d-p*Math.sin(f-Math.PI/6)),e.moveTo(u,d),e.lineTo(u-p*Math.cos(f+Math.PI/6),d-p*Math.sin(f+Math.PI/6))}else if(o.type==="text"&&o.points&&o.text){const a=(o.style.fontSize||24)*l;e.font=`${a}px Arial`,e.fillStyle=e.strokeStyle,e.fillText(o.text,o.points[0].x*r,o.points[0].y*s)}e.stroke()}),e.restore()}renderSelection(e,n,r){if(!e.points)return;let s=1/0,i=1/0,o=-1/0,l=-1/0;e.points.forEach(c=>{s=Math.min(s,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),l=Math.max(l,c.y)});const a=10/n;s-=a,i-=a,o+=a,l+=a,this.ctx.save(),this.ctx.strokeStyle="#00AAFF",this.ctx.lineWidth=2,this.ctx.setLineDash([5,5]),this.ctx.strokeRect(s*n,i*r,(o-s)*n,(l-i)*r),this.ctx.restore()}}class cS{constructor(e){this.plugins=new Map,this.annotator=e}register(e){if(this.plugins.has(e.name)){console.warn(`Plugin ${e.name} is already registered.`);return}this.plugins.set(e.name,e),e.onInit(this.annotator)}unregister(e){var r;const n=this.plugins.get(e);n&&((r=n.onDestroy)==null||r.call(n),this.plugins.delete(e))}}class Hn{constructor(e){this.annotator=e,this.store=e.store}}let Si;const uS=new Uint8Array(16);function dS(){if(!Si&&(Si=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Si))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Si(uS)}const ge=[];for(let t=0;t<256;++t)ge.push((t+256).toString(16).slice(1));function fS(t,e=0){return ge[t[e+0]]+ge[t[e+1]]+ge[t[e+2]]+ge[t[e+3]]+"-"+ge[t[e+4]]+ge[t[e+5]]+"-"+ge[t[e+6]]+ge[t[e+7]]+"-"+ge[t[e+8]]+ge[t[e+9]]+"-"+ge[t[e+10]]+ge[t[e+11]]+ge[t[e+12]]+ge[t[e+13]]+ge[t[e+14]]+ge[t[e+15]]}const hS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tf={randomUUID:hS};function Lu(t,e,n){if(Tf.randomUUID&&!e&&!t)return Tf.randomUUID();t=t||{};const r=t.random||(t.rng||dS)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=r[s];return e}return fS(r)}class pS extends Hn{constructor(){super(...arguments),this.isDrawing=!1,this.currentPoints=[]}onMouseDown(e,n,r){this.isDrawing=!0;const s=r instanceof PointerEvent&&r.pressure>0?r.pressure:.5;this.currentPoints=[{x:e,y:n,p:s}];const i=this.store.getState(),o={id:"temp_drawing",frame:i.currentFrame,type:"freehand",points:this.currentPoints,style:{color:i.activeColor,width:i.activeStrokeWidth}};this.store.addAnnotation(o)}onMouseMove(e,n,r){if(!this.isDrawing)return;const s=r instanceof PointerEvent&&r.pressure>0?r.pressure:.5;this.currentPoints.push({x:e,y:n,p:s}),this.store.updateAnnotation("temp_drawing",{points:this.currentPoints})}onMouseUp(e,n,r){if(!this.isDrawing)return;this.isDrawing=!1,this.store.deleteAnnotation("temp_drawing");const s=this.store.getState();if(this.currentPoints.length>1){const i=s.defaultDuration||1;console.log(`[FreehandTool] Creating annotation. Frame: ${s.currentFrame}, Duration: ${i}, Onion: ${s.isOnionSkinEnabled}`);const o={id:Lu(),frame:s.currentFrame,duration:i,type:"freehand",points:[...this.currentPoints],style:{color:s.activeColor,width:s.activeStrokeWidth}};this.store.addAnnotation(o),this.store.captureSnapshot()}this.currentPoints=[]}}class Xl extends Hn{constructor(e,n){super(e),this.isDrawing=!1,this.startPoint=null,this.type=n}onMouseDown(e,n,r){this.isDrawing=!0,this.startPoint={x:e,y:n};const s=this.store.getState(),i={id:"temp_shape",frame:s.currentFrame,type:this.type,points:[this.startPoint,{x:e,y:n}],style:{color:s.activeColor,width:s.activeStrokeWidth}};this.store.addAnnotation(i)}onMouseMove(e,n,r){!this.isDrawing||!this.startPoint||this.store.updateAnnotation("temp_shape",{points:[this.startPoint,{x:e,y:n}]})}onMouseUp(e,n,r){if(!this.isDrawing||!this.startPoint)return;this.isDrawing=!1,this.store.deleteAnnotation("temp_shape");const s=this.store.getState();if(Math.abs(e-this.startPoint.x)>.001||Math.abs(n-this.startPoint.y)>.001){const i={id:Lu(),frame:s.currentFrame,duration:s.defaultDuration,type:this.type,points:[this.startPoint,{x:e,y:n}],style:{color:s.activeColor,width:s.activeStrokeWidth}};this.store.addAnnotation(i),this.store.captureSnapshot()}this.startPoint=null}}class gS extends Hn{constructor(){super(...arguments),this.isDragging=!1,this.startDragPoint=null,this.selectedAnnotationId=null,this.initialAnnotationState=null}onMouseDown(e,n,r){const s=this.store.getState().currentFrame,i=this.store.getAnnotationsForFrame(s);let o=null;for(let l=i.length-1;l>=0;l--){const a=i[l];if(this.hitTest(a,e,n)){o=a.id;break}}if(this.store.setState({selectedAnnotationId:o}),this.selectedAnnotationId=o,o){this.isDragging=!0,this.startDragPoint={x:e,y:n};const l=i.find(a=>a.id===o);l&&(this.initialAnnotationState=JSON.parse(JSON.stringify(l)))}}onMouseMove(e,n,r){if(!this.isDragging||!this.selectedAnnotationId||!this.startDragPoint||!this.initialAnnotationState)return;const s=e-this.startDragPoint.x,i=n-this.startDragPoint.y;if(this.initialAnnotationState.points){const o=this.initialAnnotationState.points.map(l=>({x:l.x+s,y:l.y+i}));this.store.updateAnnotation(this.selectedAnnotationId,{points:o})}}onMouseUp(e,n,r){this.isDragging&&this.store.captureSnapshot(),this.isDragging=!1,this.startDragPoint=null,this.initialAnnotationState=null}hitTest(e,n,r){if(e.type==="text"&&e.points&&e.text){const c=e.points[0],u=e.text.length*.012,d=.025;return n>=c.x&&n<=c.x+u&&r>=c.y-d&&r<=c.y+d*.2}if(!e.points||e.points.length===0)return!1;const s=.02;let i=1/0,o=1/0,l=-1/0,a=-1/0;if(e.points.forEach(c=>{i=Math.min(i,c.x),o=Math.min(o,c.y),l=Math.max(l,c.x),a=Math.max(a,c.y)}),n<i-s||n>l+s||r<o-s||r>a+s)return!1;if(e.type==="freehand"||e.type==="arrow"||e.points.length>2){for(let c=0;c<e.points.length-1;c++){const u=e.points[c],d=e.points[c+1];if(this.distToSegment(n,r,u.x,u.y,d.x,d.y)<=s)return!0}return!1}return!0}distToSegment(e,n,r,s,i,o){const l=(i-r)*(i-r)+(o-s)*(o-s);if(l===0)return Math.sqrt((e-r)*(e-r)+(n-s)*(n-s));let a=((e-r)*(i-r)+(n-s)*(o-s))/l;a=Math.max(0,Math.min(1,a));const c=r+a*(i-r),u=s+a*(o-s);return Math.sqrt((e-c)*(e-c)+(n-u)*(n-u))}}class mS extends Hn{constructor(){super(...arguments),this.activeInput=null,this.isEditing=!1,this.finishEditing=null}onMouseDown(e,n,r){if(this.isEditing&&this.finishEditing){this.finishEditing();return}this.isEditing=!0;const s=this.annotator.container,i=document.createElement("textarea");i.style.position="absolute",i.style.left=`${e*100}%`,i.style.top=`${n*100}%`,i.style.width="200px",i.style.minHeight="50px",i.style.background="transparent",i.style.color=this.store.getState().activeColor,i.style.border="2px dashed #rgba(255,255,255,0.5)",i.style.fontSize=`${this.store.getState().activeStrokeWidth*5+10}px`,i.style.fontFamily="Arial, sans-serif",i.style.zIndex="100",i.style.padding="0",i.style.margin="0",i.style.outline="none",i.style.resize="both",i.placeholder="Type here...",s.appendChild(i),setTimeout(()=>i.focus(),0),this.activeInput=i,this.finishEditing=()=>{if(!this.activeInput)return;const o=this.activeInput.value,l=this.store.getState();if(o.trim()){const a={id:Lu(),frame:l.currentFrame,duration:l.defaultDuration,type:"text",points:[{x:e,y:n}],text:o,style:{color:l.activeColor,width:1,fontSize:parseInt(i.style.fontSize)||24}};this.store.addAnnotation(a),this.store.captureSnapshot()}i.parentNode&&i.parentNode.removeChild(i),this.activeInput=null,this.isEditing=!1,this.finishEditing=null},i.addEventListener("blur",()=>{setTimeout(()=>{this.finishEditing&&this.finishEditing()},200)}),i.addEventListener("keydown",o=>{o.key==="Enter"&&o.shiftKey&&(o.preventDefault(),i.blur()),o.stopPropagation()})}onMouseMove(e,n,r){}onMouseUp(e,n,r){}}class yS extends Hn{constructor(){super(...arguments),this.isErasing=!1}onMouseDown(e,n,r){this.isErasing=!0,this.eraseAt(e,n)}onMouseMove(e,n,r){this.isErasing&&this.eraseAt(e,n)}onMouseUp(e,n,r){this.isErasing&&this.store.captureSnapshot(),this.isErasing=!1}eraseAt(e,n){const r=this.store.getState().currentFrame,s=this.store.getAnnotationsForFrame(r);for(const i of s)this.hitTest(i,e,n)&&this.store.deleteAnnotation(i.id)}hitTest(e,n,r){if(!e.points||e.points.length===0)return!1;let s=1/0,i=1/0,o=-1/0,l=-1/0;e.points.forEach(c=>{s=Math.min(s,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),l=Math.max(l,c.y)});const a=.02;return n>=s-a&&n<=o+a&&r>=i-a&&r<=l+a}}class vS extends Hn{constructor(e,n){super(e),this.onPickColor=n}onMouseDown(e,n,r){this.onPickColor(e,n)}onMouseMove(e,n,r){}onMouseUp(e,n,r){}}class xS extends Hn{constructor(){super(...arguments),this.lastX=0,this.lastY=0,this.isDragging=!1}onMouseDown(e,n,r){this.isDragging=!0,this.lastX=r.clientX,this.lastY=r.clientY}onMouseMove(e,n,r){if(!this.isDragging)return;const s=r.clientX-this.lastX,i=r.clientY-this.lastY,o=this.annotator.store.getState().viewport;this.annotator.store.setState({viewport:{...o,x:o.x+s,y:o.y+i}}),this.lastX=r.clientX,this.lastY=r.clientY}onMouseUp(e,n,r){this.isDragging=!1}}class kS{constructor(e,n={}){this.tools=new Map,this.previousTool=null,this.isRemotePlayback=!1,this.isRemoteSessionUpdate=!1,this.clipboard=null,this.container=e,this.container.style.position="relative",this.videoElement=document.createElement("video"),this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.display="block",this.videoElement.controls=!1,this.videoElement.disablePictureInPicture=!0,this.videoElement.setAttribute("controlsList","nodownload nofullscreen noremoteplayback"),this.videoElement.setAttribute("playsinline","true"),n.videoSrc&&(this.videoElement.src=n.videoSrc),this.container.appendChild(this.videoElement),this.canvasElement=document.createElement("canvas"),this.canvasElement.style.position="absolute",this.canvasElement.style.top="0",this.canvasElement.style.left="0",this.canvasElement.style.pointerEvents="auto",this.canvasElement.style.touchAction="none",this.container.appendChild(this.canvasElement),this.store=new Ev({fps:n.fps||24,startFrame:n.startFrame||0}),this.player=new Vp(this.store,this.videoElement),this.sync=new lS,this.renderer=new aS(this.store,this.canvasElement,this.videoElement),this.plugins=new cS(this),this.tools.set("select",new gS(this)),this.tools.set("freehand",new pS(this)),this.tools.set("square",new Xl(this,"square")),this.tools.set("circle",new Xl(this,"circle")),this.tools.set("arrow",new Xl(this,"arrow")),this.tools.set("text",new mS(this)),this.tools.set("eraser",new yS(this)),this.tools.set("pan",new xS(this)),this.tools.set("eyedropper",new vS(this,(r,s)=>{this.videoElement.getBoundingClientRect();const i=document.createElement("canvas");i.width=this.videoElement.videoWidth,i.height=this.videoElement.videoHeight;const o=i.getContext("2d");if(o){o.drawImage(this.videoElement,0,0);const l=Math.floor(r*i.width),a=Math.floor(s*i.height),c=o.getImageData(l,a,1,1).data,u="#"+((1<<24)+(c[0]<<16)+(c[1]<<8)+c[2]).toString(16).slice(1);this.store.setState({activeColor:u,activeTool:"freehand"})}})),this.initInteraction(),this.initShortcuts(),this.initResizeObserver(),this.initSyncBinding()}initInteraction(){const e=new Map;let n=null,r=1;const s=(o,l)=>Math.sqrt(Math.pow(o.clientX-l.clientX,2)+Math.pow(o.clientY-l.clientY,2)),i=o=>{const l=this.canvasElement.getBoundingClientRect();return{x:(o.clientX-l.left)/l.width,y:(o.clientY-l.top)/l.height,pressure:o instanceof PointerEvent&&o.pressure>0?o.pressure:.5}};this.canvasElement.addEventListener("pointerdown",o=>{if(e.set(o.pointerId,o),this.canvasElement.setPointerCapture(o.pointerId),e.size===2){const l=Array.from(e.values());n=s(l[0],l[1]),r=this.store.getState().viewport.scale;return}if(o.button===1){o.preventDefault(),this.previousTool=this.store.getState().activeTool,this.store.setState({activeTool:"pan"});const{x:l,y:a}=i(o),c=this.tools.get("pan");c&&c.onMouseDown(l,a,o);return}if(e.size===1){const{x:l,y:a,pressure:c}=i(o),u=this.store.getState().activeTool,d=this.tools.get(u);d&&d.onMouseDown(l,a,o)}}),window.addEventListener("pointermove",o=>{const l=this.canvasElement.getBoundingClientRect();if(e.has(o.pointerId)&&e.set(o.pointerId,o),e.size===2&&n){const f=Array.from(e.values()),m=s(f[0],f[1])/n,x=Math.min(Math.max(.1,r*m),5),w=this.store.getState().viewport;this.store.setState({viewport:{...w,scale:x}});return}const a=(o.clientX-l.left)/l.width,c=(o.clientY-l.top)/l.height,u=this.store.getState().activeTool,d=this.tools.get(u);d&&d.onMouseMove(a,c,o)}),window.addEventListener("pointerup",o=>{if(e.delete(o.pointerId),this.canvasElement.releasePointerCapture(o.pointerId),e.size<2&&(n=null),o.button===1&&this.previousTool){const f=this.tools.get("pan"),p=this.canvasElement.getBoundingClientRect(),m=(o.clientX-p.left)/p.width,x=(o.clientY-p.top)/p.height;f&&f.onMouseUp(m,x,o),this.store.setState({activeTool:this.previousTool}),this.previousTool=null;return}const l=this.canvasElement.getBoundingClientRect(),a=(o.clientX-l.left)/l.width,c=(o.clientY-l.top)/l.height,u=this.store.getState().activeTool,d=this.tools.get(u);d&&d.onMouseUp(a,c,o)}),this.canvasElement.addEventListener("wheel",o=>{if(o.ctrlKey){o.preventDefault();const l=.001,a=this.store.getState().viewport,c=Math.min(Math.max(.1,a.scale+-o.deltaY*l*a.scale),5);this.store.setState({viewport:{...a,scale:c}})}},{passive:!1})}initShortcuts(){window.addEventListener("keydown",e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){if(e.ctrlKey||e.metaKey){if(e.key==="z"){e.preventDefault(),this.store.undo();return}if(e.key==="y"){e.preventDefault(),this.store.redo();return}if(e.key==="c"){const n=this.store.getState().selectedAnnotationId;if(n){const r=this.store.getState().annotations.find(s=>s.id===n);r&&(this.clipboard=JSON.parse(JSON.stringify(r)))}return}if(e.key==="v"){if(this.clipboard){const n=JSON.parse(JSON.stringify(this.clipboard));n.id=crypto.randomUUID(),n.frame=this.store.getState().currentFrame,n.points&&(n.points=n.points.map(r=>({x:r.x+.02,y:r.y+.02}))),this.store.addAnnotation(n),this.store.setState({selectedAnnotationId:n.id})}return}if(e.key==="ArrowLeft"){e.preventDefault(),this.player.seekToPrevAnnotation();return}if(e.key==="ArrowRight"){e.preventDefault(),this.player.seekToNextAnnotation();return}}switch(e.key.toLowerCase()){case" ":e.preventDefault(),this.store.getState().isPlaying?this.player.pause():this.player.play();break;case"arrowleft":e.preventDefault(),this.player.seekToFrame(this.store.getState().currentFrame-1);break;case"arrowright":e.preventDefault(),this.player.seekToFrame(this.store.getState().currentFrame+1);break;case"s":this.store.setState({activeTool:"select"});break;case"p":this.store.setState({activeTool:"freehand"});break;case"a":this.store.setState({activeTool:"arrow"});break;case"c":this.store.setState({activeTool:"circle"});break;case"q":this.store.setState({activeTool:"square"});break;case"t":this.store.setState({activeTool:"text"});break;case"e":this.store.setState({activeTool:"eraser"});break;case"g":this.store.getState().isOnionSkinEnabled?this.store.setState({isOnionSkinEnabled:!1}):this.store.setState({isOnionSkinEnabled:!0,holdDuration:1});break;case"h":this.store.getState().holdDuration>1?this.store.setState({holdDuration:1}):this.store.setState({holdDuration:24,isOnionSkinEnabled:!1});break;case"r":this.store.setState({viewport:{x:0,y:0,scale:1}});break;case"=":case"+":const s=Math.min(20,this.store.getState().activeStrokeWidth+1);this.store.setState({activeStrokeWidth:s});break;case"-":case"_":const i=Math.max(1,this.store.getState().activeStrokeWidth-1);this.store.setState({activeStrokeWidth:i});break}}})}initSyncBinding(){this.store.on("annotation:added",(e,n)=>{n||e.id.startsWith("temp_")||(console.log(`[LinkSync DEBUG] Sending to Yjs: ${e.id}, Dur: ${e.duration}`),this.sync.annotationsMap.set(e.id,e))}),this.store.on("annotation:updated",(e,n,r)=>{if(r||e.startsWith("temp_"))return;const s=this.sync.annotationsMap.get(e);s&&this.sync.annotationsMap.set(e,{...s,...n})}),this.store.on("annotation:deleted",(e,n)=>{n||e.startsWith("temp_")||this.sync.annotationsMap.delete(e)}),this.store.on("state:changed",(e,n)=>{this.isRemoteSessionUpdate||((e.isOnionSkinEnabled!==n.isOnionSkinEnabled||e.onionSkinPrevFrames!==n.onionSkinPrevFrames||e.onionSkinNextFrames!==n.onionSkinNextFrames)&&this.sync.sessionMap.set("onionSkin",{enabled:e.isOnionSkinEnabled,prev:e.onionSkinPrevFrames,next:e.onionSkinNextFrames}),e.holdDuration!==n.holdDuration&&this.sync.sessionMap.set("holdDuration",e.holdDuration))}),this.sync.annotationsMap.observe(e=>{e.changes.keys.forEach((n,r)=>{if(n.action==="add"){const s=this.sync.annotationsMap.get(r);s&&e.transaction.origin===this.sync&&this.store.addAnnotation(s,!0)}else if(n.action==="update"){const s=this.sync.annotationsMap.get(r);s&&e.transaction.origin===this.sync&&this.store.updateAnnotation(r,s,!0)}else n.action==="delete"&&e.transaction.origin===this.sync&&this.store.deleteAnnotation(r,!0)})}),this.sync.sessionMap.observe(e=>{if(e.transaction.origin===this.sync){if(this.isRemoteSessionUpdate=!0,e.keysChanged.has("onionSkin")){const n=this.sync.sessionMap.get("onionSkin");n&&this.store.setState({isOnionSkinEnabled:n.enabled,onionSkinPrevFrames:n.prev,onionSkinNextFrames:n.next})}if(e.keysChanged.has("holdDuration")){const n=this.sync.sessionMap.get("holdDuration");typeof n=="number"&&this.store.setState({holdDuration:n})}setTimeout(()=>{this.isRemoteSessionUpdate=!1},0)}}),this.initPlaybackSync()}initPlaybackSync(){this.sync.on("playback:change",e=>{this.isRemotePlayback=!0,e.action==="play"?this.player.play():e.action==="pause"?(this.player.pause(),typeof e.frame=="number"&&this.player.seekToFrame(e.frame)):e.action==="seek"&&typeof e.frame=="number"&&this.player.seekToFrame(e.frame),setTimeout(()=>{this.isRemotePlayback=!1},50)}),this.sync.on("connection:open",e=>{if(this.sync.isHostUser){const n=this.store.getState(),r=Math.round(n.currentTime*n.fps);this.sync.sendPlaybackToPeer(e,"seek",r),n.isPlaying?this.sync.sendPlaybackToPeer(e,"play"):this.sync.sendPlaybackToPeer(e,"pause",r)}}),this.videoElement.addEventListener("play",()=>{this.isRemotePlayback||this.sync.sendPlayback("play")}),this.videoElement.addEventListener("pause",()=>{if(!this.isRemotePlayback){const e=this.store.getState().currentFrame;this.sync.sendPlayback("pause",e)}}),this.videoElement.addEventListener("seeked",()=>{if(!this.isRemotePlayback){const e=this.store.getState().currentFrame;this.sync.sendPlayback("seek",e)}})}initResizeObserver(){this.videoElement.addEventListener("loadedmetadata",()=>{this.fitCanvasToVideo()});const e=new ResizeObserver(()=>{this.fitCanvasToVideo()});e.observe(this.container),e.observe(this.videoElement)}fitCanvasToVideo(){if(!this.videoElement.videoWidth||!this.videoElement.videoHeight)return;const e=this.container.getBoundingClientRect(),n=this.videoElement.videoWidth/this.videoElement.videoHeight,r=e.width/e.height;let s,i,o,l;r>n?(i=e.height,s=i*n,o=0,l=(e.width-s)/2):(s=e.width,i=s/n,l=0,o=(e.height-i)/2),this.canvasElement.style.width=`${s}px`,this.canvasElement.style.height=`${i}px`,this.canvasElement.style.top=`${o}px`,this.canvasElement.style.left=`${l}px`,this.canvasElement.style.transformOrigin=`${-l}px ${-o}px`,this.renderer.resize(s,i)}destroy(){this.container.removeChild(this.videoElement),this.container.removeChild(this.canvasElement)}}var SS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _S=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...a},c)=>H.createElement("svg",{ref:c,...SS,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${_S(t)}`,...a},[...e.map(([u,d])=>H.createElement(u,d)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n},CS=B("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),wS=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ES=B("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),TS=B("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),bS=B("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Wm=B("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),RS=B("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),PS=B("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]),DS=B("Grab",[["path",{d:"M18 11.5V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4",key:"n5nng"}],["path",{d:"M14 10V8a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"185i9d"}],["path",{d:"M10 9.9V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v5",key:"11pz95"}],["path",{d:"M6 14v0a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"16yk7l"}],["path",{d:"M18 11v0a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0",key:"nzvb1c"}]]),MS=B("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),bf=B("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),NS=B("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),IS=B("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),jS=B("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]),LS=B("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),AS=B("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),OS=B("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),FS=B("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),$S=B("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]),zS=B("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),US=B("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),BS=B("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),VS=B("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Gm=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),HS=B("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),WS=B("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),GS=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Zl=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),YS=B("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),QS=B("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function Ym(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Ym(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Je(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Ym(t))&&(r&&(r+=" "),r+=e);return r}const Jt=({trigger:t,content:e,isOpen:n,onOpenChange:r,side:s="right",align:i="start"})=>{const[o,l]=H.useState(!1),a=n!==void 0,c=a?n:o,u=H.useRef(null),d=()=>{const f=!c;a||l(f),r==null||r(f)};return H.useEffect(()=>{const f=p=>{u.current&&!u.current.contains(p.target)&&(a||l(!1),r==null||r(!1))};return c&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[c,a,r]),h.jsxs("div",{className:"relative",ref:u,children:[h.jsx("div",{onClick:d,className:"cursor-pointer",children:t}),c&&h.jsx("div",{className:Je("absolute z-50 bg-gray-900 border border-gray-700 rounded shadow-xl p-4 min-w-[200px]",s==="right"&&"left-full top-0 ml-2",s==="left"&&"right-full top-0 mr-2",s==="bottom"&&"top-full mt-2",s==="top"&&"bottom-full mb-2",(s==="bottom"||s==="top")&&i==="start"&&"left-0",(s==="bottom"||s==="top")&&i==="center"&&"left-1/2 -translate-x-1/2",(s==="bottom"||s==="top")&&i==="end"&&"right-0"),onMouseDown:f=>f.stopPropagation(),onClick:f=>f.stopPropagation(),children:e})]})},JS=({activeTool:t,onToolSelect:e,onClear:n,className:r,orientation:s="vertical",activeColor:i,onColorChange:o,activeStrokeWidth:l,onStrokeWidthChange:a,defaultDuration:c=1,onDefaultDurationChange:u,holdDuration:d=1,onHoldDurationChange:f,isOnionSkinEnabled:p,onToggleOnionSkin:m,onionSkinPrevFrames:x=3,onionSkinNextFrames:w=3,onOnionSkinSettingsChange:v})=>{const g=[{id:"select",icon:jS,label:"Select"},{id:"pan",icon:DS,label:"Pan (Grab)"},{id:"freehand",icon:OS,label:"Pencil"},{id:"arrow",icon:LS,label:"Arrow"},{id:"circle",icon:ES,label:"Circle"},{id:"square",icon:VS,label:"Square"},{id:"text",icon:HS,label:"Text"},{id:"eraser",icon:Wm,label:"Eraser"}],y=["#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"],k=s==="horizontal",[C,R]=Wt.useState(!1),[T,b]=Wt.useState(x),[U,j]=Wt.useState(w);return Wt.useEffect(()=>{C&&(b(x),j(w))},[C]),Wt.useEffect(()=>{const S=setTimeout(()=>{(T!==x||U!==w)&&(v==null||v(T,U))},500);return()=>clearTimeout(S)},[T,U,v,x,w]),h.jsxs("div",{className:Je("flex gap-2 p-2 bg-gray-900 border-gray-800",k?"flex-row border-b items-center":"flex-col border-r",r),children:[h.jsx("style",{children:`
                .styled-range::-webkit-slider-thumb {
                    -webkit-appearance: none;
                    appearance: none;
                    width: 14px;
                    height: 14px;
                    border-radius: 50%;
                    background: #ffffff;
                    cursor: pointer;
                    margin-top: -5px;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
                }
                .styled-range::-moz-range-thumb {
                    width: 14px;
                    height: 14px;
                    border-radius: 50%;
                    background: #ffffff;
                    cursor: pointer;
                    border: none;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
                }
                .styled-range::-moz-range-track {
                    height: 4px;
                    background-color: currentColor;
                    border-radius: 9999px;
                }
            `}),g.map(S=>h.jsx("button",{title:S.label,onClick:()=>e(S.id),className:Je("p-2 rounded hover:bg-gray-700 text-white transition-colors",t===S.id?"bg-blue-600 hover:bg-blue-500":"bg-transparent"),children:h.jsx(S.icon,{size:20})},S.id)),h.jsx("div",{className:Je("bg-gray-700",k?"w-px h-6 mx-1":"h-px w-full my-1")}),h.jsx(Jt,{side:k?"bottom":"right",trigger:h.jsxs("button",{title:"Toggle Global Hold (Hand)",className:Je("p-2 rounded hover:bg-gray-700 text-white transition-colors relative",(d||1)>1?"bg-orange-900/50 text-orange-400":"bg-transparent text-gray-400"),children:[h.jsx(MS,{size:20}),(d||1)>1&&h.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center bg-orange-600 text-white text-[9px] font-bold rounded-full border border-gray-900",children:d})]}),content:h.jsxs("div",{className:"w-56 p-2 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between pb-1 border-b border-gray-700",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-medium text-white leading-tight",children:"Global Hold"}),h.jsx("span",{className:"text-[10px] text-gray-500 leading-tight mt-0.5",children:"Force annotations to stay visible longer."})]}),h.jsx("button",{type:"button",onClick:()=>{(d||1)>1?f==null||f(1):f==null||f(24)},className:Je("w-8 h-4 rounded-full cursor-pointer relative transition-colors border-none outline-none focus:ring-2 ring-gray-600",(d||1)>1?"bg-orange-500":"bg-gray-600"),children:h.jsx("div",{className:Je("absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all shadow-sm",(d||1)>1?"left-4.5":"left-0.5")})})]}),h.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[h.jsxs("span",{className:"text-xs text-orange-300 font-medium",children:["Hold Frames: ",d]}),h.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:d,onChange:S=>f==null?void 0:f(parseInt(S.target.value)),className:"styled-range w-full h-1 bg-orange-900/50 rounded-lg appearance-none cursor-pointer text-orange-900"})]})]})}),h.jsx(Jt,{side:k?"bottom":"right",isOpen:C,onOpenChange:R,trigger:h.jsxs("button",{title:"Onion Skin (Ghosting)",className:Je("p-2 rounded hover:bg-gray-700 text-white transition-colors relative",p?"bg-purple-600 hover:bg-purple-500":"bg-transparent"),children:[h.jsx(PS,{size:20}),p&&h.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),content:h.jsxs("div",{className:"w-56 p-2 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between pb-1 border-b border-gray-700",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-medium text-white leading-tight",children:"Ghosting"}),h.jsx("span",{className:"text-[10px] text-gray-500 leading-tight mt-0.5",children:"View annotations from past and future."})]}),h.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),m==null||m()},className:Je("w-8 h-4 rounded-full cursor-pointer relative transition-colors border-none outline-none focus:ring-2 ring-gray-600",p?"bg-green-500":"bg-gray-600"),children:h.jsx("div",{className:Je("absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all shadow-sm",p?"left-4.5":"left-0.5")})})]}),h.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[h.jsxs("span",{className:"text-xs text-red-300 font-medium",children:["Past Frames: ",T]}),h.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:T,onMouseDown:S=>S.stopPropagation(),onClick:S=>S.stopPropagation(),onChange:S=>{b(parseInt(S.target.value))},className:"styled-range w-full h-1 bg-red-900/50 rounded-lg appearance-none cursor-pointer text-red-900"})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("span",{className:"text-xs text-green-300 font-medium",children:["Future Frames: ",U]}),h.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:U,onMouseDown:S=>S.stopPropagation(),onClick:S=>S.stopPropagation(),onChange:S=>{j(parseInt(S.target.value))},className:"styled-range w-full h-1 bg-green-900/50 rounded-lg appearance-none cursor-pointer text-green-900"})]})]})}),h.jsx("div",{className:Je("bg-gray-700",k?"w-px h-6 mx-1":"h-px w-full my-1")}),h.jsx(Jt,{side:k?"bottom":"right",trigger:h.jsx("button",{title:"Stroke Color",className:"relative p-2 rounded hover:bg-gray-700 transition-colors w-10 h-10 flex items-center justify-center",children:h.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-400",style:{backgroundColor:i}})}),content:h.jsxs("div",{className:"w-56 p-2 flex flex-col gap-2",children:[h.jsx("div",{className:"flex items-center justify-between pb-1 border-b border-gray-700",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-medium text-white leading-tight",children:"Stroke Color"}),h.jsx("span",{className:"text-[10px] text-gray-500 leading-tight mt-0.5",children:"Choose the color for your drawings."})]})}),h.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-1",children:[y.map(S=>h.jsx("button",{onClick:()=>o==null?void 0:o(S),className:Je("w-6 h-6 rounded-full border border-gray-600",i===S&&"ring-2 ring-white"),style:{backgroundColor:S}},S)),h.jsxs("div",{className:"relative w-6 h-6 rounded-full overflow-hidden border border-gray-600",children:[h.jsx("input",{type:"color",value:i,onChange:S=>o==null?void 0:o(S.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 to-blue-500 pointer-events-none"})]})]})]})}),h.jsx(Jt,{side:k?"bottom":"right",trigger:h.jsxs("button",{title:"Stroke Width / Text Size",className:"p-2 rounded hover:bg-gray-700 text-white transition-colors flex items-center justify-center font-bold text-xs w-10 h-10",children:[l,"px"]}),content:h.jsxs("div",{className:"w-56 p-2 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between pb-1 border-b border-gray-700",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-medium text-white leading-tight",children:"Stroke Size"}),h.jsx("span",{className:"text-[10px] text-gray-500 leading-tight mt-0.5",children:"Adjust line width and text size."})]}),h.jsx("button",{type:"button",title:"Reset to 3px",onClick:()=>a==null?void 0:a(3),className:"text-[10px] text-gray-400 hover:text-white underline",children:"Reset"})]}),h.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[h.jsxs("span",{className:"text-xs text-green-300 font-medium",children:[l,"px"]}),h.jsx("input",{type:"range",min:"1",max:"50",value:l,onChange:S=>a==null?void 0:a(parseInt(S.target.value)),className:"styled-range w-full h-1 bg-green-900/50 rounded-lg appearance-none cursor-pointer text-green-600"})]})]})}),h.jsx(Jt,{side:k?"bottom":"right",trigger:h.jsxs("button",{title:"New Annotation Duration",className:"p-2 rounded hover:bg-gray-700 text-white transition-colors flex items-center justify-center font-bold text-xs w-10 h-10 bg-transparent text-gray-400",children:[c,"fr"]}),content:h.jsxs("div",{className:"w-56 p-2 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between pb-1 border-b border-gray-700",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-medium text-white leading-tight",children:"Native Duration"}),h.jsx("span",{className:"text-[10px] text-gray-500 leading-tight mt-0.5",children:"Initial length for new drawings."})]}),h.jsx("button",{type:"button",title:"Reset to 1 frame",onClick:()=>u==null?void 0:u(1),className:"text-[10px] text-gray-400 hover:text-white underline",children:"Reset"})]}),h.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[h.jsxs("div",{className:"flex justify-between items-baseline",children:[h.jsxs("span",{className:"text-xs text-blue-300 font-medium",children:[c," Frames"]}),h.jsxs("span",{className:"text-[10px] text-gray-500",children:[(c/24).toFixed(1),"s @ 24fps"]})]}),h.jsx("input",{type:"range",min:"1",max:"100",value:c,onChange:S=>u==null?void 0:u(parseInt(S.target.value)),className:"styled-range w-full h-1 bg-blue-900/50 rounded-lg appearance-none cursor-pointer text-blue-600"})]})]})}),h.jsx("div",{className:"flex-1"}),n&&h.jsx("button",{title:"Clear All",onClick:n,className:"p-2 rounded hover:bg-red-900/50 text-red-400 transition-colors",children:h.jsx(Gm,{size:20})})]})},KS=({annotator:t})=>{const[e,n]=H.useState(!1),[r,s]=H.useState(""),[i,o]=H.useState(0),[l,a]=H.useState(""),[c,u]=H.useState(!0),[d,f]=H.useState(""),[p,m]=H.useState("#3b82f6"),[x,w]=H.useState([]);H.useEffect(()=>{const k=["Bear","Fox","Wolf","Eagle","Hawk","Owl","Lion","Tiger","Panda","Koala"],C=["Red","Blue","Green","Yellow","Purple","Orange","Cyan","Magenta","Lime","Pink"],R=C[Math.floor(Math.random()*C.length)],T=k[Math.floor(Math.random()*k.length)];f(`${R} ${T}`),m("#"+Math.floor(Math.random()*16777215).toString(16))},[]),H.useEffect(()=>{if(!t)return;const k=t.sync,C=b=>{n(!0),s(b),k.announceUser({id:b,name:d,color:p})},R=()=>{n(!1),s(""),o(0),w([])},T=b=>{w(b),o(b.length)};return k.on("ready",C),k.on("disconnected",R),k.on("users:changed",T),k.on("request-announce",()=>{const b=k._peerId||r;b&&k.announceUser({id:b,name:d,color:p})}),k.connectedUsers&&w(Array.from(k.connectedUsers.values())),()=>{k.off("ready",C),k.off("disconnected",R),k.off("users:changed",T),k.off("request-announce")}},[t,d,p]);const v=async()=>{t&&(u(!0),await t.sync.createSession())},g=async()=>{!t||!l||(u(!1),await t.sync.connect(l))},y=()=>{navigator.clipboard.writeText(r)};return h.jsx(Jt,{side:"bottom",align:"end",trigger:h.jsx("button",{title:"Live Session",className:`p-2 rounded transition-colors ${e?"text-green-400 bg-green-900/20":"text-gray-400 hover:text-white"}`,children:e?h.jsx(Zl,{size:20}):h.jsx(Zl,{size:20})}),content:h.jsxs("div",{className:"w-72 p-3 bg-gray-900 text-white rounded-lg border border-gray-700 shadow-xl",children:[h.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-3",children:[h.jsx(Zl,{size:16})," Sync Session"]}),e?h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsx("div",{className:"bg-green-900/20 border border-green-900/50 rounded p-2 text-center",children:h.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Session Active"})}),c&&h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{className:"text-xs text-gray-400",children:"Your ID (Share this):"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("code",{className:"flex-1 bg-black/30 p-1.5 rounded text-xs select-all text-gray-300 font-mono truncate",children:r}),h.jsx("button",{onClick:y,className:"p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300",title:"Copy ID",children:h.jsx(TS,{size:14})})]})]}),!c&&h.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[h.jsx(IS,{size:12})," Connected to host"]}),h.jsxs("div",{className:"flex flex-col gap-1 max-h-32 overflow-y-auto",children:[h.jsxs("span",{className:"text-xs text-gray-400 font-bold",children:["In Session (",x.length,"):"]}),x.map(k=>h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:k.color}}),h.jsxs("span",{className:`truncate ${k.id===r?"text-blue-400 font-bold":"text-gray-300"}`,children:[k.name," ",k.id===r?"(You)":""]})]},k.id))]}),h.jsxs("div",{className:"pt-2 border-t border-gray-800",children:[h.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-300 cursor-pointer",children:[h.jsx("input",{type:"checkbox",className:"rounded bg-gray-800 border-gray-600 text-blue-500 focus:ring-0",onChange:()=>{}}),h.jsx("span",{children:"Sync Viewport (Experimental)"})]}),h.jsx("p",{className:"text-[10px] text-gray-500 mt-1 pl-5",children:"Sync zoom & pan across users."})]}),h.jsx("button",{onClick:()=>{t==null||t.sync.disconnect(),n(!1),s("")},className:"mt-2 w-full py-1.5 text-xs text-red-400 hover:bg-red-900/20 rounded border border-red-900/30 transition-colors",children:"Disconnect"})]}):h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("label",{className:"text-xs text-gray-400",children:"Your Name"}),h.jsx("div",{className:"flex gap-2",children:h.jsx("input",{className:"flex-1 bg-gray-800 border-none rounded px-2 py-1 text-sm text-white",value:d,onChange:k=>f(k.target.value)})})]}),h.jsxs("div",{className:"flex gap-2 p-1 bg-gray-800 rounded",children:[h.jsx("button",{className:`flex-1 py-1 text-xs rounded ${c?"bg-blue-600 text-white":"text-gray-400 hover:text-gray-200"}`,onClick:()=>u(!0),children:"Host"}),h.jsx("button",{className:`flex-1 py-1 text-xs rounded ${c?"text-gray-400 hover:text-gray-200":"bg-blue-600 text-white"}`,onClick:()=>u(!1),children:"Join"})]}),c?h.jsx("button",{onClick:v,className:"w-full py-2 bg-blue-600 hover:bg-blue-500 rounded text-sm font-semibold transition-colors",children:"Start Session"}):h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("input",{type:"text",placeholder:"Enter Host ID",value:l,onChange:k=>a(k.target.value),className:"w-full px-2 py-1.5 bg-gray-950 border border-gray-700 rounded text-sm text-white focus:border-blue-500 outline-none"}),h.jsx("button",{onClick:g,disabled:!l,className:"w-full py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold transition-colors",children:"Connect"})]})]})]})})},Au=H.forwardRef(({src:t,fps:e=24,startFrame:n=0,width:r="100%",height:s="100%",className:i},o)=>{const l=H.useRef(null),a=H.useRef(null),[c,u]=H.useState(null),[d,f]=H.useState(!1);H.useImperativeHandle(o,()=>({getInstance:()=>a.current})),H.useEffect(()=>{if(!l.current)return;const S=new kS(l.current,{videoSrc:t,fps:e,startFrame:n});a.current=S,u(S.store.getState());const M=O=>{u({...O})};return S.store.on("state:changed",M),()=>{S.store.off("state:changed",M),S.destroy(),a.current=null}},[t,e,n]);const p=S=>{var M;return(M=a.current)==null?void 0:M.store.setState({activeTool:S})},m=S=>{var M;return(M=a.current)==null?void 0:M.store.setState({activeColor:S})},x=S=>{var M;return(M=a.current)==null?void 0:M.store.setState({activeStrokeWidth:S})},w=()=>{var S,M;return c!=null&&c.isPlaying?(S=a.current)==null?void 0:S.player.pause():(M=a.current)==null?void 0:M.player.play()},v=S=>{var M;return(M=a.current)==null?void 0:M.player.seekToFrame(parseInt(S.target.value))},g=()=>{var S;return(S=a.current)==null?void 0:S.store.undo()},y=()=>{var S;return(S=a.current)==null?void 0:S.store.redo()},k=async S=>{if(!a.current)return;const M=await a.current.renderer.captureFrame({composite:S,videoElement:a.current.videoElement}),O=document.createElement("a");O.href=M,O.download=`frame_${c==null?void 0:c.currentFrame}_${S?"comp":"anno"}.png`,O.click()},C=()=>{if(!a.current)return;const S=JSON.stringify(a.current.store.getState().annotations,null,2),M=new Blob([S],{type:"application/json"}),O=URL.createObjectURL(M),ke=document.createElement("a");ke.href=O,ke.download="annotations.json",ke.click(),URL.revokeObjectURL(O)},R=S=>{if(!a.current||!S.target.files||!S.target.files[0])return;const M=S.target.files[0],O=new FileReader;O.onload=ke=>{var Ut,Et,Tt;try{const E=JSON.parse((Ut=ke.target)==null?void 0:Ut.result);Array.isArray(E)&&((Et=a.current)==null||Et.store.setState({annotations:E}),(Tt=a.current)==null||Tt.store.captureSnapshot())}catch(E){console.error("Invalid JSON",E),alert("Failed to load JSON")}},O.readAsText(M)},T=Wt.useMemo(()=>{if(!c||!c.annotations)return[];const S=new Set(c.annotations.map(M=>M.frame));return Array.from(S).sort((M,O)=>M-O)},[c==null?void 0:c.annotations]),b=c&&c.duration?Math.floor(c.duration*c.fps):100,U=()=>{if(!a.current)return;const S=a.current.videoElement;if(S&&l.current){const M=S.videoWidth/S.videoHeight;l.current.style.aspectRatio=`${M}`,a.current.renderer.resize(l.current.clientWidth,l.current.clientHeight)}},j=S=>{var I,J;if(!c)return;const M=1.1,O=S.deltaY>0?-1:1;let ke=c.viewport.scale*(O>0?M:1/M);ke=Math.max(.1,Math.min(ke,10));const Ut=(I=l.current)==null?void 0:I.getBoundingClientRect();if(!Ut)return;const Et=S.clientX-Ut.left,Tt=S.clientY-Ut.top,E=Et-(Et-c.viewport.x)/c.viewport.scale*ke,N=Tt-(Tt-c.viewport.y)/c.viewport.scale*ke;(J=a.current)==null||J.store.setState({viewport:{x:E,y:N,scale:ke}})};return H.useEffect(()=>{if(a.current){const S=a.current.videoElement;return S.addEventListener("loadedmetadata",U),()=>S.removeEventListener("loadedmetadata",U)}},[a.current]),h.jsxs("div",{className:`flex flex-col h-full bg-black text-white ${i||""}`,style:{width:r,height:s},children:[h.jsxs("div",{className:"flex flex-row items-center bg-gray-900 border-b border-gray-800",children:[h.jsx("div",{className:"pl-2",children:h.jsx(Jt,{side:"bottom",align:"start",trigger:h.jsx("button",{title:"Shortcuts Info",className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",children:h.jsx(NS,{size:20})}),content:h.jsxs("div",{className:"w-64 p-2 text-xs",children:[h.jsx("h3",{className:"font-bold text-white mb-2 pb-1 border-b border-gray-700",children:"Keyboard Shortcuts"}),h.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-y-1 gap-x-4 text-gray-300",children:[h.jsx("span",{children:"Play / Pause"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"Space"}),h.jsx("span",{children:"Prev / Next Frame"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:" / "}),h.jsx("span",{children:"Prev / Next Annotation"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"Ctrl +  / "}),h.jsx("span",{children:"Undo / Redo"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"Ctrl + Z / Y"}),h.jsx("h3",{className:"font-bold text-white mt-2 mb-1 pb-1 border-b border-gray-700 col-span-2",children:"Tools"}),h.jsx("span",{children:"Select"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"S"}),h.jsx("span",{children:"Pencil"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"P"}),h.jsx("span",{children:"Arrow"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"A"}),h.jsx("span",{children:"Circle"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"C"}),h.jsx("span",{children:"Square"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"Q"}),h.jsx("span",{children:"Text"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"T"}),h.jsx("span",{children:"Eraser"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"E"}),h.jsx("span",{children:"Toggle Ghosting"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"G"}),h.jsx("span",{children:"Toggle Hold (3fr)"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"H"}),h.jsx("h3",{className:"font-bold text-white mt-2 mb-1 pb-1 border-b border-gray-700 col-span-2",children:"Mouse"}),h.jsx("span",{children:"Pan Canvas"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"Middle Click (Hold)"}),h.jsx("span",{children:"Zoom"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"Scroll Wheel"}),h.jsx("span",{children:"Reset View"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"R"}),h.jsx("span",{children:"Stroke Size"})," ",h.jsx("span",{className:"font-mono text-gray-500",children:"+ / -"})]})]})})}),h.jsx(JS,{orientation:"horizontal",className:"border-0 bg-transparent flex-1",activeTool:(c==null?void 0:c.activeTool)||"select",onToolSelect:p,activeColor:c==null?void 0:c.activeColor,onColorChange:m,activeStrokeWidth:c==null?void 0:c.activeStrokeWidth,onStrokeWidthChange:x,defaultDuration:(c==null?void 0:c.defaultDuration)||1,onDefaultDurationChange:S=>{var M;return(M=a.current)==null?void 0:M.store.setState({defaultDuration:S})},holdDuration:(c==null?void 0:c.holdDuration)||1,onHoldDurationChange:S=>{var M,O;S>1?(M=a.current)==null||M.store.setState({holdDuration:S,isOnionSkinEnabled:!1}):(O=a.current)==null||O.store.setState({holdDuration:S})},isOnionSkinEnabled:c==null?void 0:c.isOnionSkinEnabled,onToggleOnionSkin:()=>{var M,O;!(c!=null&&c.isOnionSkinEnabled)?(M=a.current)==null||M.store.setState({isOnionSkinEnabled:!0,holdDuration:1}):(O=a.current)==null||O.store.setState({isOnionSkinEnabled:!1})},onionSkinPrevFrames:c==null?void 0:c.onionSkinPrevFrames,onionSkinNextFrames:c==null?void 0:c.onionSkinNextFrames,onOnionSkinSettingsChange:(S,M)=>{var O;return(O=a.current)==null?void 0:O.store.setState({onionSkinPrevFrames:S,onionSkinNextFrames:M})}}),h.jsxs("div",{className:"flex gap-2 px-2 items-center border-l border-gray-800 h-10",children:[h.jsx("button",{title:"Undo",onClick:g,className:"p-2 bg-gray-800 rounded hover:bg-gray-700",children:h.jsx(WS,{size:16})}),h.jsx("button",{title:"Redo",onClick:y,className:"p-2 bg-gray-800 rounded hover:bg-gray-700",children:h.jsx($S,{size:16})})]}),h.jsx("div",{className:"flex px-2 items-center border-l border-gray-800 h-10",children:h.jsx(KS,{annotator:a.current})}),h.jsx("div",{className:"flex px-2 items-center border-l border-gray-800 h-10 mr-2",children:h.jsx(Jt,{side:"bottom",align:"end",trigger:h.jsxs("button",{title:"Import / Export",className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-800 hover:bg-gray-700 rounded text-xs font-medium transition-colors",children:[h.jsx(bS,{size:14}),h.jsx("span",{children:"Export"})]}),content:h.jsxs("div",{className:"w-56 p-1 flex flex-col gap-1",children:[h.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Annotations Data"}),h.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-2 py-2 text-sm text-gray-200 hover:bg-gray-700 rounded transition-colors w-full text-left",children:[h.jsx(RS,{size:16,className:"text-yellow-400"}),"Download JSON"]}),h.jsxs("label",{className:"flex items-center gap-2 px-2 py-2 text-sm text-gray-200 hover:bg-gray-700 rounded transition-colors w-full text-left cursor-pointer",children:[h.jsx(GS,{size:16,className:"text-yellow-400"}),"Import JSON",h.jsx("input",{type:"file",accept:".json",onChange:R,className:"hidden"})]}),h.jsx("div",{className:"h-px bg-gray-700 my-1"}),h.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Image Export"}),h.jsxs("button",{onClick:()=>k(!1),className:"flex items-center gap-2 px-2 py-2 text-sm text-gray-200 hover:bg-gray-700 rounded transition-colors w-full text-left",children:[h.jsx(bf,{size:16,className:"text-blue-400"}),"Current Frame (Clean)"]}),h.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-2 py-2 text-sm text-gray-200 hover:bg-gray-700 rounded transition-colors w-full text-left",children:[h.jsx(bf,{size:16,className:"text-green-400"}),"Current Frame (Burned In)"]})]})})}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("button",{title:"Clear Current Frame",onClick:()=>{var O;const S=(c==null?void 0:c.currentFrame)||0,M=(c==null?void 0:c.annotations.filter(ke=>ke.frame!==S))||[];(O=a.current)==null||O.store.setState({annotations:M})},className:"p-2 rounded hover:bg-red-900/30 text-red-300 transition-colors",children:h.jsx(Wm,{size:20})}),h.jsx("button",{title:"Clear All Annotations",onClick:()=>{var S;confirm("Clear all annotations?")&&((S=a.current)==null||S.store.setState({annotations:[]}))},className:"p-2 rounded hover:bg-red-900/50 text-red-500 transition-colors",children:h.jsx(Gm,{size:20})})]})]}),h.jsx("div",{className:"flex-1 flex flex-row overflow-hidden",children:h.jsx("div",{className:"flex-1 relative bg-gray-950 overflow-hidden flex items-center justify-center",children:h.jsx("div",{ref:l,className:"relative w-full h-full max-h-full",style:{aspectRatio:"16/9"},onWheel:j})})}),h.jsxs("div",{className:"h-14 bg-gray-900 border-t border-gray-800 flex items-center px-4 gap-4 pb-safe",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{title:"Prev Annotation",onClick:()=>{var S;return(S=a.current)==null?void 0:S.player.seekToPrevAnnotation()},className:"p-1 hover:text-white text-gray-400",children:h.jsx(US,{size:16})}),h.jsx("button",{title:"Prev Frame",onClick:()=>{var S;return(S=a.current)==null?void 0:S.player.seekToFrame(((c==null?void 0:c.currentFrame)||0)-1)},className:"p-1 hover:text-white text-gray-400",children:h.jsx(CS,{size:16})}),h.jsx("button",{onClick:w,className:"w-8 h-8 flex items-center justify-center text-white hover:text-blue-400 mx-2 transition-colors",children:c!=null&&c.isPlaying?h.jsx(AS,{size:24,fill:"currentColor"}):h.jsx(FS,{size:24,fill:"currentColor"})}),h.jsx("button",{title:"Next Frame",onClick:()=>{var S;return(S=a.current)==null?void 0:S.player.seekToFrame(((c==null?void 0:c.currentFrame)||0)+1)},className:"p-1 hover:text-white text-gray-400",children:h.jsx(wS,{size:16})}),h.jsx("button",{title:"Next Annotation",onClick:()=>{var S;return(S=a.current)==null?void 0:S.player.seekToNextAnnotation()},className:"p-1 hover:text-white text-gray-400",children:h.jsx(BS,{size:16})}),h.jsx("button",{title:"Toggle Loop",onClick:S=>{var O;const M=(O=a.current)==null?void 0:O.videoElement;M&&(M.loop=!M.loop,S.currentTarget.classList.toggle("text-blue-500"),S.currentTarget.classList.toggle("text-gray-400"))},className:"p-1 ml-2 text-gray-400 hover:text-white",children:h.jsx(zS,{size:16})})]}),h.jsx("div",{className:"flex-1 flex flex-col justify-center",children:h.jsxs("div",{className:"relative w-full h-8 flex items-center group",children:[h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:T.map(S=>h.jsxs("div",{className:"absolute top-0 h-full flex flex-col items-center justify-center -translate-x-1/2 z-0 opacity-80",style:{left:`${S/b*100}%`},children:[h.jsx("div",{className:"w-0 h-0 border-l-[4px] border-l-transparent border-r-[4px] border-r-transparent border-t-[6px] border-t-yellow-400 mb-0.5"}),h.jsx("div",{className:"w-0.5 h-full bg-yellow-400/50"})]},S))}),h.jsx("div",{className:"absolute inset-x-0 h-1 bg-gray-700 rounded-lg overflow-hidden pointer-events-none top-1/2 -translate-y-1/2"}),h.jsx("input",{type:"range",min:"0",max:b,value:(c==null?void 0:c.currentFrame)||0,onChange:v,className:"w-full h-full opacity-0 cursor-pointer absolute z-20"}),h.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-blue-500 rounded-full shadow pointer-events-none z-10 border-2 border-white box-content",style:{left:`calc(${((c==null?void 0:c.currentFrame)||0)/b*100}% - 10px)`}})]})}),h.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-800 pl-4 h-8 ml-2",children:[h.jsxs("div",{className:"relative group flex items-center justify-center h-full w-8",children:[h.jsx("button",{className:"text-gray-400 hover:text-white",onClick:()=>{if(a.current){const S=a.current.videoElement;S.muted=!S.muted,a.current.store.setState({volume:S.muted?0:1})}},children:(c==null?void 0:c.volume)===0?h.jsx(QS,{size:16}):h.jsx(YS,{size:16})}),h.jsx("div",{className:"hidden group-hover:flex absolute bottom-6 mb-1 left-1/2 -translate-x-1/2 bg-gray-900 border border-gray-700 p-2 rounded shadow-2xl flex-col items-center h-32 w-8 z-50",children:h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",defaultValue:c==null?void 0:c.volume,onChange:S=>{if(a.current){const M=parseFloat(S.target.value);a.current.videoElement.volume=M,a.current.videoElement.muted=!1,a.current.store.setState({volume:M})}},className:"h-full w-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-blue-500",style:{writingMode:"vertical-lr",direction:"rtl"}})}),h.jsx("div",{className:"hidden group-hover:block absolute bottom-full w-20 h-6 bg-transparent left-1/2 -translate-x-1/2"})]}),h.jsx("button",{onClick:()=>f(!d),className:"font-mono text-xs w-28 text-right hover:text-blue-400 transition-colors",children:d?Vp.frameToTimecode((c==null?void 0:c.currentFrame)||0,(c==null?void 0:c.fps)||24):`${c==null?void 0:c.currentFrame} / ${b}`})]})]})]})});Au.displayName="Annotator";function XS(){return h.jsxs("div",{className:"w-screen h-screen flex flex-col items-center justify-center p-8 bg-gray-950",children:[h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Web Media Annotator Demo"}),h.jsx("div",{className:"w-full max-w-5xl aspect-video border border-gray-800 rounded-lg overflow-hidden shadow-2xl",children:h.jsx(Au,{src:"./mov_bbb.mp4",fps:24,startFrame:1001})}),h.jsxs("p",{className:"mt-4 text-gray-500",children:["Try drawing! Tools: Select, Pencil, Square, Circle, Arrow.",h.jsx("br",{}),"Play/Pause and Scrub the timeline."]})]})}class ZS extends HTMLElement{constructor(){super(...arguments),this.root=null,this.annotatorRef=null}static get observedAttributes(){return["src","fps","start-frame","width","height"]}connectedCallback(){this.render()}disconnectedCallback(){var e;(e=this.root)==null||e.unmount(),this.root=null}attributeChangedCallback(e,n,r){n!==r&&this.root&&this.render()}render(){const e=this.getAttribute("src")||"",n=parseInt(this.getAttribute("fps")||"24"),r=parseInt(this.getAttribute("start-frame")||"0"),s=this.getAttribute("width")||"100%",i=this.getAttribute("height")||"100%";this.root||(this.root=zp(this)),this.root.render(h.jsx(Wt.StrictMode,{children:h.jsx(Au,{ref:o=>this.annotatorRef=o,src:e,fps:n,startFrame:r,width:s,height:i})}))}}customElements.get("web-media-annotator")||customElements.define("web-media-annotator",ZS);ql.createRoot(document.getElementById("root")).render(h.jsx(Wt.StrictMode,{children:h.jsx(XS,{})}));
